{"version":3,"sources":["./src/app/views/song/song-routing.module.ts","./src/app/services/song-list.service.ts","./src/app/views/song/song-list/song-list.component.html","./src/app/views/song/song-list/song-list.component.ts","./src/app/views/song/song-list-info/song-list-info.component.ts","./src/app/views/song/song-list-info/song-list-info.component.html","./src/app/services/song-list-info.service.ts","./src/app/views/song/song.module.ts"],"names":[],"mappings":"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","file":"views-song-song-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SongListComponent } from './song-list/song-list.component';\nimport { SongListInfoComponent } from './song-list-info/song-list-info.component';\nimport { MyMainComponent } from '../../components/my-main/my-main.component';\n\nconst routes: Routes = [\n  {\n    path: 'list',\n    component: MyMainComponent,\n    children: [\n      {\n        path: '',\n        component: SongListComponent,\n      },\n    ],\n  },\n  {\n    path: 'list/:songListId',\n    component: SongListInfoComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SongRoutingModule {}\n","import { BASE_ORIGIN } from 'src/app/constants/index';\nimport { replaceSizeInUrl } from 'src/app/utils';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\ntype SongItem = {\n  imgurl: string;\n  imgUrl: string;\n  specialid: number;\n  path: string;\n  specialname: string;\n  title: string;\n  playcount: number;\n  popularity: number;\n};\n\ntype SongListResponse = {\n  plist: {\n    list: {\n      info: SongItem[];\n    };\n  };\n};\n@Injectable({\n  providedIn: 'root',\n})\nexport class SongListService {\n  songListUrl = `${BASE_ORIGIN}/plist/index&json=true`;\n\n  constructor(private http: HttpClient) {}\n\n  async fetchSongList() {\n    const response = await this.http\n      .get<SongListResponse>(this.songListUrl)\n      .toPromise();\n    const {\n      plist: {\n        list: { info },\n      },\n    } = response;\n    info.forEach((obj) => {\n      obj.imgUrl = replaceSizeInUrl(obj.imgurl);\n      obj.path = `/song/list/${obj.specialid}`;\n      obj.title = obj.specialname;\n      obj.popularity = obj.playcount;\n    });\n    return info;\n  }\n}\n","<section class=\"song_list\" test-id=\"page-song-list\">\n  <app-my-card-list [pubList]=\"songList\" class=\"song_list__cont\">\n    <ng-template let-item>\n      <div class=\"song_list__info\">\n        <div class=\"song_list__title\">{{ item.title }}</div>\n        <div class=\"song_list__star\">\n          <svg class=\"icon song_list__icon\" aria-hidden=\"true\">\n            <use xlink:href=\"#icon-music\"></use>\n          </svg>\n          <span class=\"song_list__popularity\">{{ item.popularity }}</span>\n        </div>\n      </div>\n    </ng-template>\n  </app-my-card-list>\n</section>\n","import { ResponseTypeFromServiceReq } from 'src/app/typings/index';\nimport { SongListService } from 'src/app/services/song-list.service';\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-song-list',\n  templateUrl: './song-list.component.html',\n  styleUrls: ['./song-list.component.scss'],\n})\nexport class SongListComponent implements OnInit {\n  songList: ResponseTypeFromServiceReq<\n    typeof SongListService,\n    'fetchSongList'\n  > = [];\n\n  constructor(private songListService: SongListService) {}\n\n  async ngOnInit(): Promise<void> {\n    if (this.songList.length === 0) {\n      this.songList = await this.songListService.fetchSongList();\n    }\n  }\n}\n","import { ResponseTypeFromServiceReq } from 'src/app/typings/index';\nimport { SongListInfoService } from 'src/app/services/song-list-info.service';\nimport { replaceSizeInUrl } from 'src/app/utils';\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-song-list-info',\n  templateUrl: './song-list-info.component.html',\n  styleUrls: ['./song-list-info.component.scss'],\n})\nexport class SongListInfoComponent implements OnInit {\n  songListInfo: ResponseTypeFromServiceReq<\n    typeof SongListInfoService,\n    'fetchSongListInfo'\n  > = { info: { list: {}, songs: { list: { info: [] } } } };\n\n  constructor(private songListInfoService: SongListInfoService) {}\n\n  get getModuleHeadInfo() {\n    /* eslint-disable */\n    // @ts-ignore\n    const data = this.songListInfo.info.list;\n    return {\n      imgUrl: replaceSizeInUrl(data.imgurl),\n      name: data.specialname,\n      intro: data.intro,\n    };\n    /* eslint-enable */\n  }\n\n  get getMusicList() {\n    // todo remove ? and fix type\n    // @ts-ignore\n    // eslint-disable-next-line\n    return this.songListInfo.songs?.list.info;\n  }\n\n  async ngOnInit(): Promise<void> {\n    const songListId = window.location.pathname.split('/').pop();\n    if (songListId === undefined) {\n      return;\n    }\n    this.songListInfo = await this.songListInfoService.fetchSongListInfo(\n      songListId\n    );\n  }\n}\n","<section class=\"song_list_info\" test-id=\"page-song-list-info\">\n  <app-my-module-head [moduleHeadInfo]=\"getModuleHeadInfo\">\n    <app-my-module-description\n      slot=\"moduleDes\"\n      [description]=\"getModuleHeadInfo.intro\"\n    >\n    </app-my-module-description>\n  </app-my-module-head>\n  <app-my-music-list [musicList]=\"getMusicList\"> </app-my-music-list>\n</section>\n","import { BASE_ORIGIN } from 'src/app/constants';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\ntype SongListInfoResponse = {\n  info: {\n    list: {\n      imgurl: string;\n      specialname: string;\n      intro: string;\n    };\n  };\n  list: { list: { info: [] } };\n};\n@Injectable({\n  providedIn: 'root',\n})\nexport class SongListInfoService {\n  constructor(private http: HttpClient) {}\n\n  async fetchSongListInfo(songListId: string) {\n    const response = await this.http\n      .get<SongListInfoResponse>(\n        `${BASE_ORIGIN}/plist/list/${songListId}&json=true`\n      )\n      .toPromise();\n    const { info, list } = response;\n    return {\n      info,\n      songs: list,\n    };\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SongListComponent } from './song-list/song-list.component';\nimport { SongListInfoComponent } from './song-list-info/song-list-info.component';\nimport { SongRoutingModule } from './song-routing.module';\nimport { SharedModule } from '../../shared/shared.module';\n\n@NgModule({\n  declarations: [SongListComponent, SongListInfoComponent],\n  imports: [CommonModule, SharedModule, SongRoutingModule],\n})\nexport class SongModule {}\n"],"sourceRoot":"webpack:///"}