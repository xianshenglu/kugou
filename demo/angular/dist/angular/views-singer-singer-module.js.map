{"version":3,"sources":["./src/app/services/singer-category.service.ts","./src/app/views/singer/singer-routing.module.ts","./src/app/views/singer/singer.module.ts","./src/app/views/singer/singer-info/singer-info.component.ts","./src/app/views/singer/singer-info/singer-info.component.html","./src/app/views/singer/singer-list/singer-list.component.ts","./src/app/views/singer/singer-list/singer-list.component.html","./src/app/views/singer/singer-category/singer-category.component.html","./src/app/views/singer/singer-category/singer-category.component.ts","./src/app/services/singer-info.service.ts","./src/app/services/singer-list.service.ts"],"names":[],"mappings":"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","file":"views-singer-singer-module.js","sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BASE_ORIGIN } from '../constants/index';\n\nexport type SingerCategory = {\n  path: string;\n  classid: number;\n  classname: string;\n};\ntype SingerCategoryResponse = {\n  list: SingerCategory[];\n};\n@Injectable({\n  providedIn: 'root',\n})\nexport class SingerCategoryService {\n  singerCategoryUrl = `${BASE_ORIGIN}/singer/class&json=true`;\n\n  constructor(private http: HttpClient) {}\n\n  async fetchSingerCategory() {\n    const { list } = await this.http\n      .get<SingerCategoryResponse>(this.singerCategoryUrl)\n      .toPromise();\n\n    const singerCategories = list.reduce(\n      (\n        re: {\n          data: SingerCategory[];\n          category: string;\n        }[],\n        obj\n      ) => {\n        obj.path = `/singer/list/${obj.classid}`;\n        const findCategories = re.find(\n          (o) => o.category === obj.classname.substring(0, 2)\n        );\n        if (findCategories) {\n          findCategories.data.push(obj);\n        } else {\n          re.push({\n            category: obj.classname.substring(0, 2),\n            data: [obj],\n          });\n        }\n        return re;\n      },\n      []\n    );\n    return singerCategories;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SingerCategoryComponent } from './singer-category/singer-category.component';\nimport { SingerListComponent } from './singer-list/singer-list.component';\nimport { SingerInfoComponent } from './singer-info/singer-info.component';\nimport { MyMainComponent } from '../../components/my-main/my-main.component';\n\nconst routes: Routes = [\n  {\n    path: 'category',\n    component: MyMainComponent,\n    children: [\n      {\n        path: '',\n        component: SingerCategoryComponent,\n      },\n    ],\n  },\n  {\n    path: 'list/:singerListId',\n    component: SingerListComponent,\n  },\n  {\n    path: 'info/:singerId',\n    component: SingerInfoComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SingerRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SingerCategoryComponent } from './singer-category/singer-category.component';\nimport { SingerListComponent } from './singer-list/singer-list.component';\nimport { SingerInfoComponent } from './singer-info/singer-info.component';\nimport { SingerRoutingModule } from './singer-routing.module';\nimport { SharedModule } from '../../shared/shared.module';\n\n@NgModule({\n  declarations: [\n    SingerCategoryComponent,\n    SingerListComponent,\n    SingerInfoComponent,\n  ],\n  imports: [CommonModule, SharedModule, SingerRoutingModule],\n})\nexport class SingerModule {}\n","import { ResponseTypeFromServiceReq } from 'src/app/typings/index';\nimport { Component, OnInit } from '@angular/core';\nimport { SingerInfoService } from '../../../services/singer-info.service';\n\n@Component({\n  selector: 'app-singer-info',\n  templateUrl: './singer-info.component.html',\n  styleUrls: ['./singer-info.component.scss'],\n})\nexport class SingerInfoComponent implements OnInit {\n  singerInfo: ResponseTypeFromServiceReq<\n    typeof SingerInfoService,\n    'fetchSingerInfo'\n  > = { info: {}, data: [] };\n\n  constructor(private singerInfoService: SingerInfoService) {}\n\n  get getModuleHeadInfo() {\n    // @ts-ignore\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    return this.singerInfo.info;\n  }\n\n  get getMusicList() {\n    // @ts-ignore\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    return this.singerInfo.data;\n  }\n\n  async ngOnInit(): Promise<void> {\n    const singerId = window.location.pathname.split('/').pop();\n    if (singerId === undefined) {\n      return;\n    }\n    this.singerInfo = await this.singerInfoService.fetchSingerInfo(singerId);\n  }\n}\n","<section class=\"singer_info\" test-id=\"page-singer-info\">\n  <app-my-module-head [moduleHeadInfo]=\"getModuleHeadInfo\">\n    <app-my-module-description\n      slot=\"moduleDes\"\n      [description]=\"getModuleHeadInfo.intro\"\n    >\n    </app-my-module-description>\n  </app-my-module-head>\n  <app-my-music-list [musicList]=\"getMusicList\"> </app-my-music-list>\n</section>\n","import { lazyLoad } from 'src/app/utils';\nimport { ResponseTypeFromServiceReq } from 'src/app/typings/index';\nimport { Component, OnInit, ViewChild, ViewChildren } from '@angular/core';\nimport { SingerListService } from '../../../services/singer-list.service';\n\n@Component({\n  selector: 'app-singer-list',\n  templateUrl: './singer-list.component.html',\n  styleUrls: ['./singer-list.component.scss'],\n})\nexport class SingerListComponent implements OnInit {\n  // @ts-ignore\n  @ViewChild('lazyLoadRoot') lazyLoadRoot: ElementRef<HTMLImageElement>;\n\n  // @ts-ignore\n  @ViewChildren('lazyImages') lazyImages: ElementRef<HTMLImageElement>;\n\n  singerList: ResponseTypeFromServiceReq<\n    typeof SingerListService,\n    'fetchSingerList'\n  > = {\n    info: {\n      id: '',\n      name: '',\n      count: 0,\n    },\n    data: [],\n  };\n\n  constructor(private singerListService: SingerListService) {}\n\n  get singerListData() {\n    // @ts-ignore\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    return this.singerList.data;\n  }\n\n  get singerName() {\n    // @ts-ignore\n    // eslint-disable-next-line\n    return this.singerList.info.name;\n  }\n\n  async ngOnInit(): Promise<void> {\n    const singerListId = window.location.pathname.split('/').pop();\n    if (singerListId === undefined) {\n      return;\n    }\n    this.singerList = await this.singerListService.fetchSingerList(\n      singerListId\n    );\n    requestAnimationFrame(() => {\n      // todo ? why ngOnChanges not work here?\n      this.onSingerListChange();\n    });\n  }\n  /* eslint-disable */\n\n  onSingerListChange() {\n    // @ts-ignore\n    if (this.singerList.data.length === 0 || this.lazyImages === undefined) {\n      return;\n    }\n    lazyLoad(\n      // @ts-ignore\n      this.lazyImages.toArray().map((ref) => ref.nativeElement),\n      {\n        root: this.lazyLoadRoot.nativeElement,\n      }\n    );\n    /* eslint-enable */\n  }\n}\n","<section class=\"singer_list\" test-id=\"page-singer-list\">\n  <app-my-module-title [title]=\"singerName\"></app-my-module-title>\n  <ul class=\"singer_list__list\" #lazyLoadRoot>\n    <li\n      class=\"singer_list__item main_border_bottom\"\n      *ngFor=\"let item of singerListData\"\n      test-class=\"list\"\n    >\n      <a [routerLink]=\"item.path\" class=\"singer_list__link\" test-class=\"link\">\n        <img\n          class=\"singer_list__img lazy_image\"\n          #lazyImages\n          src=\"assets/images/logo__grey.png\"\n          [attr.data-src]=\"item.imgUrl\"\n        />\n        <div class=\"singer_list__name\">{{ item.name }}</div>\n      </a>\n    </li>\n  </ul>\n</section>\n","<section class=\"singer_category\" test-id=\"page-singer-category\">\n  <ul\n    class=\"singer_category__list main_border\"\n    *ngFor=\"let list of singerCategories\"\n  >\n    <li\n      class=\"singer_category__item main_border_bottom\"\n      *ngFor=\"let item of list.data\"\n      test-class=\"list\"\n    >\n      <a\n        [routerLink]=\"item.path\"\n        class=\"singer_category__link\"\n        test-class=\"link\"\n      >\n        <div class=\"singer_category__title\">{{ item.classname }}</div>\n        <button class=\"singer_category_btn\">\n          <svg class=\"icon\" aria-hidden=\"true\">\n            <use xlink:href=\"#icon-arrow-right\"></use>\n          </svg>\n        </button>\n      </a>\n    </li>\n  </ul>\n</section>\n","import { ResponseTypeFromServiceReq } from 'src/app/typings/index';\nimport { SingerCategoryService } from 'src/app/services/singer-category.service';\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-singer-category',\n  templateUrl: './singer-category.component.html',\n  styleUrls: ['./singer-category.component.scss'],\n})\nexport class SingerCategoryComponent implements OnInit {\n  singerCategories: ResponseTypeFromServiceReq<\n    typeof SingerCategoryService,\n    'fetchSingerCategory'\n  > = [];\n\n  constructor(private singerCategoryService: SingerCategoryService) {}\n\n  async ngOnInit(): Promise<void> {\n    this.singerCategories = await this.singerCategoryService.fetchSingerCategory();\n  }\n}\n","import { replaceSizeInUrl } from 'src/app/utils';\nimport { BASE_ORIGIN } from 'src/app/constants';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\ntype SingerInfoResponse = {\n  info: {\n    singerid: number;\n    singername: string;\n    songcount: number;\n    albumcount: number;\n    imgurl: string;\n    intro: string;\n  };\n  songs: {\n    list: { filename: string; name: string }[];\n  };\n};\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SingerInfoService {\n  singerInfoUrl = `${BASE_ORIGIN}/singer/info`;\n\n  constructor(private http: HttpClient) {}\n\n  async fetchSingerInfo(singerId: string) {\n    const response = await this.http\n      .get<SingerInfoResponse>(`${this.singerInfoUrl  }/${singerId}&json=true`)\n      .toPromise();\n    const { info, songs } = response;\n\n    const singerInfo = {\n      info: {\n        id: info.singerid,\n        name: info.singername,\n        count: info.songcount,\n        albumcount: info.albumcount,\n        imgUrl: replaceSizeInUrl(info.imgurl),\n        intro: info.intro,\n      },\n      data: songs.list,\n    };\n    songs.list.forEach((obj) => {\n      obj.name = obj.filename;\n    });\n    return singerInfo;\n  }\n}\n","import { replaceSizeInUrl } from 'src/app/utils';\nimport { BASE_ORIGIN } from 'src/app/constants';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\ntype SingerListResponse = {\n  classid: number;\n  classname: string;\n  singers: {\n    list: {\n      total: number;\n      info: {\n        singerid: number;\n        singername: string;\n        imgurl: string;\n        id: number;\n        name: string;\n        imgUrl: string;\n        path: string;\n      }[];\n    };\n    total: number;\n  };\n};\n@Injectable({\n  providedIn: 'root',\n})\nexport class SingerListService {\n  singerListUrl = `${BASE_ORIGIN}/singer/list/&json=true&singerListId=`;\n\n  constructor(private http: HttpClient) {}\n\n  async fetchSingerList(singerListId: string) {\n    const response = await this.http\n      .get<SingerListResponse>(`${this.singerListUrl}${singerListId}`)\n      .toPromise();\n    const {\n      classid,\n      classname,\n\n      singers,\n    } = response;\n    singers.list.info.forEach((obj) => {\n      obj.id = obj.singerid;\n      obj.name = obj.singername;\n      obj.imgUrl = replaceSizeInUrl(obj.imgurl);\n      obj.path = `/singer/info/${obj.id}`;\n    });\n    return {\n      info: {\n        id: classid,\n        name: classname,\n        count: singers.list.total,\n      },\n      data: singers.list.info,\n    };\n  }\n}\n"],"sourceRoot":"webpack:///"}