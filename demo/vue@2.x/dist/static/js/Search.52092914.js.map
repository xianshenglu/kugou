{"version":3,"sources":["webpack:///./src/components/PubModuleTitle.vue?ab9f","webpack:///./src/components/PubModuleTitle.vue","webpack:///src/components/PubModuleTitle.vue","webpack:///./src/components/PubModuleTitle.vue?5736","webpack:///./src/components/PubModuleTitle.vue?3a61","webpack:///./src/components/AppMusicList.vue?e4eb","webpack:///./node_modules/core-js/modules/es6.regexp.search.js","webpack:///./src/components/AppMusicList.vue","webpack:///src/components/AppMusicList.vue","webpack:///./src/components/AppMusicList.vue?37aa","webpack:///./src/components/AppMusicList.vue?6abd","webpack:///./src/mixins/loading.js","webpack:///./src/views/search/Search.vue","webpack:///./src/requests/search.js","webpack:///src/views/search/Search.vue","webpack:///./src/views/search/Search.vue?6786","webpack:///./src/views/search/Search.vue?a449","webpack:///./node_modules/core-js/modules/_same-value.js","webpack:///./src/views/search/Search.vue?8bd6"],"names":["render","_vm","this","_c","_self","staticClass","on","$event","$emit","arguments","_v","_s","title","staticRenderFns","name","props","type","String","default","component","anObject","sameValue","regExpExec","defined","SEARCH","$search","maybeCallNative","regexp","O","fn","undefined","call","RegExp","res","done","value","rx","S","previousLastIndex","lastIndex","result","index","_l","musicList","item","key","wantPlay","_t","filename","attrs","Array","methods","music","$store","commit","$props","updated","stopLoading","_objectSpread","mapMutations","startLoading","replaceProperty","paths","data","setLoadingExcludeHeader","setLoadingExcludeNav","setLoadingExcludeModuleTitle","setLoadingExcludeSearchForm","ref","preventDefault","directives","rawName","keyword","expression","modifiers","placeholder","domProps","indexOf","_k","keyCode","getSearchRes","apply","target","composing","trim","$forceUpdate","class","isSearchResShow","isSearchRecShow","searchType","searchRecArr","searchRes","info","length","fetchHotSearch","_ref","_ref$params","params","http","getHotSearch","format","plat","count","fetchSearchResult","_ref2","_ref2$params","getSearchResult","page","pagesize","showtype","mixins","loading","components","PubModuleTitle","AppMusicList","computed","mapState","get","state","search","set","created","init","mounted","bus","$on","scrollTopSearchCont","initQqBugDetect","destroyed","$off","queryKeyword","$route","query","isKeywordValid","isQueryKeywordValid","getSearchRec","_this","then","catch","err","alert","_this2","$router","replace","search__cont","document","getElementsByClassName","window","listener","scrollTop","addEventListener","$refs","searchCont","module","exports","Object","is","x","y"],"mappings":"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","file":"static/js/Search.52092914.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PubModuleTitle.vue?vue&type=style&index=0&id=6a0fba21&prod&scoped=true&lang=less\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('h4',{staticClass:\"module_title main_box_shadow\",on:{\"click\":function($event){return _vm.$emit('click',arguments[0])}}},[_vm._v(_vm._s(_vm.title))])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <h4 class=\"module_title main_box_shadow\" @click=\"$emit('click',arguments[0])\">{{title}}</h4>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'PubModuleTitle',\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import (reference) '~@/styles/constant';\r\n.module_title {\r\n  width: 100%;\r\n  height: @module_title_height;\r\n  position: relative;\r\n  z-index: 1;\r\n  text-align: center;\r\n\r\n  background-color: @white;\r\n\r\n  line-height: @module_title_height;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PubModuleTitle.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PubModuleTitle.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PubModuleTitle.vue?vue&type=template&id=6a0fba21&scoped=true\"\nimport script from \"./PubModuleTitle.vue?vue&type=script&lang=js\"\nexport * from \"./PubModuleTitle.vue?vue&type=script&lang=js\"\nimport style0 from \"./PubModuleTitle.vue?vue&type=style&index=0&id=6a0fba21&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a0fba21\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMusicList.vue?vue&type=style&index=0&id=5b2afdbc&prod&lang=less&scoped=true\"","'use strict';\n\nvar anObject = require('./_an-object');\nvar sameValue = require('./_same-value');\nvar regExpExec = require('./_regexp-exec-abstract');\n\n// @@search logic\nrequire('./_fix-re-wks')('search', 1, function (defined, SEARCH, $search, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = defined(this);\n      var fn = regexp == undefined ? undefined : regexp[SEARCH];\n      return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@search\n    function (regexp) {\n      var res = maybeCallNative($search, regexp, this);\n      if (res.done) return res.value;\n      var rx = anObject(regexp);\n      var S = String(this);\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{staticClass:\"music_list\"},_vm._l((_vm.musicList),function(item,index){return _c('li',{key:index,staticClass:\"music_list__item main_border_bottom\"},[_c('div',{staticClass:\"music_list__info\",on:{\"click\":function($event){return _vm.wantPlay(item)}}},[_vm._t(\"index\",null,{\"data\":index}),_c('div',{staticClass:\"music_list__name\"},[_vm._v(_vm._s(item.filename))])],2),_c('button',{staticClass:\"music_list__download\"},[_c('svg',{staticClass:\"icon\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-download\"}})])])])}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ul class=\"music_list\">\r\n    <li class=\"music_list__item main_border_bottom\" v-for=\"(item,index) in musicList\" :key=\"index\">\r\n      <div class=\"music_list__info\" @click=\"wantPlay(item)\">\r\n        <slot :data=\"index\" name=\"index\" class=\"music_list__index\" @click=\"wantPlay(item)\"></slot>\r\n        <div class=\"music_list__name\">{{item.filename}}</div>\r\n      </div>\r\n      <button class=\"music_list__download\">\r\n        <svg class=\"icon\" aria-hidden=\"true\">\r\n          <use xlink:href=\"#icon-download\"></use>\r\n        </svg>\r\n      </button>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'AppMusicList',\r\n  props: {\r\n    musicList: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    wantPlay(music) {\r\n      this.$store.commit('player/wantPlay', {\r\n        music,\r\n        musicList: this.$props.musicList\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import (reference) '~@/styles/constant';\r\n.music_list {\r\n  padding-left: 19px;\r\n}\r\n\r\n.music_list__item {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: auto;\r\n  min-height: 72px;\r\n  padding: 10px 0;\r\n}\r\n\r\n.music_list__info {\r\n  display: flex;\r\n  width: 100%;\r\n  align-items: center;\r\n}\r\n.music_list__index {\r\n  width: 48px;\r\n  flex: 0 0 auto;\r\n}\r\n.music_list__name {\r\n  width: calc(100% - 48px);\r\n  flex: 1 0 auto;\r\n}\r\n\r\n.music_list__download {\r\n  box-sizing: content-box;\r\n  width: 23px;\r\n  height: 100%;\r\n  padding: 0 @padding_width;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMusicList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMusicList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AppMusicList.vue?vue&type=template&id=5b2afdbc&scoped=true\"\nimport script from \"./AppMusicList.vue?vue&type=script&lang=js\"\nexport * from \"./AppMusicList.vue?vue&type=script&lang=js\"\nimport style0 from \"./AppMusicList.vue?vue&type=style&index=0&id=5b2afdbc&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b2afdbc\",\n  null\n  \n)\n\nexport default component.exports","import { mapMutations } from 'vuex'\r\nexport default {\r\n  updated() {\r\n    this.stopLoading()\r\n  },\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    startLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: true\r\n      })\r\n    },\r\n    stopLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: false\r\n      })\r\n    },\r\n    setLoadingExcludeHeader() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_header'\r\n      })\r\n    },\r\n    setLoadingExcludeNav() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_nav'\r\n      })\r\n    },\r\n    setLoadingExcludeModuleTitle() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_module_title'\r\n      })\r\n    },\r\n    setLoadingExcludeSearchForm() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_search_form'\r\n      })\r\n    }\r\n  }\r\n}\r\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"search\"},[_c('PubModuleTitle',{staticClass:\"search__title\",attrs:{\"title\":_vm.title}}),_c('div',{ref:\"searchCont\",staticClass:\"search__cont\"},[_c('form',{staticClass:\"search__form\",on:{\"submit\":function($event){$event.preventDefault();}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.keyword),expression:\"keyword\",modifiers:{\"trim\":true}}],staticClass:\"search__input\",attrs:{\"type\":\"text\",\"placeholder\":_vm.placeholder},domProps:{\"value\":(_vm.keyword)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.getSearchRes.apply(null, arguments)},\"input\":function($event){if($event.target.composing)return;_vm.keyword=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('button',{class:_vm.isSearchResShow?'search__btn search__btn--active':'search__btn',attrs:{\"type\":\"button\"},on:{\"click\":_vm.getSearchRes}},[_vm._v(_vm._s(_vm.title))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isSearchRecShow),expression:\"isSearchRecShow\"}],staticClass:\"search__rec\"},[_c('h6',{staticClass:\"search__type\"},[_vm._v(_vm._s(_vm.searchType))]),_c('ul',{staticClass:\"search__list\"},_vm._l((_vm.searchRecArr),function(item,index){return _c('li',{key:index,staticClass:\"search__item main_border_bottom\",on:{\"click\":function($event){_vm.keyword=item.keyword;_vm.getSearchRes()}}},[_vm._v(_vm._s(item.keyword))])}),0)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isSearchResShow),expression:\"isSearchResShow\"}],staticClass:\"search__res\"},[_c('div',{staticClass:\"search__count\"},[_vm._v(\"共有\"+_vm._s(_vm.searchRes.info.length)+\"条结果\")]),_c('AppMusicList',{staticClass:\"search__res-list\",attrs:{\"music-list\":_vm.searchRes.info}})],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { getHotSearch, getSearchResult } from '@shared/api/search'\r\nimport http from './http'\r\n\r\nexport const fetchHotSearch = ({ params = {} } = {}) => {\r\n  return http({\r\n    ...getHotSearch,\r\n    params: { format: 'json', plat: 0, count: 30, ...params }\r\n  })\r\n}\r\nexport const fetchSearchResult = ({ params = {} } = {}) => {\r\n  return http({\r\n    ...getSearchResult,\r\n    params: { format: 'json', page: 1, pagesize: 20, showtype: 1, ...params }\r\n  })\r\n}\r\n","<template>\r\n  <section class=\"search\">\r\n    <PubModuleTitle :title=\"title\" class=\"search__title\"/>\r\n    <div class=\"search__cont\" ref=\"searchCont\">\r\n      <form class=\"search__form\" @submit.prevent>\r\n        <input\r\n          type=\"text\"\r\n          :placeholder=\"placeholder\"\r\n          class=\"search__input\"\r\n          v-model.trim=\"keyword\"\r\n          @keyup.enter=\"getSearchRes\"\r\n        >\r\n        <button\r\n          :class=\"isSearchResShow?'search__btn search__btn--active':'search__btn'\"\r\n          type=\"button\"\r\n          @click=\"getSearchRes\"\r\n        >{{title}}</button>\r\n      </form>\r\n      <div class=\"search__rec\" v-show=\"isSearchRecShow\">\r\n        <h6 class=\"search__type\">{{searchType}}</h6>\r\n        <ul class=\"search__list\">\r\n          <li\r\n            class=\"search__item main_border_bottom\"\r\n            v-for=\"(item,index) in searchRecArr\"\r\n            :key=\"index\"\r\n            @click=\"keyword=item.keyword;getSearchRes()\"\r\n          >{{item.keyword}}</li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"search__res\" v-show=\"isSearchResShow\">\r\n        <div class=\"search__count\">共有{{searchRes.info.length}}条结果</div>\r\n        <AppMusicList :music-list=\"searchRes.info\" class=\"search__res-list\"/>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport PubModuleTitle from '@/components/PubModuleTitle'\r\nimport AppMusicList from '@/components/AppMusicList'\r\nimport { fetchHotSearch, fetchSearchResult } from '../../requests/search'\r\nimport bus from '@/eventBus'\r\nimport loading from '../../mixins/loading.js'\r\nimport { mapState, mapMutations } from 'vuex'\r\n\r\nexport default {\r\n  name: 'Search',\r\n  mixins: [loading],\r\n  components: {\r\n    PubModuleTitle,\r\n    AppMusicList\r\n  },\r\n  data() {\r\n    return {\r\n      title: '搜索',\r\n      searchType: '最近热门',\r\n      placeholder: '歌手/歌名/拼音'\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('search', [\r\n      'searchRecArr',\r\n      'searchRes',\r\n      'isSearchRecShow',\r\n      'isSearchResShow'\r\n    ]),\r\n    keyword: {\r\n      get() {\r\n        return this.$store.state.search.keyword\r\n      },\r\n      set(value) {\r\n        this.replaceProperty({ paths: 'search.keyword', data: value })\r\n      }\r\n    },\r\n    isSearchRecShow: {\r\n      get() {\r\n        return this.$store.state.search.isSearchRecShow\r\n      },\r\n      set(data) {\r\n        this.replaceProperty({ paths: 'search.isSearchRecShow', data })\r\n      }\r\n    },\r\n    isSearchResShow: {\r\n      get() {\r\n        return this.$store.state.search.isSearchResShow\r\n      },\r\n      set(data) {\r\n        this.replaceProperty({ paths: 'search.isSearchResShow', data })\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  },\r\n  mounted() {\r\n    bus.$on('searchBtnClicked', this.scrollTopSearchCont)\r\n    this.initQqBugDetect()\r\n  },\r\n  destroyed() {\r\n    bus.$off('searchBtnClicked', this.scrollTopSearchCont)\r\n  },\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    init() {\r\n      let queryKeyword = this.$route.query.keyword\r\n      let isKeywordValid =\r\n        typeof this.keyword === 'string' && this.keyword !== ''\r\n      let isQueryKeywordValid =\r\n        typeof queryKeyword === 'string' && queryKeyword !== ''\r\n      if (isQueryKeywordValid && queryKeyword !== this.keyword) {\r\n        this.keyword = queryKeyword\r\n        this.getSearchRes()\r\n      } else if (isKeywordValid) {\r\n        this.isSearchRecShow = false\r\n        this.isSearchResShow = true\r\n      } else {\r\n        this.getSearchRec()\r\n      }\r\n    },\r\n    getSearchRec() {\r\n      if (this.searchRecArr.length !== 0) {\r\n        this.isSearchResShow = false\r\n        this.isSearchRecShow = true\r\n        return\r\n      }\r\n      this.setLoadingExcludeSearchForm()\r\n      this.startLoading()\r\n      fetchHotSearch()\r\n        .then(({ data }) => {\r\n          this.replaceProperty({\r\n            paths: 'search.searchRecArr',\r\n            data: data.data.info\r\n          })\r\n          this.stopLoading()\r\n          this.isSearchResShow = false\r\n          this.isSearchRecShow = true\r\n        })\r\n        .catch(err => {\r\n          alert(err)\r\n        })\r\n    },\r\n    getSearchRes() {\r\n      if (this.keyword === '') {\r\n        return\r\n      }\r\n      this.$router.replace({ query: { keyword: this.keyword } })\r\n      this.setLoadingExcludeSearchForm()\r\n      this.startLoading()\r\n      fetchSearchResult({ params: { keyword: this.keyword } }).then(res => {\r\n        let data = res.data.data\r\n        this.replaceProperty({\r\n          paths: 'search.searchRes',\r\n          data\r\n        })\r\n        this.isSearchRecShow = false\r\n        this.isSearchResShow = true\r\n        this.stopLoading()\r\n      })\r\n    },\r\n    initQqBugDetect() {\r\n      let search__cont = document.getElementsByClassName('search__cont')[0]\r\n      window.search__cont = search__cont\r\n      //! bug with qq browser\r\n      let listener = function() {\r\n        if (search__cont.scrollTop) {\r\n          // console.log(event.type, search__cont.scrollTop)\r\n        }\r\n      }\r\n      window.addEventListener('touchstart', listener)\r\n      window.addEventListener('touchmove', listener)\r\n    },\r\n    scrollTopSearchCont() {\r\n      if (this.$refs.searchCont) {\r\n        //todo smooth scroll\r\n        this.$refs.searchCont.scrollTop = 0\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import (reference) '~@/styles/constant';\r\n.search {\r\n  box-sizing: border-box;\r\n}\r\n.search__cont {\r\n  overflow: scroll;\r\n\r\n  box-sizing: border-box;\r\n  height: calc(100% - @module_title_height);\r\n}\r\n.search__form {\r\n  box-sizing: border-box;\r\n  height: @search_form_height;\r\n  padding: @padding_width;\r\n\r\n  background-color: @white-1;\r\n}\r\n.search__input,\r\n.search__btn {\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n\r\n  border-radius: 5px;\r\n}\r\n\r\n.search__input {\r\n  width: 277px;\r\n  margin-right: 10px;\r\n  padding: 7px 1px 7px 31px;\r\n\r\n  border: 1px solid @white-2;\r\n  background-color: @white;\r\n}\r\n.search__btn {\r\n  width: 60px;\r\n\r\n  color: @white-to-black;\r\n  background-color: @white-2;\r\n}\r\n.search__btn--active {\r\n  color: @white;\r\n  background: @theme;\r\n}\r\n.search__type {\r\n  height: 51px;\r\n  padding-left: 16px;\r\n\r\n  color: @theme;\r\n  border-bottom: 1px solid @white-3;\r\n\r\n  font-size: 16px;\r\n  line-height: 51px;\r\n}\r\n.search__item {\r\n  height: 64px;\r\n  margin-left: 16px;\r\n\r\n  font-size: 20px;\r\n  line-height: 64px;\r\n}\r\n.search__count {\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  padding-left: 16px;\r\n\r\n  color: @white-to-black;\r\n  background-color: @white-2;\r\n\r\n  font-size: 14px;\r\n  line-height: 28px;\r\n}\r\n.search__res-list {\r\n  overflow-y: scroll;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=6142df7d&scoped=true\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=6142df7d&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6142df7d\",\n  null\n  \n)\n\nexport default component.exports","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=6142df7d&prod&scoped=true&lang=less\""],"sourceRoot":""}