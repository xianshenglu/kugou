(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PlayerMax"],{2842:function(e,t,r){},"41b6":function(e,t,r){},"68f4":function(e,t,r){"use strict";r("2842")},7700:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e._self._c;return e.music?t("section",{staticClass:"player"},[t("div",{staticClass:"player__mask",style:e.playerBgImg}),t("div",{staticClass:"player__cont"},[t("h6",{staticClass:"player__song_name"},[e._v(e._s(e.songName))]),t("img",{class:e.isPlaying?"player__singer_img player__singer_img--active":"player__singer_img",attrs:{src:e.singerImg}}),t("PlayerLyrics",{staticClass:"player__lyrics"}),t("PlayerProgress",{staticClass:"player__progress"}),t("div",{staticClass:"player__buttons"},[t("PrevButton",{staticClass:"player__btn_prev"}),t("PlayButton",{staticClass:"player__btn_status"}),t("NextButton",{staticClass:"play__btn_next"})],1),t("button",{staticClass:"player__download"})],1)]):e._e()},s=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("a481"),r("ade3")),a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"player_lyric",on:{touchstart:function(t){e.isTouching=!0},touchend:function(t){e.isTouching=!1}}},e._l(e.lyricItems,(function(r,i){return t("p",e._b({key:r.millisecond,ref:r.millisecond,refInFor:!0,class:i===e.prevLyricIndex+1?"player_lyric_text player_lyric_text--active ":"player_lyric_text"},"p",e.getVBindObj("millisecond-"+r.millisecond),!1),[e._v(e._s(r.text))])})),0)},o=[],c=(r("20d6"),r("2f62")),u=r("ed08");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={name:"PlayerLyrics",data:function(){return{getVBindObj:u["a"],prevLyricIndex:0,isTouching:!1}},computed:d(d(d({},Object(c["d"])("player",["audioEl"])),Object(c["b"])("player",["lyricItems"])),{},{lyricMillisecond:function(){return this.lyricItems.map((function(e){return e.millisecond}))}}),mounted:function(){var e=this;this.$nextTick((function(){e.audioEl.addEventListener("timeupdate",e.timeUpdateCb)}))},destroyed:function(){this.audioEl.removeEventListener("timeupdate",this.timeUpdateCb)},methods:{timeUpdateCb:function(e){if(!this.isTouching){var t=Math.floor(1e3*e.target.currentTime),r=this.lyricMillisecond.findIndex((function(e){return e>1.005*t})),i=r>1?r-2:0,s=this.$refs&&this.$refs[this.lyricMillisecond[i]];s&&this.$refs[this.lyricMillisecond[i]][0].scrollIntoView(),this.prevLyricIndex=i}}}},h=p,y=(r("e38b"),r("2877")),g=Object(y["a"])(h,a,o,!1,null,"56ec4ba0",null),f=g.exports,b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"player_progress",on:{touchstart:e.setCurTime}},[t("div",{staticClass:"player_progress__song_cur_time"},[e._v(e._s(e.secondToMin(e.currentTime)))]),t("div",{ref:"progressBar",staticClass:"player_progress__progress_bar",style:e.progressBarStyle},[t("div",{staticClass:"player_progress__progress_bar_pointer",style:"left:".concat(e.currentProgress,"%;")})]),t("div",{staticClass:"player_progress__song_duration"},[e._v(e._s(e.secondToMin(e.audioEl.duration)))])])},m=[];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={name:"PlayerProgress",data:function(){return{secondToMin:u["d"],currentTime:0,loadProgress:0,isTouching:!1,touchStartX:0,progressBarRect:null}},computed:O(O({},Object(c["d"])("player",["song","audioEl"])),{},{currentProgress:function(){return Math.floor(100*this.currentTime/this.audioEl.duration)},progressBarStyle:function(){return"background-image:linear-gradient(to right, #2ca2f9 ".concat(this.currentProgress,"%, transparent ").concat(this.currentProgress,"%),linear-gradient(to right, #6c6b70 ").concat(this.loadProgress,"%, transparent ").concat(this.loadProgress,"%)")}}),mounted:function(){var e=this;this.$nextTick((function(){e.audioEl.addEventListener("progress",e.progressCb),e.audioEl.addEventListener("timeupdate",e.timeUpdateCb)}))},destroyed:function(){this.audioEl.removeEventListener("progress",this.progressCb),this.audioEl.removeEventListener("timeupdate",this.timeUpdateCb)},methods:{progressCb:function(){if(!(this.audioEl.readyState<2)){var e=this.audioEl.buffered.length;this.loadProgress=Math.floor(100*this.audioEl.buffered.end(e-1)/this.audioEl.duration)}},timeUpdateCb:function(e){this.isTouching||(this.currentTime=e.target.currentTime)},setCurTime:function(e){this.isTouching=!0,this.progressBarRect||(this.progressBarRect=this.$refs.progressBar.getBoundingClientRect());var t=e.touches[0].clientX;this.currentTime=this.calcCurTime(t,this.progressBarRect.left,0),this.touchStartX=t,window.addEventListener("touchmove",this.setCurTimeOnMove),window.addEventListener("touchend",this.touchEndCb)},setCurTimeOnMove:function(e){var t=e.touches[0].clientX;this.currentTime=this.calcCurTime(t,this.touchStartX,1),this.touchStartX=t},touchEndCb:function(){this.isTouching=!1,this.audioEl.currentTime=this.currentTime,window.removeEventListener("touchmove",this.setCurTimeOnMove),window.removeEventListener("touchend",this.touchEndCb)},calcCurTime:function(e,t,r){var i,s=e-t,n=s/this.progressBarRect.width;switch(r){case 0:i=this.audioEl.duration*n;break;case 1:i=this.currentTime+this.audioEl.duration*n;break}return i<0?i=0:i>this.audioEl.duration&&(i=this.audioEl.duration),i}}},P=v,j=(r("68f4"),Object(y["a"])(P,b,m,!1,null,"731907e0",null)),w=j.exports,E=r("c61d"),C=r("d6a0"),T=r("143a"),B=r("bf76"),M=r("4360");function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S={name:"PlayerMax",components:{PlayerLyrics:f,PlayerProgress:w,PlayButton:E["a"],NextButton:C["a"],PrevButton:T["a"]},computed:L(L(L(L({},Object(c["d"])("images",["logo__theme"])),Object(c["d"])("player",["audioEl","isPlaying","song","music"])),Object(c["b"])("player",["songName","singerName","singerImg"])),{},{playerBgImg:function(){return"background-image:url(".concat(this.singerImg,"),linear-gradient(to right, rgb(48, 67, 82), rgb(215, 210, 204));")}}),watch:{"music.hash":function(e){this.$router.replace({query:{musicHash:e}})}},beforeRouteEnter:function(e,t,r){var i=e.query.musicHash;if(i)return e.params.fromPlayerMed?r():Object(B["a"])({params:{hash:i}}).then((function(e){var t=e.data;t.filename=t.fileName,M["a"].commit("player/wantPlay",{music:t,musicList:[t]}),r()}))},mounted:function(){this.replaceProperty({paths:"player.isPlayerMedShow",data:!1})},destroyed:function(){this.replaceProperty({paths:"player.isPlayerMedShow",data:!0}),this.replaceProperty({paths:"player.isPlayerMedSmall",data:!1})},methods:L({},Object(c["c"])(["replaceProperty"]))},I=S,k=(r("cbea"),Object(y["a"])(I,i,s,!1,null,"99e94eba",null));t["default"]=k.exports},aed3:function(e,t,r){},cbea:function(e,t,r){"use strict";r("41b6")},e38b:function(e,t,r){"use strict";r("aed3")}}]);
//# sourceMappingURL=PlayerMax.b22b8765.js.map