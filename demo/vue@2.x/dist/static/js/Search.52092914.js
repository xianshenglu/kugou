(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Search"],{"080f":function(e,t,r){},"12fe":function(e,t,r){"use strict";r("4ed9")},"1f34":function(e,t,r){"use strict";var s=function(){var e=this,t=e._self._c;return t("h4",{staticClass:"module_title main_box_shadow",on:{click:function(t){return e.$emit("click",arguments[0])}}},[e._v(e._s(e.title))])},a=[],i={name:"PubModuleTitle",props:{title:{type:String,default:function(){return""}}}},c=i,n=(r("12fe"),r("2877")),o=Object(n["a"])(c,s,a,!1,null,"6a0fba21",null);t["a"]=o.exports},"282f":function(e,t,r){"use strict";r("3270")},3270:function(e,t,r){},"386d":function(e,t,r){"use strict";var s=r("cb7c"),a=r("83a1"),i=r("5f1b");r("214f")("search",1,(function(e,t,r,c){return[function(r){var s=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,s):new RegExp(r)[t](String(s))},function(e){var t=c(r,e,this);if(t.done)return t.value;var n=s(e),o=String(this),u=n.lastIndex;a(u,0)||(n.lastIndex=0);var h=i(n,o);return a(n.lastIndex,u)||(n.lastIndex=u),null===h?-1:h.index}]}))},"4ed9":function(e,t,r){},"5a78":function(e,t,r){"use strict";var s=function(){var e=this,t=e._self._c;return t("ul",{staticClass:"music_list"},e._l(e.musicList,(function(r,s){return t("li",{key:s,staticClass:"music_list__item main_border_bottom"},[t("div",{staticClass:"music_list__info",on:{click:function(t){return e.wantPlay(r)}}},[e._t("index",null,{data:s}),t("div",{staticClass:"music_list__name"},[e._v(e._s(r.filename))])],2),t("button",{staticClass:"music_list__download"},[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-download"}})])])])})),0)},a=[],i={name:"AppMusicList",props:{musicList:{type:Array,default:function(){return[]}}},methods:{wantPlay:function(e){this.$store.commit("player/wantPlay",{music:e,musicList:this.$props.musicList})}}},c=i,n=(r("282f"),r("2877")),o=Object(n["a"])(c,s,a,!1,null,"5b2afdbc",null);t["a"]=o.exports},"793a":function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d");var s=r("ade3"),a=r("2f62");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t["a"]={updated:function(){this.stopLoading()},methods:c(c({},Object(a["c"])(["replaceProperty"])),{},{startLoading:function(){this.replaceProperty({paths:"loading.isShow",data:!0})},stopLoading:function(){this.replaceProperty({paths:"loading.isShow",data:!1})},setLoadingExcludeHeader:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_header"})},setLoadingExcludeNav:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_nav"})},setLoadingExcludeModuleTitle:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_module_title"})},setLoadingExcludeSearchForm:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_search_form"})}})}},"794b":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e._self._c;return t("section",{staticClass:"search"},[t("PubModuleTitle",{staticClass:"search__title",attrs:{title:e.title}}),t("div",{ref:"searchCont",staticClass:"search__cont"},[t("form",{staticClass:"search__form",on:{submit:function(e){e.preventDefault()}}},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.keyword,expression:"keyword",modifiers:{trim:!0}}],staticClass:"search__input",attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.keyword},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSearchRes.apply(null,arguments)},input:function(t){t.target.composing||(e.keyword=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),t("button",{class:e.isSearchResShow?"search__btn search__btn--active":"search__btn",attrs:{type:"button"},on:{click:e.getSearchRes}},[e._v(e._s(e.title))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isSearchRecShow,expression:"isSearchRecShow"}],staticClass:"search__rec"},[t("h6",{staticClass:"search__type"},[e._v(e._s(e.searchType))]),t("ul",{staticClass:"search__list"},e._l(e.searchRecArr,(function(r,s){return t("li",{key:s,staticClass:"search__item main_border_bottom",on:{click:function(t){e.keyword=r.keyword,e.getSearchRes()}}},[e._v(e._s(r.keyword))])})),0)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isSearchResShow,expression:"isSearchResShow"}],staticClass:"search__res"},[t("div",{staticClass:"search__count"},[e._v("共有"+e._s(e.searchRes.info.length)+"条结果")]),t("AppMusicList",{staticClass:"search__res-list",attrs:{"music-list":e.searchRes.info}})],1)])],1)},a=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("a481"),r("386d"),r("ade3")),c=r("1f34"),n=r("5a78"),o=r("072d"),u=r("3959");function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,r=void 0===t?{}:t;return Object(u["a"])(l(l({},o["a"]),{},{params:l({format:"json",plat:0,count:30},r)}))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,r=void 0===t?{}:t;return Object(u["a"])(l(l({},o["b"]),{},{params:l({format:"json",page:1,pagesize:20,showtype:1},r)}))},f=r("8c15"),y=r("793a"),w=r("2f62");function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _={name:"Search",mixins:[y["a"]],components:{PubModuleTitle:c["a"],AppMusicList:n["a"]},data:function(){return{title:"搜索",searchType:"最近热门",placeholder:"歌手/歌名/拼音"}},computed:m(m({},Object(w["d"])("search",["searchRecArr","searchRes","isSearchRecShow","isSearchResShow"])),{},{keyword:{get:function(){return this.$store.state.search.keyword},set:function(e){this.replaceProperty({paths:"search.keyword",data:e})}},isSearchRecShow:{get:function(){return this.$store.state.search.isSearchRecShow},set:function(e){this.replaceProperty({paths:"search.isSearchRecShow",data:e})}},isSearchResShow:{get:function(){return this.$store.state.search.isSearchResShow},set:function(e){this.replaceProperty({paths:"search.isSearchResShow",data:e})}}}),created:function(){this.init()},mounted:function(){f["a"].$on("searchBtnClicked",this.scrollTopSearchCont),this.initQqBugDetect()},destroyed:function(){f["a"].$off("searchBtnClicked",this.scrollTopSearchCont)},methods:m(m({},Object(w["c"])(["replaceProperty"])),{},{init:function(){var e=this.$route.query.keyword,t="string"===typeof this.keyword&&""!==this.keyword,r="string"===typeof e&&""!==e;r&&e!==this.keyword?(this.keyword=e,this.getSearchRes()):t?(this.isSearchRecShow=!1,this.isSearchResShow=!0):this.getSearchRec()},getSearchRec:function(){var e=this;if(0!==this.searchRecArr.length)return this.isSearchResShow=!1,void(this.isSearchRecShow=!0);this.setLoadingExcludeSearchForm(),this.startLoading(),d().then((function(t){var r=t.data;e.replaceProperty({paths:"search.searchRecArr",data:r.data.info}),e.stopLoading(),e.isSearchResShow=!1,e.isSearchRecShow=!0})).catch((function(e){alert(e)}))},getSearchRes:function(){var e=this;""!==this.keyword&&(this.$router.replace({query:{keyword:this.keyword}}),this.setLoadingExcludeSearchForm(),this.startLoading(),p({params:{keyword:this.keyword}}).then((function(t){var r=t.data.data;e.replaceProperty({paths:"search.searchRes",data:r}),e.isSearchRecShow=!1,e.isSearchResShow=!0,e.stopLoading()})))},initQqBugDetect:function(){var e=document.getElementsByClassName("search__cont")[0];window.search__cont=e;
//! bug with qq browser
var t=function(){e.scrollTop};window.addEventListener("touchstart",t),window.addEventListener("touchmove",t)},scrollTopSearchCont:function(){this.$refs.searchCont&&(this.$refs.searchCont.scrollTop=0)}})},v=_,g=(r("e3b6"),r("2877")),S=Object(g["a"])(v,s,a,!1,null,"6142df7d",null);t["default"]=S.exports},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},e3b6:function(e,t,r){"use strict";r("080f")}}]);
//# sourceMappingURL=Search.52092914.js.map