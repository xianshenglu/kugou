!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,t)}return a}function a(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach(function(r){o(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function t(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var t,n,o,l,c=[],i=!0,u=!1;try{if(o=(a=a.call(e)).next,0===r){if(Object(a)!==a)return;i=!1}else for(;!(i=(t=o.call(a)).done)&&(c.push(t.value),c.length!==r);i=!0);}catch(e){u=!0,n=e}finally{try{if(!i&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return c}}(e,r)||function(e,r){if(e){if("string"==typeof e)return n(e,r);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,t=Array(r);a<r;a++)t[a]=e[a];return t}function o(r,a,t){return(a=function(r){var a=function(r,a){if("object"!=e(r)||!r)return r;var t=r[Symbol.toPrimitive];if(void 0!==t){var n=t.call(r,a||"default");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(r)}(r,"string");return"symbol"==e(a)?a:a+""}(a))in r?Object.defineProperty(r,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[a]=t,r}System.register(["./index-legacy-8vnvJWs-.js","./useNextPrevSong-legacy-huWHyE8g.js","./index-legacy-F0Rv2bWz.js","./utils-legacy--UzZy3sl.js"],function(e,r){"use strict";var n,l,c,i,u,s,_,v,d,y,f,g,m,P;return{setters:[function(e){n=e.a,l=e.j,c=e.f,i=e.H,u=e.u,s=e.G,_=e.b,v=e.E},function(e){d=e.P,y=e.a,f=e.N,g=e.u},function(e){m=e.u},function(e){P=e.s}],execute:function(){var r=document.createElement("style");r.textContent=".PlayerMax-module__PlayerMax__GI7rp{position:relative}.PlayerMax-module__PlayerMax__mask__z7UWn{position:absolute;left:0;top:0;filter:blur(calc(var(--vw, 1vw) * 4));width:100%;height:100%;display:block;background-repeat:no-repeat,no-repeat;background-size:auto 100%,auto 100%;background-position:center,center;z-index:-1}.PlayerMax-module__PlayerMax__container__rWV1E{display:flex;flex-flow:column;align-items:center;height:100%;background-color:rgba(0,0,0,.6);width:100%;box-sizing:border-box;overflow:hidden}.PlayerMax-module__PlayerMax__songName__2BJPh{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 54 / 609);line-height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 54 / 609);width:calc(100% - calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 120 / 609));box-sizing:border-box;margin:0 calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 120 / 609);overflow-x:auto;overflow-y:hidden;white-space:nowrap;color:#fff;text-align:center;font-size:inherit}.PlayerMax-module__PlayerMax__singerImg__hQVu5{margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 26 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 193 / 609);width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 193 / 609);flex:0 0 auto;border-radius:50%;animation:PlayerMax-module__rotate__D-oM2 20s linear infinite reverse;animation-play-state:paused}.PlayerMax-module__PlayerMax__singerImg--active__MB9YE{animation-play-state:running}.PlayerMax-module__PlayerMax__progress__E2aeC{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 48 / 609);width:100%;box-sizing:border-box}.PlayerMax-module__PlayerMax__buttonContainer__yhOqM{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);display:flex;align-items:center;justify-content:center}.PlayerMax-module__PlayerMax__prevBtn__RQgKy,.PlayerMax-module__PlayerMax__nextBtn__gvZBb,.PlayerMax-module__PlayerMax__playBtn__-S0Ok{border-radius:50%;border:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 2 / 609) solid #fff;margin:0 calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609)}.PlayerMax-module__PlayerMax__prevBtn__RQgKy,.PlayerMax-module__PlayerMax__nextBtn__gvZBb{width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 42 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 42 / 609);font-size:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609)}.PlayerMax-module__PlayerMax__prevBtn__RQgKy .PlayerMax-module__icon__mc5zy{transform:translate(0)}.PlayerMax-module__PlayerMax__nextBtn__gvZBb .PlayerMax-module__icon__mc5zy{transform:translate(1px)}.PlayerMax-module__PlayerMax__playBtn__-S0Ok{width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);font-size:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 20 / 609)}.PlayerMax-module__PlayerMax__download__CpeMA{margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 19 / 609) auto 0;height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 45 / 609);width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 211 / 609)}.PlayerLyric-module__PlayerLyric__Vjiyd{color:#ccc;overflow:scroll;font-size:calc(var(--vw, 1vw) * 4);margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 68 / 609);line-height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 34 / 609);width:102%;box-sizing:border-box;padding:0 calc(var(--vw, 1vw) * 16)}.PlayerLyric-module__PlayerLyric__Vjiyd{text-align:center}.PlayerLyric-module__PlayerLyric_text__WcJar{line-height:inherit}.PlayerLyric-module__PlayerLyric_text--active__kWXfo{color:#d1c90e}.PlayerProgress-module__PlayerProgress__6-jfg{font-size:calc(var(--vw, 1vw) * 3.2);padding:calc(var(--vw, 1vw) * 4.26667) calc(var(--vw, 1vw) * 3.46667);display:flex;justify-content:space-between;align-items:center;color:#e5e5e5;height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 48 / 609);width:100%;box-sizing:border-box}.PlayerProgress-module__PlayerProgress__songCurTime__t6PNA,.PlayerProgress-module__PlayerProgress__songDuration__6puld{flex:0 0 auto}.PlayerProgress-module__PlayerProgress__progressBar__lvqkw{flex:1 0 auto;height:calc(var(--vw, 1vw) * 1.06667);margin:0 calc(var(--vw, 1vw) * 2.66667);background-color:#232228;position:relative}.PlayerProgress-module__PlayerProgress__progressBarPointer__59B8e{position:absolute;left:0;top:50%;transform:translate(-50%,-50%);background:#2ca2f9;height:calc(var(--vw, 1vw) * 3.46667);width:calc(var(--vw, 1vw) * 3.46667);border-radius:50%}\n/*$vite$:1*/",document.head.appendChild(r);var h="PlayerMax-module__PlayerMax__mask__z7UWn",x="PlayerMax-module__PlayerMax__container__rWV1E",w="PlayerMax-module__PlayerMax__songName__2BJPh",p="PlayerMax-module__PlayerMax__singerImg__hQVu5",b="PlayerMax-module__PlayerMax__singerImg--active__MB9YE",M="PlayerMax-module__PlayerMax__buttonContainer__yhOqM",j="PlayerMax-module__PlayerMax__prevBtn__RQgKy",S="PlayerMax-module__PlayerMax__nextBtn__gvZBb",N="PlayerMax-module__PlayerMax__playBtn__-S0Ok",B="PlayerMax-module__PlayerMax__download__CpeMA",E="PlayerLyric-module__PlayerLyric__Vjiyd",L="PlayerLyric-module__PlayerLyric_text__WcJar",O="PlayerLyric-module__PlayerLyric_text--active__kWXfo",I=function(e){var r=e.lyrics,a=e.prevLyricIndex,t=e.toggleIsTouching,i=n.useRef([]);return n.useEffect(function(){var e;null===(e=i.current[a])||void 0===e||e.scrollIntoView()},[a]),l.jsx("div",{className:E,onTouchStart:function(){return t(!0)},onTouchEnd:function(){return t(!1)},children:r.map(function(e,r){return l.jsx("p",{ref:function(e){return function(e,r){return i.current[e]=r,function(){i.current.splice(e,1)}}(r,e)},className:c(L,o({},O,r===a+1)),children:e.text},r)})})},k=i([function(e){return e}],function(e){var r=e.split(/\n/);return r.pop(),r.map(function(e){var r=e.replace("[","").split("]"),a=r[0],t=a.split(":")[0],n=a.split(":")[1].split(".")[0],o=a.split(":")[1].split(".")[1];return{millisecond:60*Number(t)*1e3+1e3*Number(n)+Number(o),text:r[1].trim().replace(/(男[:：]\s*)|(女[:：]\s*)/,"")}})}),R=function(){var e=t(n.useState(0),2),r=e[0],o=e[1],c=t(n.useState(!1),2),i=c[0],_=c[1],v=u(),d=v.songInfo.lyric,y=v.audioElRef,f=s(function(e){_(e)}),g=s(function(e){if(!i){var r=k(d).map(function(e){return e.millisecond}),a=Math.floor(1e3*e.target.currentTime),t=r.findIndex(function(e){return e>1.005*a});o(t>1?t-2:0)}});n.useEffect(function(){var e=y.current;if(e)return e.addEventListener("timeupdate",g),function(){e.removeEventListener("timeupdate",g)}},[y]);var m={lyrics:k(d),prevLyricIndex:r,toggleIsTouching:f};return l.jsx(I,a({},m))},T="PlayerProgress-module__PlayerProgress__6-jfg",z="PlayerProgress-module__PlayerProgress__songCurTime__t6PNA",C="PlayerProgress-module__PlayerProgress__songDuration__6puld",A="PlayerProgress-module__PlayerProgress__progressBar__lvqkw",V="PlayerProgress-module__PlayerProgress__progressBarPointer__59B8e",W=function(e){var r=e.audioElRef.current,a=e.progressBarRef,t=e.currentTime,n=e.currentProgress,o=e.loadProgress,c=e.onTouchStart,i=null===r?{duration:0}:r,u={backgroundImage:"linear-gradient(to right, #2ca2f9 ".concat(n,"%, transparent ").concat(n,"%),linear-gradient(to right, #6c6b70 ").concat(o,"%, transparent ").concat(o,"%)"),color:"red"};return l.jsxs("div",{className:T,onTouchStart:c,children:[l.jsx("div",{className:z,children:P(t)}),l.jsx("div",{className:A,ref:a,style:u,children:l.jsx("div",{className:V,style:{left:n+"%"}})}),l.jsx("div",{className:C,children:P(i.duration)})]})},D=function(){var e=u().audioElRef,r=t(n.useState(0),2),o=r[0],c=r[1],i=t(n.useState(0),2),_=i[0],v=i[1],d=t(n.useState(0),2),y=d[0],f=d[1],g=t(n.useState(!1),2),P=g[0],h=g[1],x=n.useRef(null),w=n.useRef(null),p=n.useRef(0),b=s(function(r,a,t){var n,l=(r-a)/w.current.width,c=e.current;switch(t){case 0:n=c.duration*l;break;case 1:n=o+c.duration*l}return n<0?n=0:n>c.duration&&(n=c.duration),n}),M=s(function(){var r=e.current;if(!(r.readyState<2)){var a=r.buffered.length,t=Math.floor(100*r.buffered.end(a-1)/r.duration);v(t)}}),j=s(function(r){if(!P){var a=e.current,t=r.target.currentTime,n=Math.floor(100*t/a.duration);c(t),f(n)}}),S=s(function(r){var a=r.touches[0].clientX,t=b(a,p.current,1),n=e.current,o=Math.floor(100*t/n.duration);c(t),f(o),p.current=a}),N=s(function(){var r=e.current;h(!1),Number.isNaN(o)||(r.currentTime=o),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",N)}),B=s(function(r){h(!0),w.current||(w.current=x.current.getBoundingClientRect());var a=r.touches[0].clientX,t=b(a,w.current.left,0),n=e.current,o=Math.floor(100*t/n.duration);c(t),f(o),p.current=a,window.addEventListener("touchmove",S),window.addEventListener("touchend",N)});m("progress",M,{target:function(){return e.current}}),m("timeupdate",j,{target:function(){return e.current}});var E={audioElRef:e,currentTime:o,loadProgress:_,currentProgress:y,isTouching:P,onTouchStart:B,progressBarRef:x};return l.jsx(W,a({},E))},Q=function(e){var r=e.songInfo,a=r.song_name,t=r.author_name,i=r.img,s=e.musicStatus,_=s.isPlaying,v=s.isLoading,g=e.prevSong,m=e.nextSong,P=u().togglePlay;return l.jsxs(n.Fragment,{children:[l.jsx("div",{className:h,style:{backgroundImage:"url(".concat(i,"),linear-gradient(to right, rgb(48, 67, 82), rgb(215, 210, 204))")}}),l.jsxs("div",{className:x,children:[l.jsx("h6",{className:w,children:a}),l.jsx("img",{src:i,className:c(p,o({},b,_)),alt:t}),l.jsx(R,{}),l.jsx(D,{}),l.jsxs("div",{className:M,children:[l.jsx(d,{className:j,prev:g}),l.jsx(y,{className:N,isLoading:v,isPlaying:_,togglePlay:P}),l.jsx(f,{className:S,next:m})]}),l.jsx("button",{className:B})]})]})};e("default",function(){var e=_(),r=v(),t=u(),o=t.musicStatus,c=t.songInfo,i=t.audioElRef,s=t.songIndex,d=t.songList,y=t.fetchMusicIfNeeded;n.useEffect(function(){if(""===c.play_url){var r=new URLSearchParams(e.search).get("musicHash");r&&y(r,0,[{hash:r}])}},[e.search,c,y]);var f={musicStatus:o,songInfo:c,audioElRef:i,songIndex:s,songList:d,location:e,navigate:r},m=g(d,s),P=m.nextSong,h=m.prevSong;return l.jsx(Q,a(a({},f),{},{nextSong:P,prevSong:h}))})}}})}();
