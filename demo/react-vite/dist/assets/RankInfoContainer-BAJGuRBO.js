import{j as a,a as m,A as f,f as d,c as I,d as R,e as k,g as p,L as l}from"./index-DxUPXwwm.js";import{I as q}from"./InfoHeader-VvCIb_hF.js";import{f as S}from"./utils-C5cHsdda.js";import{a as g}from"./mapper-Dbp8-Z5E.js";import"./mapper-npPNkTNf.js";const x="RankInfo-module__RankInfo__updatedTime__VJt-M",j="RankInfo-module__RankInfo__musicSequence__9SJ4n",t={RankInfo__updatedTime:x,RankInfo__musicSequence:j,"RankInfo__musicSequence--1":"RankInfo-module__RankInfo__musicSequence--1__oAgKB","RankInfo__musicSequence--2":"RankInfo-module__RankInfo__musicSequence--2__DPtHg","RankInfo__musicSequence--3":"RankInfo-module__RankInfo__musicSequence--3__G4ZBG"},y=({songsData:n,listInfo:e})=>{const s=r=>()=>a.jsx("time",{className:t.RankInfo__updatedTime,children:"上次更新时间: "+r}),o=r=>{const i=r+1;return a.jsx("div",{className:d(t.RankInfo__musicSequence,t["RankInfo__musicSequence--"+i]),children:i})},{rankname:c,imgUrl:u}=e,_={name:c,imgurl:u,renderUpdatedTime:s(S(n.timestamp*1e3))};return a.jsxs(m.Fragment,{children:[a.jsx(q,{..._}),a.jsx(f,{data:n.list,renderMusicSequence:o})]})},T=async n=>await R.get(k.rankInfo+n),h=I.injectEndpoints({endpoints:n=>({getRankInfo:n.query({queryFn:async e=>{try{const{data:s}=await T(e);return{data:g(s)}}catch(s){return{error:{status:"FETCH_ERROR",error:String(s)}}}}})})}),{useGetRankInfoQuery:E}=h,G=()=>{const{id:n}=p(),{data:e,isLoading:s,error:o}=E(n);return s?a.jsx(l,{}):o?a.jsx("div",{children:"Error loading rank info"}):e?a.jsx(y,{songsData:e.songs,listInfo:e.info}):null};export{G as default};
