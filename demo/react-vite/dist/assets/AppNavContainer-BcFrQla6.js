import{j as r,N as C,R as T,u as R,a as X,b as Y,c as v,n as P,d as z,e as F,f as $,g as D}from"./index-Kc9eG8mG.js";import{u as H}from"./index-By0IlUB0.js";const W="AppNav-module__AppNav__8HGt4",G="AppNav-module__AppNav__box__53FlH",q="AppNav-module__AppNav__link__T7-Nt",J="AppNav-module__AppNav__underline__8fAwa",c={AppNav:W,AppNav__box:G,AppNav__link:q,AppNav__underline:J},K=({navList:t,activeIndex:e})=>r.jsxs("section",{className:c.AppNav,children:[r.jsx("nav",{className:c.AppNav__box,children:t.map((n,s)=>r.jsx(C,{to:n.path,className:({isActive:o,isPending:i})=>c.AppNav__link,"test-id":`nav-link${n.name}`,children:n.text},n.path))}),r.jsx("div",{className:c.AppNav__underline,style:{transform:`translateX(${e*100}%)`}})]}),w=t=>Symbol.iterator in t,b=t=>"entries"in t,g=(t,e)=>{const n=t instanceof Map?t:new Map(t.entries()),s=e instanceof Map?e:new Map(e.entries());if(n.size!==s.size)return!1;for(const[o,i]of n)if(!s.has(o)||!Object.is(i,s.get(o)))return!1;return!0},Q=(t,e)=>{const n=t[Symbol.iterator](),s=e[Symbol.iterator]();let o=n.next(),i=s.next();for(;!o.done&&!i.done;){if(!Object.is(o.value,i.value))return!1;o=n.next(),i=s.next()}return!!o.done&&!!i.done};function U(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e)?!1:w(t)&&w(e)?b(t)&&b(e)?g(t,e):Q(t,e):g({entries:()=>Object.entries(t)},{entries:()=>Object.entries(e)})}function V(t){const e=T.useRef(void 0);return n=>{const s=t(n);return U(e.current,s)?e.current:e.current=s}}const l=[{text:"新歌",name:"new",path:P},{text:"排行",name:"rank",path:z},{text:"歌单",name:"song",path:F},{text:"歌手",name:"singer",path:$}],nt=()=>{const t=R(),e=X(),{activeIndex:n,isShow:s,setActiveNavIndex:o,switchNav:i}=Y(V(a=>({activeIndex:a.activeIndex,isShow:a.isShow,setActiveNavIndex:a.setActiveNavIndex,switchNav:a.switchNav}))),A=v(({pathname:a})=>{const p=l.findIndex(d=>d.path===a);p>=0?(i(!0),o(p)):i(!1)}),j=v(a=>{const d=Date.now(),I=window.innerWidth*.1,S=window.innerWidth*.4,u=a.touches[0].clientX,O=a.touches[0].clientY,_=h=>{window.removeEventListener("touchend",_,!0);const x=h.changedTouches[0].clientX,y=h.changedTouches[0].clientY,f=Math.abs(x-u);if(Math.abs(y-O)>f)return;const E=x-u<0,N=Date.now()-d>300,k=N&&f>S,L=!N&&f>I;if(s&&(k||L)){const M=E?n+1:n-1,m=l[M];m!==void 0&&e(m.path)}};window.addEventListener("touchend",_,!0)});return D.useEffect(()=>{A(t)},[t]),H("touchstart",j,{target:window}),s?r.jsx(K,{activeIndex:n,navList:l}):null};export{nt as default};
