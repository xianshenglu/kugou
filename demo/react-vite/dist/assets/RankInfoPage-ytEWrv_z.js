import{j as a,d as m,A as f,g as d,h as k,i as I,k as R,m as p,L as l}from"./index-DIJC4VMc.js";import{I as q}from"./InfoHeader-CRODe7IP.js";import{f as g}from"./utils-B_dGR-9Z.js";import{a as x}from"./mapper-Dbp8-Z5E.js";import"./mapper-npPNkTNf.js";const S="RankInfo-module__RankInfo__updatedTime__3vWaG",j="RankInfo-module__RankInfo__musicSequence__PpI-h",t={RankInfo__updatedTime:S,RankInfo__musicSequence:j,"RankInfo__musicSequence--1":"RankInfo-module__RankInfo__musicSequence--1__U7dnN","RankInfo__musicSequence--2":"RankInfo-module__RankInfo__musicSequence--2__Zf5Dx","RankInfo__musicSequence--3":"RankInfo-module__RankInfo__musicSequence--3__nie-o"},h=({songsData:e,listInfo:n})=>{const s=r=>()=>a.jsx("time",{className:t.RankInfo__updatedTime,children:"上次更新时间: "+r}),o=r=>{const i=r+1;return a.jsx("div",{className:d(t.RankInfo__musicSequence,t["RankInfo__musicSequence--"+i]),children:i})},{rankname:c,imgUrl:u}=n,_={name:c,imgurl:u,renderUpdatedTime:s(g(e.timestamp*1e3))};return a.jsxs(m.Fragment,{children:[a.jsx(q,{..._}),a.jsx(f,{data:e.list,renderMusicSequence:o,"test-id":"page-rank-info"})]})};async function y(e){const n=await k.get(I.rankInfo+e);return x(n.data)}const T=R.injectEndpoints({endpoints:e=>({getRankInfo:e.query({queryFn:async n=>{try{return{data:await y(n)}}catch(s){return{error:{status:"FETCH_ERROR",error:String(s)}}}}})})}),{useGetRankInfoQuery:E}=T,v=()=>{const{id:e}=p(),{data:n,isLoading:s,error:o}=E(e);return s?a.jsx(l,{}):o?a.jsx("div",{children:"Error loading rank info"}):n?a.jsx(h,{songsData:n.songs,listInfo:n.info}):null};export{v as default};
