import{j as a,g as m,A as f,o as d,i as k,k as R,m as I,q as p,L as l}from"./index-Kc9eG8mG.js";import{I as q}from"./InfoHeader-eHJ4ADPK.js";import{f as x}from"./utils-B_dGR-9Z.js";import{a as S}from"./mapper-Dbp8-Z5E.js";import"./mapper-npPNkTNf.js";const g="RankInfo-module__RankInfo__updatedTime__p65J2",j="RankInfo-module__RankInfo__musicSequence__kSCBn",t={RankInfo__updatedTime:g,RankInfo__musicSequence:j,"RankInfo__musicSequence--1":"RankInfo-module__RankInfo__musicSequence--1__4607Z","RankInfo__musicSequence--2":"RankInfo-module__RankInfo__musicSequence--2__ptDcE","RankInfo__musicSequence--3":"RankInfo-module__RankInfo__musicSequence--3__FiRxz"},y=({songsData:n,listInfo:e})=>{const s=r=>()=>a.jsx("time",{className:t.RankInfo__updatedTime,children:"上次更新时间: "+r}),o=r=>{const i=r+1;return a.jsx("div",{className:d(t.RankInfo__musicSequence,t["RankInfo__musicSequence--"+i]),children:i})},{rankname:c,imgUrl:u}=e,_={name:c,imgurl:u,renderUpdatedTime:s(x(n.timestamp*1e3))};return a.jsxs(m.Fragment,{children:[a.jsx(q,{..._}),a.jsx(f,{data:n.list,renderMusicSequence:o,"test-id":"page-rank-info"})]})},E=async n=>await R.get(I.rankInfo+n),T=k.injectEndpoints({endpoints:n=>({getRankInfo:n.query({queryFn:async e=>{try{const{data:s}=await E(e);return{data:S(s)}}catch(s){return{error:{status:"FETCH_ERROR",error:String(s)}}}}})})}),{useGetRankInfoQuery:h}=T,H=()=>{const{id:n}=p(),{data:e,isLoading:s,error:o}=h(n);return s?a.jsx(l,{}):o?a.jsx("div",{children:"Error loading rank info"}):e?a.jsx(y,{songsData:e.songs,listInfo:e.info}):null};export{H as default};
