System.register(["./index-legacy-Cf2vn09c.js","./useQuery-legacy-WxQPDOW-.js","./utils-legacy-qDOP3u-a.js"],function(e,a){"use strict";var r,c,t,o,l,d,_,n,s,i,h,w,u,v;return{setters:[e=>{r=e.g,c=e.h,t=e.P,o=e.S,l=e.j,d=e.a,_=e.f,n=e.A,s=e.e,i=e.b,h=e.k,w=e.u},e=>{u=e.u},e=>{v=e.i}],execute:function(){var a=document.createElement("style");a.textContent=".Search-module__Search__container__x517w{overflow:scroll;box-sizing:border-box;height:calc(100% - calc(var(--vw, 1vw) * 14.4))}.Search-module__Search__form__16NmP{box-sizing:border-box;height:calc(var(--vw, 1vw) * 16.8);padding:calc(var(--vw, 1vw) * 3.46667);background-color:#fbfbfb;display:flex;align-items:center}.Search-module__Search__keyword__I1M4w,.Search-module__Search__btn__grEzC{box-sizing:border-box;height:100%;border-radius:calc(var(--vw, 1vw) * 1.33333)}.Search-module__Search__keyword__I1M4w{width:calc(var(--vw, 1vw) * 73.86667);margin-right:calc(var(--vw, 1vw) * 2.66667);padding:calc(var(--vw, 1vw) * 1.86667) calc(var(--vw, 1vw) * 4) calc(var(--vw, 1vw) * 1.86667) calc(var(--vw, 1vw) * 4);border:1px solid #e5e5e5;background-color:#fff;flex:1 1 0;min-width:0}.Search-module__Search__btn__grEzC{width:auto;padding:0 calc(var(--vw, 1vw) * 2.66667);flex:0 0 auto;color:#959595;background-color:#e5e5e5}.Search-module__Search__btn--active__Pc7A7{color:#fff;background:#2ca2f9}.Search-module__Search__type__gggH4{height:calc(var(--vw, 1vw) * 13.6);padding-left:calc(var(--vw, 1vw) * 4.26667);color:#2ca2f9;border-bottom:1px solid #ccc;font-size:calc(var(--vw, 1vw) * 4.26667);line-height:calc(var(--vw, 1vw) * 13.6)}.Search-module__Search__item__jjkRl{height:calc(var(--vw, 1vw) * 17.06667);margin-left:calc(var(--vw, 1vw) * 4.26667);font-size:calc(var(--vw, 1vw) * 5.33333);line-height:calc(var(--vw, 1vw) * 17.06667)}.Search-module__Search__count__F8r9w{box-sizing:border-box;width:100%;padding-left:calc(var(--vw, 1vw) * 4.26667);color:#959595;background-color:#e5e5e5;font-size:calc(var(--vw, 1vw) * 3.73333);line-height:calc(var(--vw, 1vw) * 7.46667)}.Search-module__Search__resultList__fmd8J{overflow-y:scroll}\n/*$vite$:1*/",document.head.appendChild(a);const S=({enabled:e=!0}={})=>u({queryKey:["hotSearch"],queryFn:async()=>({list:await async function(){return(await r.get(c.hotSearch)).data.data.info}(),status:o}),enabled:e,initialData:{list:[],status:t}}),m=({keyword:e="",enabled:a=!0}={})=>u({queryKey:["keywordSearch",e],queryFn:async()=>{const a=await async function(e){const a=await r.get(`${c.keywordSearch}${e}`);return{list:a.data.data.info,total:a.data.data.total}}(e);return{...a,status:o}},enabled:a&&!!e,initialData:{list:[],total:0,status:t}}),g="Search-module__Search__container__x517w",y="Search-module__Search__form__16NmP",f="Search-module__Search__keyword__I1M4w",b="Search-module__Search__btn__grEzC",x="Search-module__Search__btn--active__Pc7A7",k="Search-module__Search__type__gggH4",p="Search-module__Search__item__jjkRl",j="Search-module__Search__count__F8r9w",N="Search-module__Search__resultList__fmd8J",z=({isKeywordSearchShow:e,isHotSearchShow:a,keyword:r,updateKeyword:c,searchKeyword:t,hotSearch:{list:o},keywordSearch:{list:s,total:i}})=>l.jsxs(d.Fragment,{children:[l.jsx("h4",{className:"main_box_shadow module_title",children:"Search"}),l.jsxs("div",{className:g,children:[l.jsxs("form",{className:y,onSubmit:e=>e.preventDefault(),children:[l.jsx("input",{type:"text",placeholder:"Singer/Song Name",className:f,value:r,onChange:e=>c(e.target.value),onKeyUp:e=>v(e)?t():void 0}),l.jsx("button",{className:_(b,{[x]:e}),type:"button",onClick:t,children:"Search"})]}),l.jsxs("div",{className:_({hidden:!a}),children:[l.jsx("h6",{className:k,children:"Recently Popular"}),l.jsx("ul",{children:o.map(e=>l.jsx("li",{className:_(p,"main_border_bottom"),onClick:a=>c(e.keyword,t),children:e.keyword},e.keyword))})]}),l.jsxs("div",{className:_({hidden:!e}),children:[l.jsxs("div",{className:j,children:["Total ",i," results"]}),l.jsx(n,{data:s,className:N})]})]})]});e("default",()=>{const e=s(),a=i(),[r]=h(),[c,t]=d.useState(!1),[o,_]=d.useState(!1),[n,u]=d.useState(""),v=d.useRef(null),{data:g,refetch:y}=S({enabled:!1}),{data:f,refetch:b}=m({keyword:r.get("keyword")||"",enabled:!1}),x=w(({search:e})=>{const a=new URLSearchParams(e).get("keyword");null===a||""===a?(y(),_(!0),t(!1),u("")):(b(),_(!1),t(!0),u(a))}),k=w((e,a=()=>{})=>{u(e),v.current=a}),p=w(()=>{const{search:r,pathname:c}=e;if(""===n)return void a(c);const t=new URLSearchParams(r),o=null!==t.get("keyword");t.set("keyword",n),o?a(c+"?"+t.toString(),{replace:!0}):a(c+"?"+t.toString())});d.useEffect(()=>{x(e)},[e,x]),d.useEffect(()=>{v.current&&(v.current(),v.current=null)},[n]);const j={isKeywordSearchShow:c,isHotSearchShow:o,keyword:n,searchKeyword:p,updateKeyword:k,hotSearch:g,keywordSearch:f};return l.jsx(z,{...j})})}}});
