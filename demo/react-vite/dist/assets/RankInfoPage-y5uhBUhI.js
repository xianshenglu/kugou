import{j as e,d as m,A as f,f as d,g as I,h as k,i as R,L as p}from"./index-Tgyk5spB.js";import{I as l}from"./InfoHeader-BcpvapPJ.js";import{f as q}from"./utils-B_dGR-9Z.js";import{u as x}from"./useQuery-BgpO1x0I.js";import{a as g}from"./mapper-Dbp8-Z5E.js";import"./mapper-npPNkTNf.js";const S="RankInfo-module__RankInfo__updatedTime__3vWaG",j="RankInfo-module__RankInfo__musicSequence__PpI-h",t={RankInfo__updatedTime:S,RankInfo__musicSequence:j,"RankInfo__musicSequence--1":"RankInfo-module__RankInfo__musicSequence--1__U7dnN","RankInfo__musicSequence--2":"RankInfo-module__RankInfo__musicSequence--2__Zf5Dx","RankInfo__musicSequence--3":"RankInfo-module__RankInfo__musicSequence--3__nie-o"},y=({songsData:n,listInfo:a})=>{const s=r=>()=>e.jsx("time",{className:t.RankInfo__updatedTime,children:"上次更新时间: "+r}),o=r=>{const i=r+1;return e.jsx("div",{className:d(t.RankInfo__musicSequence,t["RankInfo__musicSequence--"+i]),children:i})},{rankname:u,imgUrl:c}=a,_={name:u,imgurl:c,renderUpdatedTime:s(q(n.timestamp*1e3))};return e.jsxs(m.Fragment,{children:[e.jsx(l,{..._}),e.jsx(f,{data:n.list,renderMusicSequence:o,"test-id":"page-rank-info"})]})};async function h(n){const a=await I.get(k.rankInfo+n);return g(a.data)}const T=n=>x({queryKey:["rankInfo",n],queryFn:()=>h(n)}),A=()=>{const{id:n}=R(),{data:a,isLoading:s,error:o}=T(n);return s?e.jsx(p,{}):o?e.jsx("div",{children:"Error loading rank info"}):a?e.jsx(y,{songsData:a.songs,listInfo:a.info}):null};export{A as default};
