System.register(["./index-legacy-BJr2JYty.js","./utils-legacy-qDOP3u-a.js"],function(e,a){"use strict";var r,c,t,o,l,d,_,n,s,i,h,w,u,v;return{setters:[e=>{r=e.e,c=e.f,t=e.g,o=e.P,l=e.S,d=e.j,_=e.r,n=e.c,s=e.A,i=e.a,h=e.d,w=e.i,u=e.b},e=>{v=e.i}],execute:function(){var a=document.createElement("style");a.textContent=".Search-module__Search__container__x517w{overflow:scroll;box-sizing:border-box;height:calc(100% - calc(var(--vw, 1vw) * 14.4))}.Search-module__Search__form__16NmP{box-sizing:border-box;height:calc(var(--vw, 1vw) * 16.8);padding:calc(var(--vw, 1vw) * 3.46667);background-color:#fbfbfb;display:flex;align-items:center}.Search-module__Search__keyword__I1M4w,.Search-module__Search__btn__grEzC{box-sizing:border-box;height:100%;border-radius:calc(var(--vw, 1vw) * 1.33333)}.Search-module__Search__keyword__I1M4w{width:calc(var(--vw, 1vw) * 73.86667);margin-right:calc(var(--vw, 1vw) * 2.66667);padding:calc(var(--vw, 1vw) * 1.86667) calc(var(--vw, 1vw) * 4) calc(var(--vw, 1vw) * 1.86667) calc(var(--vw, 1vw) * 4);border:1px solid #e5e5e5;background-color:#fff;flex:1 1 0;min-width:0}.Search-module__Search__btn__grEzC{width:auto;padding:0 calc(var(--vw, 1vw) * 2.66667);flex:0 0 auto;color:#959595;background-color:#e5e5e5}.Search-module__Search__btn--active__Pc7A7{color:#fff;background:#2ca2f9}.Search-module__Search__type__gggH4{height:calc(var(--vw, 1vw) * 13.6);padding-left:calc(var(--vw, 1vw) * 4.26667);color:#2ca2f9;border-bottom:1px solid #ccc;font-size:calc(var(--vw, 1vw) * 4.26667);line-height:calc(var(--vw, 1vw) * 13.6)}.Search-module__Search__item__jjkRl{height:calc(var(--vw, 1vw) * 17.06667);margin-left:calc(var(--vw, 1vw) * 4.26667);font-size:calc(var(--vw, 1vw) * 5.33333);line-height:calc(var(--vw, 1vw) * 17.06667)}.Search-module__Search__count__F8r9w{box-sizing:border-box;width:100%;padding-left:calc(var(--vw, 1vw) * 4.26667);color:#959595;background-color:#e5e5e5;font-size:calc(var(--vw, 1vw) * 3.73333);line-height:calc(var(--vw, 1vw) * 7.46667)}.Search-module__Search__resultList__fmd8J{overflow-y:scroll}\n/*$vite$:1*/",document.head.appendChild(a);const S=({enabled:e=!0}={})=>t({queryKey:["hotSearch"],queryFn:async()=>({list:await async function(){return(await r.get(c.hotSearch)).data.data.info}(),status:l}),enabled:e,initialData:{list:[],status:o}}),m=({keyword:e="",enabled:a=!0}={})=>t({queryKey:["keywordSearch",e],queryFn:async()=>{const a=await async function(e){const a=await r.get(`${c.keywordSearch}${e}`);return{list:a.data.data.info,total:a.data.data.total}}(e);return{...a,status:l}},enabled:a&&!!e,initialData:{list:[],total:0,status:o}}),g="Search-module__Search__container__x517w",y="Search-module__Search__form__16NmP",f="Search-module__Search__keyword__I1M4w",b="Search-module__Search__btn__grEzC",x="Search-module__Search__btn--active__Pc7A7",k="Search-module__Search__type__gggH4",p="Search-module__Search__item__jjkRl",j="Search-module__Search__count__F8r9w",N="Search-module__Search__resultList__fmd8J",z=({isKeywordSearchShow:e,isHotSearchShow:a,keyword:r,updateKeyword:c,searchKeyword:t,hotSearch:{list:o},keywordSearch:{list:l,total:i}})=>d.jsxs(_.Fragment,{children:[d.jsx("h4",{className:"main_box_shadow module_title",children:"Search"}),d.jsxs("div",{className:g,children:[d.jsxs("form",{className:y,onSubmit:e=>e.preventDefault(),children:[d.jsx("input",{type:"text",placeholder:"Singer/Song Name",className:f,value:r,onChange:e=>c(e.target.value),onKeyUp:e=>v(e)?t():void 0}),d.jsx("button",{className:n(b,{[x]:e}),type:"button",onClick:t,children:"Search"})]}),d.jsxs("div",{className:n({hidden:!a}),children:[d.jsx("h6",{className:k,children:"Recently Popular"}),d.jsx("ul",{children:o.map(e=>d.jsx("li",{className:n(p,"main_border_bottom"),onClick:a=>c(e.keyword,t),children:e.keyword},e.keyword))})]}),d.jsxs("div",{className:n({hidden:!e}),children:[d.jsxs("div",{className:j,children:["Total ",i," results"]}),d.jsx(s,{data:l,className:N})]})]})]});e("default",()=>{const e=i(),a=h(),[r]=w(),[c,t]=_.useState(!1),[o,l]=_.useState(!1),[n,s]=_.useState(""),v=_.useRef(null),{data:g,refetch:y}=S({enabled:!1}),{data:f,refetch:b}=m({keyword:r.get("keyword")||"",enabled:!1}),x=u(({search:e})=>{const a=new URLSearchParams(e).get("keyword");null===a||""===a?(y(),l(!0),t(!1),s("")):(b(),l(!1),t(!0),s(a))}),k=u((e,a=()=>{})=>{s(e),v.current=a}),p=u(()=>{const{search:r,pathname:c}=e;if(""===n)return void a(c);const t=new URLSearchParams(r),o=null!==t.get("keyword");t.set("keyword",n),o?a(c+"?"+t.toString(),{replace:!0}):a(c+"?"+t.toString())});_.useEffect(()=>{x(e)},[e,x]),_.useEffect(()=>{v.current&&(v.current(),v.current=null)},[n]);const j={isKeywordSearchShow:c,isHotSearchShow:o,keyword:n,searchKeyword:p,updateKeyword:k,hotSearch:g,keywordSearch:f};return d.jsx(z,{...j})})}}});
