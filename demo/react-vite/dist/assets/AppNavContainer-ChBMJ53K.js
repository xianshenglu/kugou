import{r as w,j as o,N as T,J as I,K as S,c as j,u as P,b as X,L as D,M,O as Y,Q as b}from"./index-CaPGCRQz.js";class B extends w.Component{render(){const{navList:t,activeIndex:e}=this.props;return o.jsxs("section",{className:"AppNav",children:[o.jsx("nav",{className:"AppNav__box",children:t.map((s,a)=>o.jsx(T,{to:s.path,className:({isActive:i,isPending:c})=>"AppNav__link"+(i?" AppNav__link--active":""),children:s.text},s.path))}),o.jsx("div",{className:"AppNav__underline",style:{transform:`translateX(${e*100}%)`}})]})}}const W=n=>({type:S,index:n}),x=n=>({type:I,isShow:n}),r=[{text:"新歌",path:D},{text:"排行",path:M},{text:"歌单",path:Y},{text:"歌手",path:b}];class k extends w.Component{constructor(t){super(t),this.toggleBetweenPages=this.toggleBetweenPages.bind(this)}componentDidUpdate(t){this.props.location!==t.location&&this.onLocationChange(this.props.location)}componentDidMount(){const{location:t}=this.props;this.onLocationChange(t),window.addEventListener("touchstart",this.toggleBetweenPages)}componentWillUnmount(){window.removeEventListener("touchstart",this.toggleBetweenPages)}onLocationChange({pathname:t}){const e=r.findIndex(a=>a.path===t),{dispatch:s}=this.props;e>=0?(s(x(!0)),s(W(e))):s(x(!1))}toggleBetweenPages(t){let e=300,s=Date.now(),a=window.innerWidth*.1,i=window.innerWidth*.4,c=t.touches[0].clientX,m=t.touches[0].clientY;const l=h=>{window.removeEventListener("touchend",l,!0);let d=h.changedTouches[0].clientX,N=h.changedTouches[0].clientY,p=Math.abs(d-c);if(Math.abs(N-m)>p)return;let f=d-c<0,v=Date.now()-s>e,C=v&&p>i,A=!v&&p>a;const{appNav:{activeIndex:u,isShow:L},navigate:_}=this.props;if(L&&(C||A)){let E=f?u+1:u-1,g=r[E];g!==void 0&&_(g.path)}};window.addEventListener("touchend",l,!0)}render(){const{appNav:{activeIndex:t,isShow:e}}=this.props;return e?o.jsx(B,{activeIndex:t,navList:r}):""}}const y=({appNav:n})=>({appNav:n}),O=null;function R(n){const t=P(),e=X();return o.jsx(k,{...n,location:t,navigate:e})}const F=j(y,O)(R);export{F as default};
