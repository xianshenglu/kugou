import{j as r,N as C,R,b as T,E as X,I as Y,G as m,a as z,J as F,K as P,M as D,O as Q}from"./index-DxUPXwwm.js";import{u as W}from"./index-T3HRlr9y.js";const $="AppNav-module__AppNav__IQ5qb",q="AppNav-module__AppNav__box__hFBzi",G="AppNav-module__AppNav__link__FyN1t",J="AppNav-module__AppNav__underline__upe4Q",c={AppNav:$,AppNav__box:q,AppNav__link:G,AppNav__underline:J},K=({navList:t,activeIndex:e})=>r.jsxs("section",{className:c.AppNav,children:[r.jsx("nav",{className:c.AppNav__box,children:t.map((n,s)=>r.jsx(C,{to:n.path,className:({isActive:o,isPending:i})=>c.AppNav__link,children:n.text},n.path))}),r.jsx("div",{className:c.AppNav__underline,style:{transform:`translateX(${e*100}%)`}})]}),w=t=>Symbol.iterator in t,b=t=>"entries"in t,A=(t,e)=>{const n=t instanceof Map?t:new Map(t.entries()),s=e instanceof Map?e:new Map(e.entries());if(n.size!==s.size)return!1;for(const[o,i]of n)if(!s.has(o)||!Object.is(i,s.get(o)))return!1;return!0},H=(t,e)=>{const n=t[Symbol.iterator](),s=e[Symbol.iterator]();let o=n.next(),i=s.next();for(;!o.done&&!i.done;){if(!Object.is(o.value,i.value))return!1;o=n.next(),i=s.next()}return!!o.done&&!!i.done};function U(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e)?!1:w(t)&&w(e)?b(t)&&b(e)?A(t,e):H(t,e):A({entries:()=>Object.entries(t)},{entries:()=>Object.entries(e)})}function V(t){const e=R.useRef(void 0);return n=>{const s=t(n);return U(e.current,s)?e.current:e.current=s}}const l=[{text:"新歌",path:F},{text:"排行",path:P},{text:"歌单",path:D},{text:"歌手",path:Q}],nt=()=>{const t=T(),e=X(),{activeIndex:n,isShow:s,setActiveNavIndex:o,switchNav:i}=Y(V(a=>({activeIndex:a.activeIndex,isShow:a.isShow,setActiveNavIndex:a.setActiveNavIndex,switchNav:a.switchNav}))),g=m(({pathname:a})=>{const p=l.findIndex(d=>d.path===a);p>=0?(i(!0),o(p)):i(!1)}),j=m(a=>{const d=Date.now(),I=window.innerWidth*.1,O=window.innerWidth*.4,u=a.touches[0].clientX,S=a.touches[0].clientY,_=h=>{window.removeEventListener("touchend",_,!0);const x=h.changedTouches[0].clientX,y=h.changedTouches[0].clientY,f=Math.abs(x-u);if(Math.abs(y-S)>f)return;const E=x-u<0,N=Date.now()-d>300,M=N&&f>O,L=!N&&f>I;if(s&&(M||L)){const k=E?n+1:n-1,v=l[k];v!==void 0&&e(v.path)}};window.addEventListener("touchend",_,!0)});return z.useEffect(()=>{g(t)},[t]),W("touchstart",j,{target:window}),s?r.jsx(K,{activeIndex:n,navList:l}):null};export{nt as default};
