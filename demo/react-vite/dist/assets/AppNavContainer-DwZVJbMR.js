import{r as m,j as a,N as P,P as o,K as S,L as j,c as R,u as X,b,M as y,O as D,Q as M,T as Y}from"./index-zccQ5I2P.js";class N extends m.Component{render(){const{navList:t,activeIndex:e}=this.props;return a.jsxs("section",{className:"AppNav",children:[a.jsx("nav",{className:"AppNav__box",children:t.map((s,i)=>a.jsx(P,{to:s.path,className:({isActive:p,isPending:r})=>"AppNav__link"+(p?" AppNav__link--active":""),children:s.text},s.path))}),a.jsx("div",{className:"AppNav__underline",style:{transform:`translateX(${e*100}%)`}})]})}}N.propTypes={navList:o.arrayOf(o.shape({path:o.string.isRequired,text:o.string.isRequired})).isRequired,activeIndex:o.number.isRequired};const B=n=>({type:j,index:n}),w=n=>({type:S,isShow:n}),l=[{text:"新歌",path:y},{text:"排行",path:D},{text:"歌单",path:M},{text:"歌手",path:Y}];class W extends m.Component{constructor(t){super(t),this.toggleBetweenPages=this.toggleBetweenPages.bind(this)}componentDidUpdate(t){this.props.location!==t.location&&this.onLocationChange(this.props.location)}componentDidMount(){const{location:t}=this.props;this.onLocationChange(t),window.addEventListener("touchstart",this.toggleBetweenPages)}componentWillUnmount(){window.removeEventListener("touchstart",this.toggleBetweenPages)}onLocationChange({pathname:t}){const e=l.findIndex(i=>i.path===t),{dispatch:s}=this.props;e>=0?(s(w(!0)),s(B(e))):s(w(!1))}toggleBetweenPages(t){let e=300,s=Date.now(),i=window.innerWidth*.1,p=window.innerWidth*.4,r=t.touches[0].clientX,f=t.touches[0].clientY;const d=h=>{window.removeEventListener("touchend",d,!0);let u=h.changedTouches[0].clientX,C=h.changedTouches[0].clientY,c=Math.abs(u-r);if(Math.abs(C-f)>c)return;let L=u-r<0,v=Date.now()-s>e,A=v&&c>p,T=!v&&c>i;const{appNav:{activeIndex:g,isShow:_},navigate:E}=this.props;if(_&&(A||T)){let I=L?g+1:g-1,x=l[I];x!==void 0&&E(x.path)}};window.addEventListener("touchend",d,!0)}render(){const{appNav:{activeIndex:t,isShow:e}}=this.props;return e?a.jsx(N,{activeIndex:t,navList:l}):""}}const k=({appNav:n})=>({appNav:n}),q=null;function O(n){const t=X(),e=b();return a.jsx(W,{...n,location:t,navigate:e})}const F=R(k,q)(O);export{F as default};
