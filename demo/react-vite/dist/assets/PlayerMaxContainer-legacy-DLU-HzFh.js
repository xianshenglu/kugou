!function(){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},r(e)}function e(r,e){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),a.push.apply(a,t)}return a}function a(r){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?e(Object(t),!0).forEach(function(e){o(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):e(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function t(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var a=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=a){var t,n,o,l,c=[],i=!0,u=!1;try{if(o=(a=a.call(r)).next,0===e){if(Object(a)!==a)return;i=!1}else for(;!(i=(t=o.call(a)).done)&&(c.push(t.value),c.length!==e);i=!0);}catch(r){u=!0,n=r}finally{try{if(!i&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return c}}(r,e)||function(r,e){if(r){if("string"==typeof r)return n(r,e);var a={}.toString.call(r).slice(8,-1);return"Object"===a&&r.constructor&&(a=r.constructor.name),"Map"===a||"Set"===a?Array.from(r):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(r,e):void 0}}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(r,e){(null==e||e>r.length)&&(e=r.length);for(var a=0,t=Array(e);a<e;a++)t[a]=r[a];return t}function o(e,a,t){return(a=function(e){var a=function(e,a){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==r(a)?a:a+""}(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}System.register(["./index-legacy-SfwXhd5p.js","./useNextPrevSong-legacy-B9f6Xmz8.js","./index-legacy-CNjvdSVq.js"],function(r,e){"use strict";var n,l,c,i,u,s,_,v,d,y,f,g,m;return{setters:[function(r){n=r.g,l=r.j,c=r.o,i=r.O,u=r.h,s=r.c,_=r.u,v=r.a},function(r){d=r.P,y=r.a,f=r.N,g=r.u},function(r){m=r.u}],execute:function(){var e=document.createElement("style");e.textContent=".PlayerMax-module__PlayerMax__AWF8d{position:relative}.PlayerMax-module__PlayerMax__mask__YPHjh{position:absolute;left:0;top:0;filter:blur(calc(var(--vw, 1vw) * 4));width:100%;height:100%;display:block;background-repeat:no-repeat,no-repeat;background-size:auto 100%,auto 100%;background-position:center,center;z-index:-1}.PlayerMax-module__PlayerMax__container__cn2nZ{display:flex;flex-flow:column;align-items:center;height:100%;background-color:rgba(0,0,0,.6);width:100%;box-sizing:border-box;overflow:hidden}.PlayerMax-module__PlayerMax__songName__bOYDz{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 54 / 609);line-height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 54 / 609);width:calc(100% - calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 120 / 609));box-sizing:border-box;margin:0 calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 120 / 609);overflow-x:auto;overflow-y:hidden;white-space:nowrap;color:#fff;text-align:center;font-size:inherit}.PlayerMax-module__PlayerMax__singerImg__eV9IC{margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 26 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 193 / 609);width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 193 / 609);flex:0 0 auto;border-radius:50%;animation:PlayerMax-module__rotate__HWUSO 20s linear infinite reverse;animation-play-state:paused}.PlayerMax-module__PlayerMax__singerImg--active__0br27{animation-play-state:running}.PlayerMax-module__PlayerMax__progress__WrX--{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 48 / 609);width:100%;box-sizing:border-box}.PlayerMax-module__PlayerMax__buttonContainer__DsOIS{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);display:flex;align-items:center;justify-content:center}.PlayerMax-module__PlayerMax__prevBtn__30-Yo,.PlayerMax-module__PlayerMax__nextBtn__qIfxs,.PlayerMax-module__PlayerMax__playBtn__mZv5b{border-radius:50%;border:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 2 / 609) solid #fff;margin:0 calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609)}.PlayerMax-module__PlayerMax__prevBtn__30-Yo,.PlayerMax-module__PlayerMax__nextBtn__qIfxs{width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 42 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 42 / 609);font-size:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609)}.PlayerMax-module__PlayerMax__prevBtn__30-Yo .PlayerMax-module__icon__Rq46I{transform:translate(0)}.PlayerMax-module__PlayerMax__nextBtn__qIfxs .PlayerMax-module__icon__Rq46I{transform:translate(1px)}.PlayerMax-module__PlayerMax__playBtn__mZv5b{width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);font-size:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 20 / 609)}.PlayerMax-module__PlayerMax__download__EyIPb{margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 19 / 609) auto 0;height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 45 / 609);width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 211 / 609)}.PlayerLyric-module__PlayerLyric__QMiTC{color:#ccc;overflow:scroll;font-size:calc(var(--vw, 1vw) * 4);margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 68 / 609);line-height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 34 / 609);width:102%;box-sizing:border-box;padding:0 calc(var(--vw, 1vw) * 16)}.PlayerLyric-module__PlayerLyric__QMiTC{text-align:center}.PlayerLyric-module__PlayerLyric_text__JjHWv{line-height:inherit}.PlayerLyric-module__PlayerLyric_text--active__jeHXO{color:#d1c90e}.PlayerProgress-module__PlayerProgress__mzM-h{font-size:calc(var(--vw, 1vw) * 3.2);padding:calc(var(--vw, 1vw) * 4.26667) calc(var(--vw, 1vw) * 3.46667);display:flex;justify-content:space-between;align-items:center;color:#e5e5e5;height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 48 / 609);width:100%;box-sizing:border-box}.PlayerProgress-module__PlayerProgress__songCurTime__mDV-2,.PlayerProgress-module__PlayerProgress__songDuration__-WXmx{flex:0 0 auto}.PlayerProgress-module__PlayerProgress__progressBar__YqIcJ{flex:1 0 auto;height:calc(var(--vw, 1vw) * 1.06667);margin:0 calc(var(--vw, 1vw) * 2.66667);background-color:#232228;position:relative}.PlayerProgress-module__PlayerProgress__progressBarPointer__W8S6Y{position:absolute;left:0;top:50%;transform:translate(-50%,-50%);background:#2ca2f9;height:calc(var(--vw, 1vw) * 3.46667);width:calc(var(--vw, 1vw) * 3.46667);border-radius:50%}\n/*$vite$:1*/",document.head.appendChild(e);var h="PlayerMax-module__PlayerMax__mask__YPHjh",P="PlayerMax-module__PlayerMax__container__cn2nZ",x="PlayerMax-module__PlayerMax__songName__bOYDz",w="PlayerMax-module__PlayerMax__singerImg__eV9IC",p="PlayerMax-module__PlayerMax__singerImg--active__0br27",b="PlayerMax-module__PlayerMax__buttonContainer__DsOIS",M="PlayerMax-module__PlayerMax__prevBtn__30-Yo",j="PlayerMax-module__PlayerMax__nextBtn__qIfxs",S="PlayerMax-module__PlayerMax__playBtn__mZv5b",I="PlayerMax-module__PlayerMax__download__EyIPb",N="PlayerLyric-module__PlayerLyric__QMiTC",O="PlayerLyric-module__PlayerLyric_text__JjHWv",L="PlayerLyric-module__PlayerLyric_text--active__jeHXO",E=function(r){var e=r.lyrics,a=r.prevLyricIndex,t=r.toggleIsTouching,i=n.useRef([]);return n.useEffect(function(){var r;null===(r=i.current[a])||void 0===r||r.scrollIntoView()},[a]),l.jsx("div",{className:N,onTouchStart:function(){return t(!0)},onTouchEnd:function(){return t(!1)},children:e.map(function(r,e){return l.jsx("p",{ref:function(r){return function(r,e){return i.current[r]=e,function(){i.current.splice(r,1)}}(e,r)},className:c(O,o({},L,e===a+1)),children:r.text},e)})})},T=i([function(r){return r}],function(r){var e=r.split(/\n/);return e.pop(),e.map(function(r){var e=r.replace("[","").split("]"),a=e[0],t=a.split(":")[0],n=a.split(":")[1].split(".")[0],o=a.split(":")[1].split(".")[1];return{millisecond:60*Number(t)*1e3+1e3*Number(n)+Number(o),text:e[1].trim().replace(/(男[:：]\s*)|(女[:：]\s*)/,"")}})}),B=function(){var r=t(n.useState(0),2),e=r[0],o=r[1],c=t(n.useState(!1),2),i=c[0],_=c[1],v=u(),d=v.songInfo.lyric,y=v.audioElRef,f=s(function(r){_(r)}),g=s(function(r){if(!i){var e=T(d).map(function(r){return r.millisecond}),a=Math.floor(1e3*r.target.currentTime),t=e.findIndex(function(r){return r>1.005*a});o(t>1?t-2:0)}});n.useEffect(function(){var r=y.current;if(r)return r.addEventListener("timeupdate",g),function(){r.removeEventListener("timeupdate",g)}},[y]);var m={lyrics:T(d),prevLyricIndex:e,toggleIsTouching:f};return l.jsx(E,a({},m))},z="PlayerProgress-module__PlayerProgress__mzM-h",R="PlayerProgress-module__PlayerProgress__songCurTime__mDV-2",k="PlayerProgress-module__PlayerProgress__songDuration__-WXmx",C="PlayerProgress-module__PlayerProgress__progressBar__YqIcJ",D="PlayerProgress-module__PlayerProgress__progressBarPointer__W8S6Y";function Y(r){if(isNaN(Number(r)))return"00:00";var e=Math.floor(Number(r)),a=e%60,t=Math.floor(e/60);return String(t).padStart(2,"0")+":"+String(a).padStart(2,"0")}var W=function(r){var e=r.audioElRef.current,a=r.progressBarRef,t=r.currentTime,n=r.currentProgress,o=r.loadProgress,c=r.onTouchStart,i=null===e?{duration:0}:e,u={backgroundImage:"linear-gradient(to right, #2ca2f9 ".concat(n,"%, transparent ").concat(n,"%),linear-gradient(to right, #6c6b70 ").concat(o,"%, transparent ").concat(o,"%)"),color:"red"};return l.jsxs("div",{className:z,onTouchStart:c,children:[l.jsx("div",{className:R,children:Y(t)}),l.jsx("div",{className:C,ref:a,style:u,children:l.jsx("div",{className:D,style:{left:n+"%"}})}),l.jsx("div",{className:k,children:Y(i.duration)})]})},q=function(){var r=u().audioElRef,e=t(n.useState(0),2),o=e[0],c=e[1],i=t(n.useState(0),2),_=i[0],v=i[1],d=t(n.useState(0),2),y=d[0],f=d[1],g=t(n.useState(!1),2),h=g[0],P=g[1],x=n.useRef(null),w=n.useRef(null),p=n.useRef(0),b=s(function(e,a,t){var n,l=(e-a)/w.current.width,c=r.current;switch(t){case 0:n=c.duration*l;break;case 1:n=o+c.duration*l}return n<0?n=0:n>c.duration&&(n=c.duration),n}),M=s(function(){var e=r.current;if(!(e.readyState<2)){var a=e.buffered.length,t=Math.floor(100*e.buffered.end(a-1)/e.duration);v(t)}}),j=s(function(e){if(!h){var a=r.current,t=e.target.currentTime,n=Math.floor(100*t/a.duration);c(t),f(n)}}),S=s(function(e){var a=e.touches[0].clientX,t=b(a,p.current,1),n=r.current,o=Math.floor(100*t/n.duration);c(t),f(o),p.current=a}),I=s(function(){var e=r.current;P(!1),Number.isNaN(o)||(e.currentTime=o),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",I)}),N=s(function(e){P(!0),w.current||(w.current=x.current.getBoundingClientRect());var a=e.touches[0].clientX,t=b(a,w.current.left,0),n=r.current,o=Math.floor(100*t/n.duration);c(t),f(o),p.current=a,window.addEventListener("touchmove",S),window.addEventListener("touchend",I)});m("progress",M,{target:function(){return r.current}}),m("timeupdate",j,{target:function(){return r.current}});var O={audioElRef:r,currentTime:o,loadProgress:_,currentProgress:y,isTouching:h,onTouchStart:N,progressBarRef:x};return l.jsx(W,a({},O))},H=function(r){var e=r.songInfo,a=e.song_name,t=e.author_name,i=e.img,s=r.musicStatus,_=s.isPlaying,v=s.isLoading,g=r.prevSong,m=r.nextSong,N=u().togglePlay;return l.jsxs(n.Fragment,{children:[l.jsx("div",{className:h,style:{backgroundImage:"url(".concat(i,"),linear-gradient(to right, rgb(48, 67, 82), rgb(215, 210, 204))")}}),l.jsxs("div",{className:P,children:[l.jsx("h6",{className:x,children:a}),l.jsx("img",{src:i,className:c(w,o({},p,_)),alt:t}),l.jsx(B,{}),l.jsx(q,{}),l.jsxs("div",{className:b,children:[l.jsx(d,{className:M,prev:g}),l.jsx(y,{className:S,isLoading:v,isPlaying:_,togglePlay:N}),l.jsx(f,{className:j,next:m})]}),l.jsx("button",{className:I})]})]})};r("default",function(){var r=_(),e=v(),t=u(),o=t.musicStatus,c=t.songInfo,i=t.audioElRef,s=t.songIndex,d=t.songList,y=t.fetchMusicIfNeeded;n.useEffect(function(){if(""===c.play_url){var e=new URLSearchParams(r.search).get("musicHash");e&&y(e,0,[{hash:e}])}},[r.search,c,y]);var f={musicStatus:o,songInfo:c,audioElRef:i,songIndex:s,songList:d,location:r,navigate:e},m=g(d,s),h=m.nextSong,P=m.prevSong;return l.jsx(H,a(a({},f),{},{nextSong:h,prevSong:P}))})}}})}();
