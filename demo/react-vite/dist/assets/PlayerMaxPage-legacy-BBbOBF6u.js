System.register(["./index-legacy-CHfQ7Ag6.js","./useNextPrevSong-legacy-CYdfMeyw.js","./index-legacy-JEiopEGW.js"],function(e,r){"use strict";var a,t,l,n,o,c,s,i,_,u,v,d,g;return{setters:[e=>{a=e.f,t=e.d,l=e.c,n=e.u,o=e.j,c=e.g,s=e.e,i=e.a},e=>{_=e.P,u=e.a,v=e.N,d=e.u},e=>{g=e.u}],execute:function(){var r=document.createElement("style");r.textContent=".PlayerMax-module__PlayerMax__nFr9t{position:relative}.PlayerMax-module__PlayerMax__mask__O5dge{position:absolute;left:0;top:0;filter:blur(calc(var(--vw, 1vw) * 4));width:100%;height:100%;display:block;background-repeat:no-repeat,no-repeat;background-size:auto 100%,auto 100%;background-position:center,center;z-index:-1}.PlayerMax-module__PlayerMax__container__78jAB{display:flex;flex-flow:column;align-items:center;height:100%;background-color:rgba(0,0,0,.6);width:100%;box-sizing:border-box;overflow:hidden}.PlayerMax-module__PlayerMax__songName__LaOPN{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 54 / 609);line-height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 54 / 609);width:calc(100% - calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 120 / 609));box-sizing:border-box;margin:0 calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 120 / 609);overflow-x:auto;overflow-y:hidden;white-space:nowrap;color:#fff;text-align:center;font-size:inherit}.PlayerMax-module__PlayerMax__singerImg__zLqtL{margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 26 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 193 / 609);width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 193 / 609);flex:0 0 auto;border-radius:50%;animation:PlayerMax-module__rotate__Vs2fB 20s linear infinite reverse;animation-play-state:paused}.PlayerMax-module__PlayerMax__singerImg--active__JzhE5{animation-play-state:running}.PlayerMax-module__PlayerMax__progress__mqqzK{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 48 / 609);width:100%;box-sizing:border-box}.PlayerMax-module__PlayerMax__buttonContainer__CH7mY{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);display:flex;align-items:center;justify-content:center}.PlayerMax-module__PlayerMax__prevBtn__lEN41,.PlayerMax-module__PlayerMax__nextBtn__JsiF1,.PlayerMax-module__PlayerMax__playBtn__q-uA3{border-radius:50%;border:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 2 / 609) solid #fff;margin:0 calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609)}.PlayerMax-module__PlayerMax__prevBtn__lEN41,.PlayerMax-module__PlayerMax__nextBtn__JsiF1{width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 42 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 42 / 609);font-size:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609)}.PlayerMax-module__PlayerMax__prevBtn__lEN41 .PlayerMax-module__icon__e19QT{transform:translate(0)}.PlayerMax-module__PlayerMax__nextBtn__JsiF1 .PlayerMax-module__icon__e19QT{transform:translate(1px)}.PlayerMax-module__PlayerMax__playBtn__q-uA3{width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);font-size:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 20 / 609)}.PlayerMax-module__PlayerMax__download__6-SnC{margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 19 / 609) auto 0;height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 45 / 609);width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 211 / 609)}.PlayerLyric-module__PlayerLyric__FPEtF{color:#ccc;overflow:scroll;font-size:calc(var(--vw, 1vw) * 4);margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 68 / 609);line-height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 34 / 609);width:102%;box-sizing:border-box;padding:0 calc(var(--vw, 1vw) * 16)}.PlayerLyric-module__PlayerLyric__FPEtF{text-align:center}.PlayerLyric-module__PlayerLyric_text__TGvUV{line-height:inherit}.PlayerLyric-module__PlayerLyric_text--active__KL5iT{color:#d1c90e}.PlayerProgress-module__PlayerProgress__zfweH{font-size:calc(var(--vw, 1vw) * 3.2);padding:calc(var(--vw, 1vw) * 4.26667) calc(var(--vw, 1vw) * 3.46667);display:flex;justify-content:space-between;align-items:center;color:#e5e5e5;height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 48 / 609);width:100%;box-sizing:border-box}.PlayerProgress-module__PlayerProgress__songCurTime__A7-HE,.PlayerProgress-module__PlayerProgress__songDuration__Gvntj{flex:0 0 auto}.PlayerProgress-module__PlayerProgress__progressBar__cjUc4{flex:1 0 auto;height:calc(var(--vw, 1vw) * 1.06667);margin:0 calc(var(--vw, 1vw) * 2.66667);background-color:#232228;position:relative}.PlayerProgress-module__PlayerProgress__progressBarPointer__d5hpm{position:absolute;left:0;top:50%;transform:translate(-50%,-50%);background:#2ca2f9;height:calc(var(--vw, 1vw) * 3.46667);width:calc(var(--vw, 1vw) * 3.46667);border-radius:50%}\n/*$vite$:1*/",document.head.appendChild(r);const y="PlayerMax-module__PlayerMax__mask__O5dge",m="PlayerMax-module__PlayerMax__container__78jAB",P="PlayerMax-module__PlayerMax__songName__LaOPN",h="PlayerMax-module__PlayerMax__singerImg__zLqtL",x="PlayerMax-module__PlayerMax__singerImg--active__JzhE5",w="PlayerMax-module__PlayerMax__buttonContainer__CH7mY",f="PlayerMax-module__PlayerMax__prevBtn__lEN41",p="PlayerMax-module__PlayerMax__nextBtn__JsiF1",M="PlayerMax-module__PlayerMax__playBtn__q-uA3",b="PlayerMax-module__PlayerMax__download__6-SnC",N="PlayerLyric-module__PlayerLyric__FPEtF",L="PlayerLyric-module__PlayerLyric_text__TGvUV",j="PlayerLyric-module__PlayerLyric_text--active__KL5iT",S=a([e=>e],e=>{const r=e.split(/\n/);return r.pop(),r.map(e=>{const r=e.replace("[","").split("]"),a=r[0],t=a.split(":")[0],l=a.split(":")[1].split(".")[0],n=a.split(":")[1].split(".")[1];return{millisecond:60*Number(t)*1e3+1e3*Number(l)+Number(n),text:r[1].trim().replace(/(男[:：]\s*)|(女[:：]\s*)/,"")}})}),E=()=>{const{lyrics:e,prevLyricIndex:r,toggleIsTouching:a}=function(){const[e,r]=t.useState(0),[a,o]=t.useState(!1),{songInfo:{lyric:c},audioElRef:s}=l(),i=n(e=>{o(e)}),_=n(e=>{if(a)return;const t=S(c).map(e=>e.millisecond),l=Math.floor(1e3*e.target.currentTime),n=t.findIndex(e=>e>1.005*l);r(n>1?n-2:0)});return t.useEffect(()=>{const e=s.current;if(e)return e.addEventListener("timeupdate",_),()=>{e.removeEventListener("timeupdate",_)}},[s,_]),{lyrics:S(c),prevLyricIndex:e,toggleIsTouching:i}}(),s=t.useRef([]);return t.useEffect(()=>{s.current[r]?.scrollIntoView()},[r]),o.jsx("div",{className:N,onTouchStart:()=>a(!0),onTouchEnd:()=>a(!1),children:e.map((e,a)=>o.jsx("p",{ref:e=>((e,r)=>(s.current[e]=r,()=>{s.current.splice(e,1)}))(a,e),className:c(L,{[j]:a===r+1}),children:e.text},a))})},B="PlayerProgress-module__PlayerProgress__zfweH",T="PlayerProgress-module__PlayerProgress__songCurTime__A7-HE",z="PlayerProgress-module__PlayerProgress__songDuration__Gvntj",I="PlayerProgress-module__PlayerProgress__progressBar__cjUc4",R="PlayerProgress-module__PlayerProgress__progressBarPointer__d5hpm";function k(e){if(isNaN(Number(e)))return"00:00";const r=Math.floor(Number(e)),a=r%60,t=Math.floor(r/60);return String(t).padStart(2,"0")+":"+String(a).padStart(2,"0")}const F=()=>{const{audioElRef:e,progressBarRef:r,currentTime:a,currentProgress:c,loadProgress:s,onTouchStart:i}=function(){const{audioElRef:e}=l(),[r,a]=t.useState(0),[o,c]=t.useState(0),[s,i]=t.useState(0),[_,u]=t.useState(!1),v=t.useRef(null),d=t.useRef(null),y=t.useRef(0),m=n((a,t,l)=>{const n=(a-t)/d.current.width;let o;const c=e.current;switch(l){case 0:o=c.duration*n;break;case 1:o=r+c.duration*n}return o<0?o=0:o>c.duration&&(o=c.duration),o}),P=n(()=>{const r=e.current;if(r.readyState<2)return;const a=r.buffered.length,t=Math.floor(100*r.buffered.end(a-1)/r.duration);c(t)}),h=n(r=>{if(_)return;const t=e.current,l=r.target.currentTime,n=Math.floor(100*l/t.duration);a(l),i(n)}),x=n(r=>{const t=r.touches[0].clientX,l=m(t,y.current,1),n=e.current,o=Math.floor(100*l/n.duration);a(l),i(o),y.current=t}),w=n(()=>{const a=e.current;u(!1),Number.isNaN(r)||(a.currentTime=r),window.removeEventListener("touchmove",x),window.removeEventListener("touchend",w)}),f=n(r=>{u(!0),d.current||(d.current=v.current.getBoundingClientRect());const t=r.touches[0].clientX,l=m(t,d.current.left,0),n=e.current,o=Math.floor(100*l/n.duration);a(l),i(o),y.current=t,window.addEventListener("touchmove",x),window.addEventListener("touchend",w)});return g("progress",P,{target:()=>e.current}),g("timeupdate",h,{target:()=>e.current}),{audioElRef:e,progressBarRef:v,currentTime:r,loadProgress:o,currentProgress:s,onTouchStart:f}}(),_=null===e.current?{duration:0}:e.current,u={backgroundImage:`linear-gradient(to right, #2ca2f9 ${c}%, transparent ${c}%),linear-gradient(to right, #6c6b70 ${s}%, transparent ${s}%)`,color:"red"};return o.jsxs("div",{className:B,onTouchStart:i,children:[o.jsx("div",{className:T,children:k(a)}),o.jsx("div",{className:I,ref:r,style:u,children:o.jsx("div",{className:R,style:{left:c+"%"}})}),o.jsx("div",{className:z,children:k(_.duration)})]})},C=({songInfo:{song_name:e,author_name:r,img:a},musicStatus:{isPlaying:n,isLoading:s},prevSong:i,nextSong:d})=>{const{togglePlay:g}=l();return o.jsxs(t.Fragment,{children:[o.jsx("div",{className:y,style:{backgroundImage:`url(${a}),linear-gradient(to right, rgb(48, 67, 82), rgb(215, 210, 204))`}}),o.jsxs("div",{className:m,children:[o.jsx("h6",{className:P,children:e}),o.jsx("img",{src:a,className:c(h,{[x]:n}),alt:r}),o.jsx(E,{}),o.jsx(F,{}),o.jsxs("div",{className:w,children:[o.jsx(_,{className:f,prev:i}),o.jsx(u,{className:M,isLoading:s,isPlaying:n,togglePlay:g}),o.jsx(v,{className:p,next:d})]}),o.jsx("button",{className:b})]})]})};e("default",()=>{const e=s(),r=i(),{musicStatus:a,songInfo:n,audioElRef:c,songIndex:_,songList:u,fetchMusicIfNeeded:v}=l();t.useEffect(()=>{const{play_url:r}=n;if(""===r){const r=new URLSearchParams(e.search).get("musicHash");r&&v(r,0,[{hash:r}])}},[e.search,n,v]);const g={musicStatus:a,songInfo:n,audioElRef:c,songIndex:_,songList:u,location:e,navigate:r},{nextSong:y,prevSong:m}=d(u,_);return o.jsx(C,{...g,nextSong:y,prevSong:m})})}}});
