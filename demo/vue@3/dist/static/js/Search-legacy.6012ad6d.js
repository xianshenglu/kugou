"use strict";(self["webpackChunkkugou"]=self["webpackChunkkugou"]||[]).push([[763],{1719:function(e,t,a){a.d(t,{A:function(){return p}});var s=a(641),r=a(2644);(0,s.Qi)("data-v-413d897e");var i={class:"music_list"},n=["onClick"],c={class:"music_list__name"},o=(0,s.Lk)("button",{class:"music_list__download"},[(0,s.Lk)("svg",{class:"icon","aria-hidden":"true"},[(0,s.Lk)("use",{"xlink:href":"#icon-download"})])],-1);function h(e,t,a,h,u,l){return(0,s.uX)(),(0,s.CE)("ul",i,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.musicList,function(t,a){return(0,s.uX)(),(0,s.CE)("li",{class:"music_list__item main_border_bottom",key:a},[(0,s.Lk)("div",{class:"music_list__info",onClick:function(a){return e.wantPlay(t)}},[(0,s.RG)(e.$slots,"index",{data:a,class:"music_list__index",onClick:function(a){return e.wantPlay(t)}},void 0,!0),(0,s.Lk)("div",c,(0,r.v_)(t.filename),1)],8,n),o])}),128))])}(0,s.jt)();var u=(0,s.pM)({name:"AppMusicList",props:{musicList:{type:Array,default:function(){return[]}}},methods:{wantPlay:function(e){this.$store.commit("player/wantPlay",{music:e,musicList:this.$props.musicList})}}}),l=a(6262);const d=(0,l.A)(u,[["render",h],["__scopeId","data-v-413d897e"]]);var p=d},3470:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}},5382:function(e,t,a){var s=a(1034),r=a(6278);t.A={updated:function(){this.stopLoading()},methods:(0,s.A)((0,s.A)({},(0,r.PY)(["replaceProperty"])),{},{startLoading:function(){this.replaceProperty({paths:"loading.isShow",data:!0})},stopLoading:function(){this.replaceProperty({paths:"loading.isShow",data:!1})},setLoadingExcludeHeader:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_header"})},setLoadingExcludeNav:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_nav"})},setLoadingExcludeModuleTitle:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_module_title"})},setLoadingExcludeSearchForm:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_search_form"})}})}},5746:function(e,t,a){var s=a(9565),r=a(9228),i=a(8551),n=a(34),c=a(7750),o=a(3470),h=a(655),u=a(5966),l=a(6682);r("search",function(e,t,a){return[function(t){var a=c(this),r=n(t)?u(t,e):void 0;return r?s(r,t,a):new RegExp(t)[e](h(a))},function(e){var s=i(this),r=h(e),n=a(t,s,r);if(n.done)return n.value;var c=s.lastIndex;o(c,0)||(s.lastIndex=0);var u=l(s,r);return o(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]})},5897:function(e,t,a){a.d(t,{A:function(){return h}});var s=a(641),r=a(2644);function i(e,t,a,i,n,c){var o=arguments;return(0,s.uX)(),(0,s.CE)("h4",{class:"module_title main_box_shadow",onClick:t[0]||(t[0]=function(t){return e.$emit("click",o[0])})},(0,r.v_)(e.title),1)}var n=(0,s.pM)({emits:["click"],name:"PubModuleTitle",props:{title:{type:String,default:function(){return""}}}}),c=a(6262);const o=(0,c.A)(n,[["render",i],["__scopeId","data-v-ac7e64d2"]]);var h=o},9256:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var s=a(641),r=a(9322),i=a(2644);(0,s.Qi)("data-v-9a8b3bf6");var n={class:"search"},c={class:"search__cont",ref:"searchCont"},o=["placeholder"],h={class:"search__rec"},u={class:"search__type"},l={class:"search__list"},d=["onClick"],p={class:"search__res"},f={class:"search__count"};function _(e,t,a,_,m,v){var S=(0,s.g2)("PubModuleTitle"),w=(0,s.g2)("AppMusicList");return(0,s.uX)(),(0,s.CE)("section",n,[(0,s.bF)(S,{title:e.title,class:"search__title"},null,8,["title"]),(0,s.Lk)("div",c,[(0,s.Lk)("form",{class:"search__form",onSubmit:t[3]||(t[3]=(0,r.D$)(function(){},["prevent"]))},[(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:e.placeholder,class:"search__input","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.keyword=t}),onKeyup:t[1]||(t[1]=(0,r.jR)(function(){return e.getSearchRes&&e.getSearchRes.apply(e,arguments)},["enter"]))},null,40,o),[[r.Jo,e.keyword,void 0,{trim:!0}]]),(0,s.Lk)("button",{class:(0,i.C4)(e.isSearchResShow?"search__btn search__btn--active":"search__btn"),type:"button",onClick:t[2]||(t[2]=function(){return e.getSearchRes&&e.getSearchRes.apply(e,arguments)})},(0,i.v_)(e.title),3)],32),(0,s.bo)((0,s.Lk)("div",h,[(0,s.Lk)("h6",u,(0,i.v_)(e.searchType),1),(0,s.Lk)("ul",l,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.searchRecArr,function(t,a){return(0,s.uX)(),(0,s.CE)("li",{class:"search__item main_border_bottom",key:a,onClick:function(a){e.keyword=t.keyword,e.getSearchRes()}},(0,i.v_)(t.keyword),9,d)}),128))])],512),[[r.aG,e.isSearchRecShow]]),(0,s.bo)((0,s.Lk)("div",p,[(0,s.Lk)("div",f,"共有"+(0,i.v_)(e.searchRes.info.length)+"条结果",1),(0,s.bF)(w,{"music-list":e.searchRes.info,class:"search__res-list"},null,8,["music-list"])],512),[[r.aG,e.isSearchResShow]])],512)])}(0,s.jt)();var m=a(1034),v=(a(7495),a(5440),a(5746),a(5897)),S=a(1719),w=a(9023),y=a(5984),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,a=void 0===t?{}:t;return(0,y.A)((0,m.A)((0,m.A)({},w.G),{},{params:(0,m.A)({format:"json",plat:0,count:30},a)}))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,a=void 0===t?{}:t;return(0,y.A)((0,m.A)((0,m.A)({},w.O),{},{params:(0,m.A)({format:"json",page:1,pagesize:20,showtype:1},a)}))},R=a(2122),L=a(5382),A=a(6278),C=(0,s.pM)({name:"Search",mixins:[L.A],components:{PubModuleTitle:v.A,AppMusicList:S.A},data:function(){return{title:"搜索",searchType:"最近热门",placeholder:"歌手/歌名/拼音"}},computed:(0,m.A)((0,m.A)({},(0,A.aH)("search",["searchRecArr","searchRes","isSearchRecShow","isSearchResShow"])),{},{keyword:{get:function(){return this.$store.state.search.keyword},set:function(e){this.replaceProperty({paths:"search.keyword",data:e})}},isSearchRecShow:{get:function(){return this.$store.state.search.isSearchRecShow},set:function(e){this.replaceProperty({paths:"search.isSearchRecShow",data:e})}},isSearchResShow:{get:function(){return this.$store.state.search.isSearchResShow},set:function(e){this.replaceProperty({paths:"search.isSearchResShow",data:e})}}}),created:function(){this.init()},mounted:function(){R.A.$on("searchBtnClicked",this.scrollTopSearchCont),this.initQqBugDetect()},unmounted:function(){R.A.$off("searchBtnClicked",this.scrollTopSearchCont)},methods:(0,m.A)((0,m.A)({},(0,A.PY)(["replaceProperty"])),{},{init:function(){var e=this.$route.query.keyword,t="string"===typeof this.keyword&&""!==this.keyword,a="string"===typeof e&&""!==e;a&&e!==this.keyword?(this.keyword=e,this.getSearchRes()):t?(this.isSearchRecShow=!1,this.isSearchResShow=!0):this.getSearchRec()},getSearchRec:function(){var e=this;if(0!==this.searchRecArr.length)return this.isSearchResShow=!1,void(this.isSearchRecShow=!0);this.setLoadingExcludeSearchForm(),this.startLoading(),g().then(function(t){var a=t.data;e.replaceProperty({paths:"search.searchRecArr",data:a.data.info}),e.stopLoading(),e.isSearchResShow=!1,e.isSearchRecShow=!0}).catch(function(e){alert(e)})},getSearchRes:function(){var e=this;""!==this.keyword&&(this.$router.replace({query:{keyword:this.keyword}}),this.setLoadingExcludeSearchForm(),this.startLoading(),k({params:{keyword:this.keyword}}).then(function(t){var a=t.data.data;e.replaceProperty({paths:"search.searchRes",data:a}),e.isSearchRecShow=!1,e.isSearchResShow=!0,e.stopLoading()}))},initQqBugDetect:function(){var e=document.getElementsByClassName("search__cont")[0];window.search__cont=e;
//! bug with qq browser
var t=function(){e.scrollTop};window.addEventListener("touchstart",t),window.addEventListener("touchmove",t)},scrollTopSearchCont:function(){this.$refs.searchCont&&(this.$refs.searchCont.scrollTop=0)}})}),b=a(6262);const x=(0,b.A)(C,[["render",_],["__scopeId","data-v-9a8b3bf6"]]);var P=x}}]);
//# sourceMappingURL=Search-legacy.6012ad6d.js.map