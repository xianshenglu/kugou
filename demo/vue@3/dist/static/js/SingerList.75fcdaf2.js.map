{"version":3,"file":"static/js/SingerList.75fcdaf2.js","mappings":"kNACWA,MAAM,e,GAETA,MAAM,oBAAoBC,IAAI,gB,wBAavBD,MAAM,qB,uGAfnBE,EAAAA,EAAAA,IAmBU,UAnBVC,EAmBU,EAlBRC,EAAAA,EAAAA,IAA+CC,EAAA,CAA9BC,MAAOC,EAAAC,WAAWC,KAAKC,M,mBACxCC,EAAAA,EAAAA,IAgBK,KAhBLC,EAgBK,G,aAfHV,EAAAA,EAAAA,IAcKW,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAZoBP,EAAAC,WAAWO,KAAI,CAA9BC,EAAKC,M,WAFff,EAAAA,EAAAA,IAcK,MAbHF,MAAM,uCAELkB,IAAKD,G,EAENb,EAAAA,EAAAA,IAQce,EAAA,CARAC,GAAIJ,EAAKK,KAAMrB,MAAM,qB,kBACjC,IAKC,EALDW,EAAAA,EAAAA,IAKC,OAJCX,MAAM,8BACLC,IAAKqB,GAAMf,EAAAgB,aAAaN,EAAOK,GAC/BE,IAAKjB,EAAAkB,WACL,WAAUT,EAAKU,Q,WAElBf,EAAAA,EAAAA,IAAkD,MAAlDgB,GAAkDC,EAAAA,EAAAA,IAAjBZ,EAAKN,MAAI,K,yGCb7C,MAAMmB,EAAkBA,EAAGC,eAAcC,SAAS,CAAC,GAAM,CAAC,KAC/D,IAAI,IAAEC,KAAQC,GAAUC,EAAAA,EAExB,OADAF,GAAO,IAAMF,GACNK,EAAAA,EAAAA,GAAK,IAAKF,EAAOD,MAAKD,OAAQ,CAAEK,MAAM,KAASL,M,4CD0BxD,GAAeM,EAAAA,EAAAA,IAAgB,CAC7B3B,KAAM,aACN4B,OAAQ,CAACC,EAAAA,GAETC,WAAY,CACVC,eAAcA,EAAAA,GAGhBC,SAAU,KACLC,EAAAA,EAAAA,IAAS,SAAU,CAAC,mBACpBA,EAAAA,EAAAA,IAAS,SAAU,CAAC,mBACpBA,EAAAA,EAAAA,IAAS,UAAW,CACrBC,cAAe,YAGnB7B,IAAAA,GACE,MAAO,CACL8B,kBAAmB,GAEvB,EACAC,MAAO,CACL,kBAAmB,CACjBC,QAAS,SAASC,GACQ,IAApBA,EAASC,SAGbC,KAAKL,kBAAoBG,EAASG,IAAI,IAAM,OAC5CC,EAAAA,EAAAA,IAAS,KACPC,EAAAA,EAAAA,IAASH,KAAKL,kBAAmB,CAAES,KAAMJ,KAAKK,MAAMC,gBAExD,EACAC,WAAW,EACXC,MAAM,IAIVC,OAAAA,GAEE,IAAI7B,EAAeoB,KAAKU,OAAOvC,KAAKwC,MAAM,KAAKC,MAC3CC,OAAOjC,KAAkBoB,KAAK1C,WAAWC,KAAKuD,KAChDd,KAAKe,0BACLf,KAAKgB,eACLhB,KAAKhB,cAAcJ,GAEvB,EAEAqC,QAAS,KACJC,EAAAA,EAAAA,IAAa,CAAC,oBAIjB7C,YAAAA,CAAaN,EAAOK,GAClB4B,KAAKL,kBAAkB5B,GAASK,CAClC,EACAY,aAAAA,CAAcJ,GACZD,EAAgB,CAAEE,OAAQ,CAAED,kBAAkBuC,KAAK,EAAGtD,WACpD,IAAIP,EAAa,CACfC,KAAM,CACJuD,GAAIjD,EAAKuD,QACT5D,KAAMK,EAAKwD,UACXC,MAAOzD,EAAK0D,QAAQC,OAEtB3D,KAAMA,EAAK0D,QAAQE,KAAKlE,MAE1BM,EAAK0D,QAAQE,KAAKlE,KAAKmE,QAAQC,IAC7BA,EAAIb,GAAKa,EAAIC,SACbD,EAAInE,KAAOmE,EAAIE,WACfF,EAAInD,QAASsD,EAAAA,EAAAA,GAAiBH,EAAII,QAClCJ,EAAIxD,KAAO,gBAAkBwD,EAAIb,KAEnCd,KAAKgC,gBAAgB,CACnBC,MAAO,oBACPpE,KAAMP,IAER0C,KAAKkC,eAET,K,UErGJ,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O,qCCRA,KACEC,OAAAA,GACErC,KAAKkC,aACP,EACAjB,QAAS,KACJC,EAAAA,EAAAA,IAAa,CAAC,oBACjBF,YAAAA,GACEhB,KAAKgC,gBAAgB,CACnBC,MAAO,iBACPpE,MAAM,GAEV,EACAqE,WAAAA,GACElC,KAAKgC,gBAAgB,CACnBC,MAAO,iBACPpE,MAAM,GAEV,EACAkD,uBAAAA,GACEf,KAAKgC,gBAAgB,CACnBC,MAAO,wBACPpE,KAAM,2BAEV,EACAyE,oBAAAA,GACEtC,KAAKgC,gBAAgB,CACnBC,MAAO,wBACPpE,KAAM,wBAEV,EACA0E,4BAAAA,GACEvC,KAAKgC,gBAAgB,CACnBC,MAAO,wBACPpE,KAAM,iCAEV,EACA2E,2BAAAA,GACExC,KAAKgC,gBAAgB,CACnBC,MAAO,wBACPpE,KAAM,gCAEV,G,wHCzCFb,EAAAA,EAAAA,IAA4F,MAAxFF,MAAM,+BAAgC2F,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEtF,EAAAuF,MAAM,QAAQC,UAAU,O,QAAOxF,EAAAD,OAAK,E,CAMvF,OAAe+B,EAAAA,EAAAA,IAAgB,CAC7B2D,MAAO,CAAC,SACRtF,KAAM,iBAENuB,MAAO,CACL3B,MAAO,CACL2F,KAAMC,OACNC,UACE,MAAO,EACT,M,UCTN,MAAMd,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://kugou/./src/views/singer/SingerList.vue","webpack://kugou/./src/requests/singerList.js","webpack://kugou/./src/views/singer/SingerList.vue?a693","webpack://kugou/./src/mixins/loading.js","webpack://kugou/./src/components/PubModuleTitle.vue","webpack://kugou/./src/components/PubModuleTitle.vue?6e2e"],"sourcesContent":["<template>\r\n  <section class=\"singer_list\">\r\n    <PubModuleTitle :title=\"singerList.info.name\"/>\r\n    <ul class=\"singer_list__list\" ref=\"lazyLoadRoot\">\r\n      <li\r\n        class=\"singer_list__item main_border_bottom\"\r\n        v-for=\"(item,index) in singerList.data\"\r\n        :key=\"index\"\r\n      >\r\n        <router-link :to=\"item.path\" class=\"singer_list__link\">\r\n          <img\r\n            class=\"singer_list__img lazy_image\"\r\n            :ref=\"el => saveImageRef(index, el)\"\r\n            :src=\"logo__grey\"\r\n            :data-src=\"item.imgUrl\"\r\n          >\r\n          <div class=\"singer_list__name\">{{item.name}}</div>\r\n        </router-link>\r\n      </li>\r\n    </ul>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, nextTick } from 'vue';\r\n\r\nimport PubModuleTitle from '@/components/PubModuleTitle'\r\nimport { fetchSingerList } from '../../requests/singerList'\r\nimport loading from '../../mixins/loading'\r\nimport { lazyLoad } from '@/utils'\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport replaceSizeInUrl from '@/utils/replaceSizeInUrl'\r\nexport default defineComponent({\r\n  name: 'SingerList',\r\n  mixins: [loading],\r\n\r\n  components: {\r\n    PubModuleTitle\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('images', ['logo__grey']),\r\n    ...mapState('singer', ['singerList']),\r\n    ...mapState('loading', {\r\n      isLoadingShow: 'isShow'\r\n    })\r\n  },\r\n  data() {\r\n    return {\r\n      lazyImageElements: []\r\n    }\r\n  },\r\n  watch: {\r\n    'singerList.data': {\r\n      handler: function(newArray) {\r\n        if (newArray.length === 0) {\r\n          return\r\n        }\r\n        this.lazyImageElements = newArray.map(() => null)\r\n        nextTick(() =>\r\n          lazyLoad(this.lazyImageElements, { root: this.$refs.lazyLoadRoot })\r\n        )\r\n      },\r\n      immediate: true,\r\n      deep: true\r\n    }\r\n  },\r\n\r\n  created() {\r\n    // todo add scrollRemember\r\n    let singerListId = this.$route.path.split('/').pop()\r\n    if (Number(singerListId) !== this.singerList.info.id) {\r\n      this.setLoadingExcludeHeader()\r\n      this.startLoading()\r\n      this.getSingerList(singerListId)\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    /**\r\n     * @description  similar way not working in React. The el may not be updated to the DOM in React.\r\n     */\r\n    saveImageRef(index, el) {\r\n      this.lazyImageElements[index] = el\r\n    },\r\n    getSingerList(singerListId) {\r\n      fetchSingerList({ params: { singerListId } }).then(({ data }) => {\r\n        let singerList = {\r\n          info: {\r\n            id: data.classid,\r\n            name: data.classname,\r\n            count: data.singers.total\r\n          },\r\n          data: data.singers.list.info\r\n        }\r\n        data.singers.list.info.forEach(obj => {\r\n          obj.id = obj.singerid\r\n          obj.name = obj.singername\r\n          obj.imgUrl = replaceSizeInUrl(obj.imgurl)\r\n          obj.path = '/singer/info/' + obj.id\r\n        })\r\n        this.replaceProperty({\r\n          paths: 'singer.singerList',\r\n          data: singerList\r\n        })\r\n        this.stopLoading()\r\n      })\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import (reference) '~@/styles/constant';\r\n.singer_list {\r\n  font-size: 19px;\r\n}\r\n.singer_list__list {\r\n  overflow: scroll;\r\n\r\n  box-sizing: border-box;\r\n  height: calc(100% - @module_title_height);\r\n}\r\n.singer_list__item {\r\n  height: 88px;\r\n}\r\n.singer_list__link {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  height: 100%;\r\n}\r\n.singer_list__img {\r\n  display: block;\r\n\r\n  width: 61px;\r\n  height: 61px;\r\n  margin: 0 18px 0 @padding_width;\r\n}\r\n</style>\r\n","import http from './http'\r\nimport { getSingerList } from '@shared/api/singerList'\r\n\r\nexport const fetchSingerList = ({ singerListId, params = {} } = {}) => {\r\n  let { url, ...props } = getSingerList\r\n  url += '/' + singerListId\r\n  return http({ ...props, url, params: { json: true, ...params } })\r\n}\r\n","import { render } from \"./SingerList.vue?vue&type=template&id=73d8b9e0&scoped=true\"\nimport script from \"./SingerList.vue?vue&type=script&lang=js\"\nexport * from \"./SingerList.vue?vue&type=script&lang=js\"\n\nimport \"./SingerList.vue?vue&type=style&index=0&id=73d8b9e0&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-73d8b9e0\"]])\n\nexport default __exports__","import { mapMutations } from 'vuex'\r\nexport default {\r\n  updated() {\r\n    this.stopLoading()\r\n  },\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    startLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: true\r\n      })\r\n    },\r\n    stopLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: false\r\n      })\r\n    },\r\n    setLoadingExcludeHeader() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_header'\r\n      })\r\n    },\r\n    setLoadingExcludeNav() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_nav'\r\n      })\r\n    },\r\n    setLoadingExcludeModuleTitle() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_module_title'\r\n      })\r\n    },\r\n    setLoadingExcludeSearchForm() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_search_form'\r\n      })\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <h4 class=\"module_title main_box_shadow\" @click=\"$emit('click',arguments[0])\">{{title}}</h4>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n  emits: ['click'],\r\n  name: 'PubModuleTitle',\r\n\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      }\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import (reference) '~@/styles/constant';\r\n.module_title {\r\n  width: 100%;\r\n  height: @module_title_height;\r\n  position: relative;\r\n  z-index: 1;\r\n  text-align: center;\r\n\r\n  background-color: @white;\r\n\r\n  line-height: @module_title_height;\r\n}\r\n</style>\r\n","import { render } from \"./PubModuleTitle.vue?vue&type=template&id=ac7e64d2&scoped=true\"\nimport script from \"./PubModuleTitle.vue?vue&type=script&lang=js\"\nexport * from \"./PubModuleTitle.vue?vue&type=script&lang=js\"\n\nimport \"./PubModuleTitle.vue?vue&type=style&index=0&id=ac7e64d2&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ac7e64d2\"]])\n\nexport default __exports__"],"names":["class","ref","_createElementBlock","_hoisted_1","_createVNode","_component_PubModuleTitle","title","_ctx","singerList","info","name","_createElementVNode","_hoisted_2","_Fragment","_renderList","data","item","index","key","_component_router_link","to","path","el","saveImageRef","src","logo__grey","imgUrl","_hoisted_4","_toDisplayString","fetchSingerList","singerListId","params","url","props","getSingerList","http","json","defineComponent","mixins","loading","components","PubModuleTitle","computed","mapState","isLoadingShow","lazyImageElements","watch","handler","newArray","length","this","map","nextTick","lazyLoad","root","$refs","lazyLoadRoot","immediate","deep","created","$route","split","pop","Number","id","setLoadingExcludeHeader","startLoading","methods","mapMutations","then","classid","classname","count","singers","total","list","forEach","obj","singerid","singername","replaceSizeInUrl","imgurl","replaceProperty","paths","stopLoading","__exports__","render","updated","setLoadingExcludeNav","setLoadingExcludeModuleTitle","setLoadingExcludeSearchForm","onClick","_cache","$event","$emit","arguments","emits","type","String","default"],"sourceRoot":""}