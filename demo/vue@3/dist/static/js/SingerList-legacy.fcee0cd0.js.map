{"version":3,"file":"static/js/SingerList-legacy.fcee0cd0.js","mappings":"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","sources":["webpack://kugou/./src/views/singer/SingerList.vue","webpack://kugou/./src/requests/singerList.js","webpack://kugou/./src/views/singer/SingerList.vue?a693","webpack://kugou/./node_modules/core-js/modules/es.function.name.js","webpack://kugou/./src/mixins/loading.js","webpack://kugou/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://kugou/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://kugou/./src/components/PubModuleTitle.vue","webpack://kugou/./src/components/PubModuleTitle.vue?6e2e"],"sourcesContent":["<template>\r\n  <section class=\"singer_list\">\r\n    <PubModuleTitle :title=\"singerList.info.name\"/>\r\n    <ul class=\"singer_list__list\" ref=\"lazyLoadRoot\">\r\n      <li\r\n        class=\"singer_list__item main_border_bottom\"\r\n        v-for=\"(item,index) in singerList.data\"\r\n        :key=\"index\"\r\n      >\r\n        <router-link :to=\"item.path\" class=\"singer_list__link\">\r\n          <img\r\n            class=\"singer_list__img lazy_image\"\r\n            :ref=\"el => saveImageRef(index, el)\"\r\n            :src=\"logo__grey\"\r\n            :data-src=\"item.imgUrl\"\r\n          >\r\n          <div class=\"singer_list__name\">{{item.name}}</div>\r\n        </router-link>\r\n      </li>\r\n    </ul>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, nextTick } from 'vue';\r\n\r\nimport PubModuleTitle from '@/components/PubModuleTitle'\r\nimport { fetchSingerList } from '../../requests/singerList'\r\nimport loading from '../../mixins/loading'\r\nimport { lazyLoad } from '@/utils'\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport replaceSizeInUrl from '@/utils/replaceSizeInUrl'\r\nexport default defineComponent({\r\n  name: 'SingerList',\r\n  mixins: [loading],\r\n\r\n  components: {\r\n    PubModuleTitle\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('images', ['logo__grey']),\r\n    ...mapState('singer', ['singerList']),\r\n    ...mapState('loading', {\r\n      isLoadingShow: 'isShow'\r\n    })\r\n  },\r\n  data() {\r\n    return {\r\n      lazyImageElements: []\r\n    }\r\n  },\r\n  watch: {\r\n    'singerList.data': {\r\n      handler: function(newArray) {\r\n        if (newArray.length === 0) {\r\n          return\r\n        }\r\n        this.lazyImageElements = newArray.map(() => null)\r\n        nextTick(() =>\r\n          lazyLoad(this.lazyImageElements, { root: this.$refs.lazyLoadRoot })\r\n        )\r\n      },\r\n      immediate: true,\r\n      deep: true\r\n    }\r\n  },\r\n\r\n  created() {\r\n    // todo add scrollRemember\r\n    let singerListId = this.$route.path.split('/').pop()\r\n    if (Number(singerListId) !== this.singerList.info.id) {\r\n      this.setLoadingExcludeHeader()\r\n      this.startLoading()\r\n      this.getSingerList(singerListId)\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    /**\r\n     * @description  similar way not working in React. The el may not be updated to the DOM in React.\r\n     */\r\n    saveImageRef(index, el) {\r\n      this.lazyImageElements[index] = el\r\n    },\r\n    getSingerList(singerListId) {\r\n      fetchSingerList({ params: { singerListId } }).then(({ data }) => {\r\n        let singerList = {\r\n          info: {\r\n            id: data.classid,\r\n            name: data.classname,\r\n            count: data.singers.total\r\n          },\r\n          data: data.singers.list.info\r\n        }\r\n        data.singers.list.info.forEach(obj => {\r\n          obj.id = obj.singerid\r\n          obj.name = obj.singername\r\n          obj.imgUrl = replaceSizeInUrl(obj.imgurl)\r\n          obj.path = '/singer/info/' + obj.id\r\n        })\r\n        this.replaceProperty({\r\n          paths: 'singer.singerList',\r\n          data: singerList\r\n        })\r\n        this.stopLoading()\r\n      })\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import (reference) '~@/styles/constant';\r\n.singer_list {\r\n  font-size: 19px;\r\n}\r\n.singer_list__list {\r\n  overflow: scroll;\r\n\r\n  box-sizing: border-box;\r\n  height: calc(100% - @module_title_height);\r\n}\r\n.singer_list__item {\r\n  height: 88px;\r\n}\r\n.singer_list__link {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  height: 100%;\r\n}\r\n.singer_list__img {\r\n  display: block;\r\n\r\n  width: 61px;\r\n  height: 61px;\r\n  margin: 0 18px 0 @padding_width;\r\n}\r\n</style>\r\n","import http from './http'\r\nimport { getSingerList } from '@shared/api/singerList'\r\n\r\nexport const fetchSingerList = ({ singerListId, params = {} } = {}) => {\r\n  let { url, ...props } = getSingerList\r\n  url += '/' + singerListId\r\n  return http({ ...props, url, params: { json: true, ...params } })\r\n}\r\n","import { render } from \"./SingerList.vue?vue&type=template&id=73d8b9e0&scoped=true\"\nimport script from \"./SingerList.vue?vue&type=script&lang=js\"\nexport * from \"./SingerList.vue?vue&type=script&lang=js\"\n\nimport \"./SingerList.vue?vue&type=style&index=0&id=73d8b9e0&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-73d8b9e0\"]])\n\nexport default __exports__","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineBuiltInAccessor(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","import { mapMutations } from 'vuex'\r\nexport default {\r\n  updated() {\r\n    this.stopLoading()\r\n  },\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    startLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: true\r\n      })\r\n    },\r\n    stopLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: false\r\n      })\r\n    },\r\n    setLoadingExcludeHeader() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_header'\r\n      })\r\n    },\r\n    setLoadingExcludeNav() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_nav'\r\n      })\r\n    },\r\n    setLoadingExcludeModuleTitle() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_module_title'\r\n      })\r\n    },\r\n    setLoadingExcludeSearchForm() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_search_form'\r\n      })\r\n    }\r\n  }\r\n}\r\n","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nexport { _objectWithoutProperties as default };","<template>\r\n  <h4 class=\"module_title main_box_shadow\" @click=\"$emit('click',arguments[0])\">{{title}}</h4>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n  emits: ['click'],\r\n  name: 'PubModuleTitle',\r\n\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      }\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import (reference) '~@/styles/constant';\r\n.module_title {\r\n  width: 100%;\r\n  height: @module_title_height;\r\n  position: relative;\r\n  z-index: 1;\r\n  text-align: center;\r\n\r\n  background-color: @white;\r\n\r\n  line-height: @module_title_height;\r\n}\r\n</style>\r\n","import { render } from \"./PubModuleTitle.vue?vue&type=template&id=ac7e64d2&scoped=true\"\nimport script from \"./PubModuleTitle.vue?vue&type=script&lang=js\"\nexport * from \"./PubModuleTitle.vue?vue&type=script&lang=js\"\n\nimport \"./PubModuleTitle.vue?vue&type=style&index=0&id=ac7e64d2&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ac7e64d2\"]])\n\nexport default __exports__"],"names":["class","ref","_createElementBlock","_hoisted_1","_createVNode","_component_PubModuleTitle","title","_ctx","singerList","info","name","_createElementVNode","_hoisted_2","_Fragment","_renderList","data","item","index","key","_component_router_link","to","path","el","saveImageRef","src","logo__grey","imgUrl","_hoisted_4","_toDisplayString","fetchSingerList","_ref","arguments","length","undefined","singerListId","_ref$params","params","url","getSingerList","props","_objectWithoutProperties","_excluded","http","_objectSpread","json","defineComponent","mixins","loading","components","PubModuleTitle","computed","mapState","isLoadingShow","lazyImageElements","watch","handler","newArray","_this","this","map","nextTick","lazyLoad","root","$refs","lazyLoadRoot","immediate","deep","created","$route","split","pop","Number","id","setLoadingExcludeHeader","startLoading","methods","mapMutations","_this2","then","classid","classname","count","singers","total","list","forEach","obj","singerid","singername","replaceSizeInUrl","imgurl","replaceProperty","paths","stopLoading","__exports__","render","DESCRIPTORS","FUNCTION_NAME_EXISTS","uncurryThis","defineBuiltInAccessor","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable","get","error","updated","setLoadingExcludeNav","setLoadingExcludeModuleTitle","setLoadingExcludeSearchForm","_objectWithoutPropertiesLoose","r","e","t","n","hasOwnProperty","call","indexOf","o","i","objectWithoutPropertiesLoose","Object","getOwnPropertySymbols","propertyIsEnumerable","onClick","_cache","$event","$emit","emits","type","String","default"],"sourceRoot":""}