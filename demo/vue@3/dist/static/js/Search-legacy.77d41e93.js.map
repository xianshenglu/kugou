{"version":3,"file":"static/js/Search-legacy.77d41e93.js","mappings":"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","sources":["webpack://kugou/./src/components/AppMusicList.vue","webpack://kugou/./src/components/AppMusicList.vue?ea2a","webpack://kugou/./node_modules/core-js/internals/same-value.js","webpack://kugou/./src/mixins/loading.js","webpack://kugou/./node_modules/core-js/modules/es.string.search.js","webpack://kugou/./src/components/PubModuleTitle.vue","webpack://kugou/./src/components/PubModuleTitle.vue?6e2e","webpack://kugou/./src/views/search/Search.vue","webpack://kugou/./src/requests/search.js","webpack://kugou/./src/views/search/Search.vue?bd63"],"sourcesContent":["<template>\r\n  <ul class=\"music_list\">\r\n    <li class=\"music_list__item main_border_bottom\" v-for=\"(item,index) in musicList\" :key=\"index\">\r\n      <div class=\"music_list__info\" @click=\"wantPlay(item)\">\r\n        <slot :data=\"index\" name=\"index\" class=\"music_list__index\" @click=\"wantPlay(item)\"></slot>\r\n        <div class=\"music_list__name\">{{item.filename}}</div>\r\n      </div>\r\n      <button class=\"music_list__download\">\r\n        <svg class=\"icon\" aria-hidden=\"true\">\r\n          <use xlink:href=\"#icon-download\"></use>\r\n        </svg>\r\n      </button>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n  name: 'AppMusicList',\r\n\r\n  props: {\r\n    musicList: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    wantPlay(music) {\r\n      this.$store.commit('player/wantPlay', {\r\n        music,\r\n        musicList: this.$props.musicList\r\n      })\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import (reference) '~@/styles/constant';\r\n.music_list {\r\n  padding-left: 19px;\r\n}\r\n\r\n.music_list__item {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: auto;\r\n  min-height: 72px;\r\n  padding: 10px 0;\r\n}\r\n\r\n.music_list__info {\r\n  display: flex;\r\n  width: 100%;\r\n  align-items: center;\r\n}\r\n.music_list__index {\r\n  width: 48px;\r\n  flex: 0 0 auto;\r\n}\r\n.music_list__name {\r\n  width: calc(100% - 48px);\r\n  flex: 1 0 auto;\r\n}\r\n\r\n.music_list__download {\r\n  box-sizing: content-box;\r\n  width: 23px;\r\n  height: 100%;\r\n  padding: 0 @padding_width;\r\n}\r\n</style>\r\n","import { render } from \"./AppMusicList.vue?vue&type=template&id=413d897e&scoped=true\"\nimport script from \"./AppMusicList.vue?vue&type=script&lang=js\"\nexport * from \"./AppMusicList.vue?vue&type=script&lang=js\"\n\nimport \"./AppMusicList.vue?vue&type=style&index=0&id=413d897e&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-413d897e\"]])\n\nexport default __exports__","'use strict';\n// `SameValue` abstract operation\n// https://tc39.es/ecma262/#sec-samevalue\n// eslint-disable-next-line es/no-object-is -- safe\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y ? x !== 0 || 1 / x === 1 / y : x !== x && y !== y;\n};\n","import { mapMutations } from 'vuex'\r\nexport default {\r\n  updated() {\r\n    this.stopLoading()\r\n  },\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    startLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: true\r\n      })\r\n    },\r\n    stopLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: false\r\n      })\r\n    },\r\n    setLoadingExcludeHeader() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_header'\r\n      })\r\n    },\r\n    setLoadingExcludeNav() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_nav'\r\n      })\r\n    },\r\n    setLoadingExcludeModuleTitle() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_module_title'\r\n      })\r\n    },\r\n    setLoadingExcludeSearchForm() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_search_form'\r\n      })\r\n    }\r\n  }\r\n}\r\n","'use strict';\nvar call = require('../internals/function-call');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.es/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = isObject(regexp) ? getMethod(regexp, SEARCH) : undefined;\n      return searcher ? call(searcher, regexp, O) : new RegExp(regexp)[SEARCH](toString(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@search\n    function (string) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(nativeSearch, rx, S);\n\n      if (res.done) return res.value;\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","<template>\r\n  <h4 class=\"module_title main_box_shadow\" @click=\"$emit('click',arguments[0])\">{{title}}</h4>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n  emits: ['click'],\r\n  name: 'PubModuleTitle',\r\n\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      }\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import (reference) '~@/styles/constant';\r\n.module_title {\r\n  width: 100%;\r\n  height: @module_title_height;\r\n  position: relative;\r\n  z-index: 1;\r\n  text-align: center;\r\n\r\n  background-color: @white;\r\n\r\n  line-height: @module_title_height;\r\n}\r\n</style>\r\n","import { render } from \"./PubModuleTitle.vue?vue&type=template&id=ac7e64d2&scoped=true\"\nimport script from \"./PubModuleTitle.vue?vue&type=script&lang=js\"\nexport * from \"./PubModuleTitle.vue?vue&type=script&lang=js\"\n\nimport \"./PubModuleTitle.vue?vue&type=style&index=0&id=ac7e64d2&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ac7e64d2\"]])\n\nexport default __exports__","<template>\r\n  <section class=\"search\">\r\n    <PubModuleTitle :title=\"title\" class=\"search__title\"/>\r\n    <div class=\"search__cont\" ref=\"searchCont\">\r\n      <form class=\"search__form\" @submit.prevent>\r\n        <input\r\n          type=\"text\"\r\n          :placeholder=\"placeholder\"\r\n          class=\"search__input\"\r\n          v-model.trim=\"keyword\"\r\n          @keyup.enter=\"getSearchRes\"\r\n        >\r\n        <button\r\n          :class=\"isSearchResShow?'search__btn search__btn--active':'search__btn'\"\r\n          type=\"button\"\r\n          @click=\"getSearchRes\"\r\n        >{{title}}</button>\r\n      </form>\r\n      <div class=\"search__rec\" v-show=\"isSearchRecShow\">\r\n        <h6 class=\"search__type\">{{searchType}}</h6>\r\n        <ul class=\"search__list\">\r\n          <li\r\n            class=\"search__item main_border_bottom\"\r\n            v-for=\"(item,index) in searchRecArr\"\r\n            :key=\"index\"\r\n            @click=\"keyword=item.keyword;getSearchRes()\"\r\n          >{{item.keyword}}</li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"search__res\" v-show=\"isSearchResShow\">\r\n        <div class=\"search__count\">共有{{searchRes.info.length}}条结果</div>\r\n        <AppMusicList :music-list=\"searchRes.info\" class=\"search__res-list\"/>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\n\r\nimport PubModuleTitle from '@/components/PubModuleTitle'\r\nimport AppMusicList from '@/components/AppMusicList'\r\nimport { fetchHotSearch, fetchSearchResult } from '../../requests/search'\r\nimport bus from '@/eventBus'\r\nimport loading from '../../mixins/loading.js'\r\nimport { mapState, mapMutations } from 'vuex'\r\n\r\nexport default defineComponent({\r\n  name: 'Search',\r\n  mixins: [loading],\r\n\r\n  components: {\r\n    PubModuleTitle,\r\n    AppMusicList\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      title: '搜索',\r\n      searchType: '最近热门',\r\n      placeholder: '歌手/歌名/拼音'\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('search', [\r\n      'searchRecArr',\r\n      'searchRes',\r\n      'isSearchRecShow',\r\n      'isSearchResShow'\r\n    ]),\r\n    keyword: {\r\n      get() {\r\n        return this.$store.state.search.keyword\r\n      },\r\n      set(value) {\r\n        this.replaceProperty({ paths: 'search.keyword', data: value })\r\n      }\r\n    },\r\n    isSearchRecShow: {\r\n      get() {\r\n        return this.$store.state.search.isSearchRecShow\r\n      },\r\n      set(data) {\r\n        this.replaceProperty({ paths: 'search.isSearchRecShow', data })\r\n      }\r\n    },\r\n    isSearchResShow: {\r\n      get() {\r\n        return this.$store.state.search.isSearchResShow\r\n      },\r\n      set(data) {\r\n        this.replaceProperty({ paths: 'search.isSearchResShow', data })\r\n      }\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.init()\r\n  },\r\n\r\n  mounted() {\r\n    bus.$on('searchBtnClicked', this.scrollTopSearchCont)\r\n    this.initQqBugDetect()\r\n  },\r\n\r\n  unmounted() {\r\n    bus.$off('searchBtnClicked', this.scrollTopSearchCont)\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    init() {\r\n      let queryKeyword = this.$route.query.keyword\r\n      let isKeywordValid =\r\n        typeof this.keyword === 'string' && this.keyword !== ''\r\n      let isQueryKeywordValid =\r\n        typeof queryKeyword === 'string' && queryKeyword !== ''\r\n      if (isQueryKeywordValid && queryKeyword !== this.keyword) {\r\n        this.keyword = queryKeyword\r\n        this.getSearchRes()\r\n      } else if (isKeywordValid) {\r\n        this.isSearchRecShow = false\r\n        this.isSearchResShow = true\r\n      } else {\r\n        this.getSearchRec()\r\n      }\r\n    },\r\n    getSearchRec() {\r\n      if (this.searchRecArr.length !== 0) {\r\n        this.isSearchResShow = false\r\n        this.isSearchRecShow = true\r\n        return\r\n      }\r\n      this.setLoadingExcludeSearchForm()\r\n      this.startLoading()\r\n      fetchHotSearch()\r\n        .then(({ data }) => {\r\n          this.replaceProperty({\r\n            paths: 'search.searchRecArr',\r\n            data: data.data.info\r\n          })\r\n          this.stopLoading()\r\n          this.isSearchResShow = false\r\n          this.isSearchRecShow = true\r\n        })\r\n        .catch(err => {\r\n          alert(err)\r\n        })\r\n    },\r\n    getSearchRes() {\r\n      if (this.keyword === '') {\r\n        return\r\n      }\r\n      this.$router.replace({ query: { keyword: this.keyword } })\r\n      this.setLoadingExcludeSearchForm()\r\n      this.startLoading()\r\n      fetchSearchResult({ params: { keyword: this.keyword } }).then(res => {\r\n        let data = res.data.data\r\n        this.replaceProperty({\r\n          paths: 'search.searchRes',\r\n          data\r\n        })\r\n        this.isSearchRecShow = false\r\n        this.isSearchResShow = true\r\n        this.stopLoading()\r\n      })\r\n    },\r\n    initQqBugDetect() {\r\n      let search__cont = document.getElementsByClassName('search__cont')[0]\r\n      window.search__cont = search__cont\r\n      //! bug with qq browser\r\n      let listener = function() {\r\n        if (search__cont.scrollTop) {\r\n          // console.log(event.type, search__cont.scrollTop)\r\n        }\r\n      }\r\n      window.addEventListener('touchstart', listener)\r\n      window.addEventListener('touchmove', listener)\r\n    },\r\n    scrollTopSearchCont() {\r\n      if (this.$refs.searchCont) {\r\n        //todo smooth scroll\r\n        this.$refs.searchCont.scrollTop = 0\r\n      }\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import (reference) '~@/styles/constant';\r\n.search {\r\n  box-sizing: border-box;\r\n}\r\n.search__cont {\r\n  overflow: scroll;\r\n\r\n  box-sizing: border-box;\r\n  height: calc(100% - @module_title_height);\r\n}\r\n.search__form {\r\n  box-sizing: border-box;\r\n  height: @search_form_height;\r\n  padding: @padding_width;\r\n\r\n  background-color: @white-1;\r\n}\r\n.search__input,\r\n.search__btn {\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n\r\n  border-radius: 5px;\r\n}\r\n\r\n.search__input {\r\n  width: 277px;\r\n  margin-right: 10px;\r\n  padding: 7px 1px 7px 31px;\r\n\r\n  border: 1px solid @white-2;\r\n  background-color: @white;\r\n}\r\n.search__btn {\r\n  width: 60px;\r\n\r\n  color: @white-to-black;\r\n  background-color: @white-2;\r\n}\r\n.search__btn--active {\r\n  color: @white;\r\n  background: @theme;\r\n}\r\n.search__type {\r\n  height: 51px;\r\n  padding-left: 16px;\r\n\r\n  color: @theme;\r\n  border-bottom: 1px solid @white-3;\r\n\r\n  font-size: 16px;\r\n  line-height: 51px;\r\n}\r\n.search__item {\r\n  height: 64px;\r\n  margin-left: 16px;\r\n\r\n  font-size: 20px;\r\n  line-height: 64px;\r\n}\r\n.search__count {\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  padding-left: 16px;\r\n\r\n  color: @white-to-black;\r\n  background-color: @white-2;\r\n\r\n  font-size: 14px;\r\n  line-height: 28px;\r\n}\r\n.search__res-list {\r\n  overflow-y: scroll;\r\n}\r\n</style>\r\n","import { getHotSearch, getSearchResult } from '@shared/api/search'\r\nimport http from './http'\r\n\r\nexport const fetchHotSearch = ({ params = {} } = {}) => {\r\n  return http({\r\n    ...getHotSearch,\r\n    params: { format: 'json', plat: 0, count: 30, ...params }\r\n  })\r\n}\r\nexport const fetchSearchResult = ({ params = {} } = {}) => {\r\n  return http({\r\n    ...getSearchResult,\r\n    params: { format: 'json', page: 1, pagesize: 20, showtype: 1, ...params }\r\n  })\r\n}\r\n","import { render } from \"./Search.vue?vue&type=template&id=9a8b3bf6&scoped=true\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=9a8b3bf6&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9a8b3bf6\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_Fragment","_renderList","_ctx","musicList","item","index","key","onClick","$event","wantPlay","_renderSlot","$slots","data","_hoisted_3","_toDisplayString","filename","_hoisted_4","defineComponent","name","props","type","Array","default","methods","music","this","$store","commit","$props","__exports__","render","module","exports","Object","is","x","y","updated","stopLoading","_objectSpread","mapMutations","startLoading","replaceProperty","paths","setLoadingExcludeHeader","setLoadingExcludeNav","setLoadingExcludeModuleTitle","setLoadingExcludeSearchForm","call","fixRegExpWellKnownSymbolLogic","anObject","isObject","requireObjectCoercible","sameValue","toString","getMethod","regExpExec","SEARCH","nativeSearch","maybeCallNative","regexp","O","searcher","undefined","RegExp","string","rx","S","res","done","value","previousLastIndex","lastIndex","result","_cache","$emit","arguments","title","emits","String","ref","_createVNode","_component_PubModuleTitle","_hoisted_2","onSubmit","_withModifiers","placeholder","keyword","onKeyup","_withKeys","getSearchRes","apply","_normalizeClass","isSearchResShow","_hoisted_5","searchType","_hoisted_6","searchRecArr","_hoisted_7","isSearchRecShow","_hoisted_8","_hoisted_9","searchRes","info","length","_component_AppMusicList","fetchHotSearch","_ref","_ref$params","params","http","getHotSearch","format","plat","count","fetchSearchResult","_ref2","_ref2$params","getSearchResult","page","pagesize","showtype","mixins","loading","components","PubModuleTitle","AppMusicList","computed","mapState","get","state","search","set","created","init","mounted","bus","$on","scrollTopSearchCont","initQqBugDetect","unmounted","$off","queryKeyword","$route","query","isKeywordValid","isQueryKeywordValid","getSearchRec","_this","then","catch","err","alert","_this2","$router","replace","search__cont","document","getElementsByClassName","window","listener","scrollTop","addEventListener","$refs","searchCont"],"sourceRoot":""}