"use strict";(self["webpackChunkkugou"]=self["webpackChunkkugou"]||[]).push([[763],{1719:function(e,t,a){a.d(t,{A:function(){return d}});var s=a(6913);(0,s.Qi)("data-v-413d897e");var r={class:"music_list"},i=["onClick"],n={class:"music_list__name"},c=(0,s.Lk)("button",{class:"music_list__download"},[(0,s.Lk)("svg",{class:"icon","aria-hidden":"true"},[(0,s.Lk)("use",{"xlink:href":"#icon-download"})])],-1);function o(e,t,a,o,h,u){return(0,s.uX)(),(0,s.CE)("ul",r,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.musicList,function(t,a){return(0,s.uX)(),(0,s.CE)("li",{class:"music_list__item main_border_bottom",key:a},[(0,s.Lk)("div",{class:"music_list__info",onClick:function(a){return e.wantPlay(t)}},[(0,s.RG)(e.$slots,"index",{data:a,class:"music_list__index",onClick:function(a){return e.wantPlay(t)}},void 0,!0),(0,s.Lk)("div",n,(0,s.v_)(t.filename),1)],8,i),c])}),128))])}(0,s.jt)();var h=(0,s.pM)({name:"AppMusicList",props:{musicList:{type:Array,default:function(){return[]}}},methods:{wantPlay:function(e){this.$store.commit("player/wantPlay",{music:e,musicList:this.$props.musicList})}}}),u=a(6262);const l=(0,u.A)(h,[["render",o],["__scopeId","data-v-413d897e"]]);var d=l},3470:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}},5382:function(e,t,a){var s=a(1034),r=a(6278);t.A={updated:function(){this.stopLoading()},methods:(0,s.A)((0,s.A)({},(0,r.PY)(["replaceProperty"])),{},{startLoading:function(){this.replaceProperty({paths:"loading.isShow",data:!0})},stopLoading:function(){this.replaceProperty({paths:"loading.isShow",data:!1})},setLoadingExcludeHeader:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_header"})},setLoadingExcludeNav:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_nav"})},setLoadingExcludeModuleTitle:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_module_title"})},setLoadingExcludeSearchForm:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_search_form"})}})}},5746:function(e,t,a){var s=a(9565),r=a(9228),i=a(8551),n=a(34),c=a(7750),o=a(3470),h=a(655),u=a(5966),l=a(6682);r("search",function(e,t,a){return[function(t){var a=c(this),r=n(t)?u(t,e):void 0;return r?s(r,t,a):new RegExp(t)[e](h(a))},function(e){var s=i(this),r=h(e),n=a(t,s,r);if(n.done)return n.value;var c=s.lastIndex;o(c,0)||(s.lastIndex=0);var u=l(s,r);return o(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]})},7524:function(e,t,a){a.d(t,{A:function(){return o}});var s=a(6913);function r(e,t,a,r,i,n){var c=arguments;return(0,s.uX)(),(0,s.CE)("h4",{class:"module_title main_box_shadow",onClick:t[0]||(t[0]=function(t){return e.$emit("click",c[0])})},(0,s.v_)(e.title),1)}var i=(0,s.pM)({emits:["click"],name:"PubModuleTitle",props:{title:{type:String,default:function(){return""}}}}),n=a(6262);const c=(0,n.A)(i,[["render",r],["__scopeId","data-v-ac7e64d2"]]);var o=c},9256:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var s=a(6913);(0,s.Qi)("data-v-9a8b3bf6");var r={class:"search"},i={class:"search__cont",ref:"searchCont"},n=["placeholder"],c={class:"search__rec"},o={class:"search__type"},h={class:"search__list"},u=["onClick"],l={class:"search__res"},d={class:"search__count"};function p(e,t,a,p,f,_){var m=(0,s.g2)("PubModuleTitle"),v=(0,s.g2)("AppMusicList");return(0,s.uX)(),(0,s.CE)("section",r,[(0,s.bF)(m,{title:e.title,class:"search__title"},null,8,["title"]),(0,s.Lk)("div",i,[(0,s.Lk)("form",{class:"search__form",onSubmit:t[3]||(t[3]=(0,s.D$)(function(){},["prevent"]))},[(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:e.placeholder,class:"search__input","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.keyword=t}),onKeyup:t[1]||(t[1]=(0,s.jR)(function(){return e.getSearchRes&&e.getSearchRes.apply(e,arguments)},["enter"]))},null,40,n),[[s.Jo,e.keyword,void 0,{trim:!0}]]),(0,s.Lk)("button",{class:(0,s.C4)(e.isSearchResShow?"search__btn search__btn--active":"search__btn"),type:"button",onClick:t[2]||(t[2]=function(){return e.getSearchRes&&e.getSearchRes.apply(e,arguments)})},(0,s.v_)(e.title),3)],32),(0,s.bo)((0,s.Lk)("div",c,[(0,s.Lk)("h6",o,(0,s.v_)(e.searchType),1),(0,s.Lk)("ul",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.searchRecArr,function(t,a){return(0,s.uX)(),(0,s.CE)("li",{class:"search__item main_border_bottom",key:a,onClick:function(a){e.keyword=t.keyword,e.getSearchRes()}},(0,s.v_)(t.keyword),9,u)}),128))])],512),[[s.aG,e.isSearchRecShow]]),(0,s.bo)((0,s.Lk)("div",l,[(0,s.Lk)("div",d,"共有"+(0,s.v_)(e.searchRes.info.length)+"条结果",1),(0,s.bF)(v,{"music-list":e.searchRes.info,class:"search__res-list"},null,8,["music-list"])],512),[[s.aG,e.isSearchResShow]])],512)])}(0,s.jt)();var f=a(1034),_=(a(7495),a(5440),a(5746),a(7524)),m=a(1719),v=a(9023),S=a(5984),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,a=void 0===t?{}:t;return(0,S.A)((0,f.A)((0,f.A)({},v.G),{},{params:(0,f.A)({format:"json",plat:0,count:30},a)}))},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,a=void 0===t?{}:t;return(0,S.A)((0,f.A)((0,f.A)({},v.O),{},{params:(0,f.A)({format:"json",page:1,pagesize:20,showtype:1},a)}))},g=a(2122),k=a(5382),R=a(6278),L=(0,s.pM)({name:"Search",mixins:[k.A],components:{PubModuleTitle:_.A,AppMusicList:m.A},data:function(){return{title:"搜索",searchType:"最近热门",placeholder:"歌手/歌名/拼音"}},computed:(0,f.A)((0,f.A)({},(0,R.aH)("search",["searchRecArr","searchRes","isSearchRecShow","isSearchResShow"])),{},{keyword:{get:function(){return this.$store.state.search.keyword},set:function(e){this.replaceProperty({paths:"search.keyword",data:e})}},isSearchRecShow:{get:function(){return this.$store.state.search.isSearchRecShow},set:function(e){this.replaceProperty({paths:"search.isSearchRecShow",data:e})}},isSearchResShow:{get:function(){return this.$store.state.search.isSearchResShow},set:function(e){this.replaceProperty({paths:"search.isSearchResShow",data:e})}}}),created:function(){this.init()},mounted:function(){g.A.$on("searchBtnClicked",this.scrollTopSearchCont),this.initQqBugDetect()},unmounted:function(){g.A.$off("searchBtnClicked",this.scrollTopSearchCont)},methods:(0,f.A)((0,f.A)({},(0,R.PY)(["replaceProperty"])),{},{init:function(){var e=this.$route.query.keyword,t="string"===typeof this.keyword&&""!==this.keyword,a="string"===typeof e&&""!==e;a&&e!==this.keyword?(this.keyword=e,this.getSearchRes()):t?(this.isSearchRecShow=!1,this.isSearchResShow=!0):this.getSearchRec()},getSearchRec:function(){var e=this;if(0!==this.searchRecArr.length)return this.isSearchResShow=!1,void(this.isSearchRecShow=!0);this.setLoadingExcludeSearchForm(),this.startLoading(),w().then(function(t){var a=t.data;e.replaceProperty({paths:"search.searchRecArr",data:a.data.info}),e.stopLoading(),e.isSearchResShow=!1,e.isSearchRecShow=!0}).catch(function(e){alert(e)})},getSearchRes:function(){var e=this;""!==this.keyword&&(this.$router.replace({query:{keyword:this.keyword}}),this.setLoadingExcludeSearchForm(),this.startLoading(),y({params:{keyword:this.keyword}}).then(function(t){var a=t.data.data;e.replaceProperty({paths:"search.searchRes",data:a}),e.isSearchRecShow=!1,e.isSearchResShow=!0,e.stopLoading()}))},initQqBugDetect:function(){var e=document.getElementsByClassName("search__cont")[0];window.search__cont=e;
//! bug with qq browser
var t=function(){e.scrollTop};window.addEventListener("touchstart",t),window.addEventListener("touchmove",t)},scrollTopSearchCont:function(){this.$refs.searchCont&&(this.$refs.searchCont.scrollTop=0)}})}),A=a(6262);const C=(0,A.A)(L,[["render",p],["__scopeId","data-v-9a8b3bf6"]]);var b=C}}]);
//# sourceMappingURL=Search-legacy.77d41e93.js.map