{"version":3,"file":"static/js/RankInfo.943ad154.js","mappings":"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","sources":["webpack://kugou/./src/views/rank/RankInfo.vue","webpack://kugou/./src/requests/rankInfo.js","webpack://kugou/./src/views/rank/RankInfo.vue?cbae","webpack://kugou/./src/components/AppMusicList.vue","webpack://kugou/./src/components/AppMusicList.vue?ea2a","webpack://kugou/./src/components/PubModuleHead.vue","webpack://kugou/./src/components/PubModuleHead.vue?25b5","webpack://kugou/./src/mixins/loading.js"],"sourcesContent":["<template>\r\n  <section class=\"rank_info\">\r\n    <PubModuleHead :module-head-info=\"getModuleHeadInfo\">\r\n      <template v-slot:moduleUpdateTime>\r\n        <time class=\"rank_info__update_time\">{{ msg }} {{ formatDate }}</time>\r\n      </template>\r\n    </PubModuleHead>\r\n    <AppMusicList :music-list=\"getMusicList\">\r\n      <template v-slot:index=\"props\">\r\n        <div\r\n          :class=\"'rank_info__index ' + 'rank_info__index' + (props.data + 1)\"\r\n        >\r\n          {{ props.data + 1 }}\r\n        </div>\r\n      </template>\r\n    </AppMusicList>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\n\r\nimport PubModuleHead from '@/components/PubModuleHead'\r\nimport AppMusicList from '@/components/AppMusicList'\r\nimport { fetchRankInfo } from '@/requests/rankInfo'\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport loading from '../../mixins/loading'\r\nimport replaceSizeInUrl from '@/utils/replaceSizeInUrl'\r\nexport default defineComponent({\r\n  name: 'RankInfo',\r\n  mixins: [loading],\r\n\r\n  components: {\r\n    PubModuleHead,\r\n    AppMusicList\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      msg: '上次更新时间'\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('rank', ['rankInfo']),\r\n    getModuleHeadInfo() {\r\n      return {\r\n        imgUrl: replaceSizeInUrl(this.rankInfo.info.banner7url),\r\n        name: this.rankInfo.info.rankname\r\n      }\r\n    },\r\n    getMusicList() {\r\n      return this.rankInfo.songs.list\r\n    },\r\n    formatDate() {\r\n      let date = new Date(this.rankInfo.songs.timestamp * 1000)\r\n      return (\r\n        date.getFullYear() +\r\n        '-' +\r\n        String(date.getMonth() + 1).padStart(2, '0') +\r\n        '-' +\r\n        String(date.getDate()).padStart(2, '0')\r\n      )\r\n    }\r\n  },\r\n\r\n  created() {\r\n    let rankId = this.$route.path.split('/').pop()\r\n    this.setLoadingExcludeHeader()\r\n    this.startLoading()\r\n    this.getRankInfo(rankId)\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    getRankInfo(rankId) {\r\n      fetchRankInfo({ params: { rankid: rankId } }).then(res => {\r\n        let rankInfo = {\r\n          info: res.data.info,\r\n          songs: res.data.songs\r\n        }\r\n        this.replaceProperty({\r\n          paths: 'rank.rankInfo',\r\n          data: rankInfo\r\n        })\r\n        this.stopLoading()\r\n      })\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import (reference) '~@/styles/constant';\r\n.rank_info__update_time {\r\n  align-self: flex-end;\r\n\r\n  width: 100%;\r\n  height: 50px;\r\n  padding-left: 16px;\r\n\r\n  background: linear-gradient(\r\n    to top,\r\n    rgba(0, 0, 0, 0.6) 5%,\r\n    rgba(107, 107, 107, 0.1) 90%,\r\n    rgba(255, 255, 255, 0)\r\n  );\r\n\r\n  font-size: @font_size_med;\r\n  line-height: 2.3;\r\n}\r\n\r\n.rank_info__index {\r\n  width: 27px;\r\n  height: 19px;\r\n  margin-right: 10px;\r\n\r\n  text-align: center;\r\n\r\n  color: @white-to-black;\r\n  border-radius: 9px;\r\n\r\n  font-size: @font_size_small;\r\n  line-height: 19px;\r\n}\r\n\r\n.rank_info__index1 {\r\n  color: @white;\r\n  background-color: @red;\r\n}\r\n\r\n.rank_info__index2 {\r\n  color: @white;\r\n  background-color: @orange;\r\n}\r\n\r\n.rank_info__index3 {\r\n  color: @white;\r\n  background-color: @yellow;\r\n}\r\n</style>\r\n","import http from './http'\r\nimport { getRankInfo } from '@shared/api/rankInfo'\r\n\r\nexport const fetchRankInfo = ({ params = {} } = {}) => {\r\n  return http({ ...getRankInfo, params: { json: true, page: 1, ...params } })\r\n}\r\n","import { render } from \"./RankInfo.vue?vue&type=template&id=af23c29a&scoped=true\"\nimport script from \"./RankInfo.vue?vue&type=script&lang=js\"\nexport * from \"./RankInfo.vue?vue&type=script&lang=js\"\n\nimport \"./RankInfo.vue?vue&type=style&index=0&id=af23c29a&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-af23c29a\"]])\n\nexport default __exports__","<template>\r\n  <ul class=\"music_list\">\r\n    <li class=\"music_list__item main_border_bottom\" v-for=\"(item,index) in musicList\" :key=\"index\">\r\n      <div class=\"music_list__info\" @click=\"wantPlay(item)\">\r\n        <slot :data=\"index\" name=\"index\" class=\"music_list__index\" @click=\"wantPlay(item)\"></slot>\r\n        <div class=\"music_list__name\">{{item.filename}}</div>\r\n      </div>\r\n      <button class=\"music_list__download\">\r\n        <svg class=\"icon\" aria-hidden=\"true\">\r\n          <use xlink:href=\"#icon-download\"></use>\r\n        </svg>\r\n      </button>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n  name: 'AppMusicList',\r\n\r\n  props: {\r\n    musicList: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    wantPlay(music) {\r\n      this.$store.commit('player/wantPlay', {\r\n        music,\r\n        musicList: this.$props.musicList\r\n      })\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import (reference) '~@/styles/constant';\r\n.music_list {\r\n  padding-left: 19px;\r\n}\r\n\r\n.music_list__item {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: auto;\r\n  min-height: 72px;\r\n  padding: 10px 0;\r\n}\r\n\r\n.music_list__info {\r\n  display: flex;\r\n  width: 100%;\r\n  align-items: center;\r\n}\r\n.music_list__index {\r\n  width: 48px;\r\n  flex: 0 0 auto;\r\n}\r\n.music_list__name {\r\n  width: calc(100% - 48px);\r\n  flex: 1 0 auto;\r\n}\r\n\r\n.music_list__download {\r\n  box-sizing: content-box;\r\n  width: 23px;\r\n  height: 100%;\r\n  padding: 0 @padding_width;\r\n}\r\n</style>\r\n","import { render } from \"./AppMusicList.vue?vue&type=template&id=413d897e&scoped=true\"\nimport script from \"./AppMusicList.vue?vue&type=script&lang=js\"\nexport * from \"./AppMusicList.vue?vue&type=script&lang=js\"\n\nimport \"./AppMusicList.vue?vue&type=style&index=0&id=413d897e&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-413d897e\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div class=\"module__head\" :style=\"'background-image:url('+moduleHeadInfo.imgUrl+')'\">\r\n      <h6 class=\"module__title\">{{moduleHeadInfo.name}}</h6>\r\n      <slot name=\"moduleUpdateTime\"></slot>\r\n    </div>\r\n    <slot name=\"moduleDes\"></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n  name: 'PubModuleHead',\r\n\r\n  props: {\r\n    moduleHeadInfo: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import (reference) '~@/styles/constant';\r\n.module__head {\r\n  display: flex;\r\n\r\n  height: 225px;\r\n\r\n  color: @white;\r\n  background-position: center center;\r\n  background-size: cover;\r\n}\r\n\r\n.module__title {\r\n  position: fixed;\r\n  top: @header_height;\r\n  left: 50%;\r\n  font-size: inherit;\r\n  width: 100%;\r\n  height: @module_title_height;\r\n\r\n  transform: translateX(-50%);\r\n  text-align: center;\r\n\r\n  background: linear-gradient(\r\n    to bottom,\r\n    rgba(0, 0, 0, 0.6) 5%,\r\n    rgba(107, 107, 107, 0.1) 90%,\r\n    rgba(255, 255, 255, 0)\r\n  );\r\n\r\n  line-height: @module_title_height;\r\n}\r\n</style>\r\n","import { render } from \"./PubModuleHead.vue?vue&type=template&id=168a44dd&scoped=true\"\nimport script from \"./PubModuleHead.vue?vue&type=script&lang=js\"\nexport * from \"./PubModuleHead.vue?vue&type=script&lang=js\"\n\nimport \"./PubModuleHead.vue?vue&type=style&index=0&id=168a44dd&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-168a44dd\"]])\n\nexport default __exports__","import { mapMutations } from 'vuex'\r\nexport default {\r\n  updated() {\r\n    this.stopLoading()\r\n  },\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    startLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: true\r\n      })\r\n    },\r\n    stopLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: false\r\n      })\r\n    },\r\n    setLoadingExcludeHeader() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_header'\r\n      })\r\n    },\r\n    setLoadingExcludeNav() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_nav'\r\n      })\r\n    },\r\n    setLoadingExcludeModuleTitle() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_module_title'\r\n      })\r\n    },\r\n    setLoadingExcludeSearchForm() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_search_form'\r\n      })\r\n    }\r\n  }\r\n}\r\n"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_PubModuleHead","_ctx","getModuleHeadInfo","moduleUpdateTime","_withCtx","_createElementVNode","_hoisted_2","_toDisplayString","msg","formatDate","_component_AppMusicList","getMusicList","index","props","_normalizeClass","data","fetchRankInfo","params","http","getRankInfo","json","page","defineComponent","name","mixins","loading","components","PubModuleHead","AppMusicList","computed","mapState","imgUrl","replaceSizeInUrl","this","rankInfo","info","banner7url","rankname","songs","list","date","Date","timestamp","getFullYear","String","getMonth","padStart","getDate","created","rankId","$route","path","split","pop","setLoadingExcludeHeader","startLoading","methods","mapMutations","rankid","then","res","replaceProperty","paths","stopLoading","__exports__","render","_Fragment","_renderList","musicList","item","key","onClick","$event","wantPlay","_renderSlot","$slots","_hoisted_3","filename","_hoisted_4","type","Array","default","music","$store","commit","$props","style","_normalizeStyle","moduleHeadInfo","undefined","Object","updated","setLoadingExcludeNav","setLoadingExcludeModuleTitle","setLoadingExcludeSearchForm"],"sourceRoot":""}