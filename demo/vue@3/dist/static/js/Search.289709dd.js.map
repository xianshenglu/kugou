{"version":3,"file":"static/js/Search.289709dd.js","mappings":"4LACMA,MAAM,c,iBAICA,MAAM,oB,GAEbC,EAAAA,EAAAA,IAIS,UAJDD,MAAM,wBAAsB,EAClCC,EAAAA,EAAAA,IAEM,OAFDD,MAAM,OAAO,cAAY,Q,EAC5BC,EAAAA,EAAAA,IAAuC,OAAlC,aAAW,uB,6CARxBC,EAAAA,EAAAA,IAYK,KAZLC,EAYK,G,aAXHD,EAAAA,EAAAA,IAUKE,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAVkEC,EAAAC,UAAS,CAAxBC,EAAKC,M,WAA7DP,EAAAA,EAAAA,IAUK,MAVDF,MAAM,sCAAyEU,IAAKD,G,EACtFR,EAAAA,EAAAA,IAGM,OAHDD,MAAM,mBAAoBW,QAAKC,GAAEN,EAAAO,SAASL,I,EAC7CM,EAAAA,EAAAA,IAA0FR,EAAAS,OAAA,SAAnFC,KAAMP,EAAoBT,MAAM,oBAAqBW,QAAKC,GAAEN,EAAAO,SAASL,S,OAC5EP,EAAAA,EAAAA,IAAqD,MAArDgB,GAAqDC,EAAAA,EAAAA,IAArBV,EAAKW,UAAQ,I,KAE/CC,M,mBAYN,OAAeC,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,eAENC,MAAO,CACLhB,UAAW,CACTiB,KAAMC,MACNC,UACE,MAAO,EACT,IAIJC,QAAS,CACPd,QAAAA,CAASe,GACPC,KAAKC,OAAOC,OAAO,kBAAmB,CACpCH,QACArB,UAAWsB,KAAKG,OAAOzB,WAE3B,K,UC9BJ,MAAM0B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O,qCCRA,KACEC,OAAAA,GACEN,KAAKO,aACP,EACAT,QAAS,KACJU,EAAAA,EAAAA,IAAa,CAAC,oBACjBC,YAAAA,GACET,KAAKU,gBAAgB,CACnBC,MAAO,iBACPxB,MAAM,GAEV,EACAoB,WAAAA,GACEP,KAAKU,gBAAgB,CACnBC,MAAO,iBACPxB,MAAM,GAEV,EACAyB,uBAAAA,GACEZ,KAAKU,gBAAgB,CACnBC,MAAO,wBACPxB,KAAM,2BAEV,EACA0B,oBAAAA,GACEb,KAAKU,gBAAgB,CACnBC,MAAO,wBACPxB,KAAM,wBAEV,EACA2B,4BAAAA,GACEd,KAAKU,gBAAgB,CACnBC,MAAO,wBACPxB,KAAM,iCAEV,EACA4B,2BAAAA,GACEf,KAAKU,gBAAgB,CACnBC,MAAO,wBACPxB,KAAM,gCAEV,G,+GCzCFd,EAAAA,EAAAA,IAA4F,MAAxFF,MAAM,+BAAgCW,QAAKkC,EAAA,KAAAA,EAAA,GAAAjC,GAAEN,EAAAwC,MAAM,QAAQC,UAAU,O,QAAOzC,EAAA0C,OAAK,E,CAMvF,OAAe3B,EAAAA,EAAAA,IAAgB,CAC7B4B,MAAO,CAAC,SACR3B,KAAM,iBAENC,MAAO,CACLyB,MAAO,CACLxB,KAAM0B,OACNxB,UACE,MAAO,EACT,M,UCTN,MAAMO,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O,uHCRWlC,MAAM,U,GAERA,MAAM,eAAemD,IAAI,c,qBAevBnD,MAAM,e,GACLA,MAAM,gB,GACNA,MAAM,gB,iBASPA,MAAM,e,GACJA,MAAM,iB,wGA7BjBE,EAAAA,EAAAA,IAiCU,UAjCVC,EAiCU,EAhCRiD,EAAAA,EAAAA,IAAsDC,EAAA,CAArCL,MAAO1C,EAAA0C,MAAOhD,MAAM,iB,mBACrCC,EAAAA,EAAAA,IA8BM,MA9BNqD,EA8BM,EA7BJrD,EAAAA,EAAAA,IAaO,QAbDD,MAAM,eAAgBuD,SAAMV,EAAA,KAAAA,EAAA,IAAAW,EAAAA,EAAAA,IAAP,OAAe,e,WACxCvD,EAAAA,EAAAA,IAMC,SALCuB,KAAK,OACJiC,YAAanD,EAAAmD,YACdzD,MAAM,gB,qCACQM,EAAAoD,QAAO9C,GACpB+C,QAAKd,EAAA,KAAAA,EAAA,IAAAe,EAAAA,EAAAA,IAAA,IAAAC,IAAQvD,EAAAwD,cAAAxD,EAAAwD,gBAAAD,GAAY,a,kBADZvD,EAAAoD,a,SAAd,OAGFzD,EAAAA,EAAAA,IAImB,UAHhBD,OAAK+D,EAAAA,EAAAA,IAAEzD,EAAA0D,gBAAe,iDACvBxC,KAAK,SACJb,QAAKkC,EAAA,KAAAA,EAAA,OAAAgB,IAAEvD,EAAAwD,cAAAxD,EAAAwD,gBAAAD,M,QACPvD,EAAA0C,OAAK,I,cAEV/C,EAAAA,EAAAA,IAUM,MAVNmB,EAUM,EATJnB,EAAAA,EAAAA,IAA4C,KAA5CgE,GAA4C/C,EAAAA,EAAAA,IAAjBZ,EAAA4D,YAAU,IACrCjE,EAAAA,EAAAA,IAOK,KAPLkE,EAOK,G,aANHjE,EAAAA,EAAAA,IAKsBE,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAHGC,EAAA8D,aAAY,CAA3B5D,EAAKC,M,WAFfP,EAAAA,EAAAA,IAKsB,MAJpBF,MAAM,kCAELU,IAAKD,EACLE,QAAKC,IAAEN,EAAAoD,QAAQlD,EAAKkD,QAAQpD,EAAAwD,kB,QAC5BtD,EAAKkD,SAAO,EAAAW,K,qBARc/D,EAAAgE,oB,SAWjCrE,EAAAA,EAAAA,IAGM,MAHNsE,EAGM,EAFJtE,EAAAA,EAAAA,IAA+D,MAA/DuE,EAA2B,MAAEtD,EAAAA,EAAAA,IAAEZ,EAAAmE,UAAUC,KAAKC,QAAQ,MAAG,IACzDvB,EAAAA,EAAAA,IAAqEwB,EAAA,CAAtD,aAAYtE,EAAAmE,UAAUC,KAAM1E,MAAM,oB,oCAFlBM,EAAA0D,oB,8DC1BhC,MAAMa,EAAiBA,EAAGC,SAAS,CAAC,GAAM,CAAC,KACzCC,EAAAA,EAAAA,GAAK,IACPC,EAAAA,EACHF,OAAQ,CAAEG,OAAQ,OAAQC,KAAM,EAAGC,MAAO,MAAOL,KAGxCM,EAAoBA,EAAGN,SAAS,CAAC,GAAM,CAAC,KAC5CC,EAAAA,EAAAA,GAAK,IACPM,EAAAA,EACHP,OAAQ,CAAEG,OAAQ,OAAQK,KAAM,EAAGC,SAAU,GAAIC,SAAU,KAAMV,K,kCDmCrE,GAAezD,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,SACNmE,OAAQ,CAACC,EAAAA,GAETC,WAAY,CACVC,eAAc,IACdC,aAAYA,EAAAA,GAGd7E,IAAAA,GACE,MAAO,CACLgC,MAAO,KACPkB,WAAY,OACZT,YAAa,WAEjB,EAEAqC,SAAU,KACLC,EAAAA,EAAAA,IAAS,SAAU,CACpB,eACA,YACA,kBACA,oBAEFrC,QAAS,CACPsC,GAAAA,GACE,OAAOnE,KAAKC,OAAOmE,MAAMC,OAAOxC,OAClC,EACAyC,GAAAA,CAAIC,GACFvE,KAAKU,gBAAgB,CAAEC,MAAO,iBAAkBxB,KAAMoF,GACxD,GAEF9B,gBAAiB,CACf0B,GAAAA,GACE,OAAOnE,KAAKC,OAAOmE,MAAMC,OAAO5B,eAClC,EACA6B,GAAAA,CAAInF,GACFa,KAAKU,gBAAgB,CAAEC,MAAO,yBAA0BxB,QAC1D,GAEFgD,gBAAiB,CACfgC,GAAAA,GACE,OAAOnE,KAAKC,OAAOmE,MAAMC,OAAOlC,eAClC,EACAmC,GAAAA,CAAInF,GACFa,KAAKU,gBAAgB,CAAEC,MAAO,yBAA0BxB,QAC1D,IAIJqF,OAAAA,GACExE,KAAKyE,MACP,EAEAC,OAAAA,GACEC,EAAAA,EAAIC,IAAI,mBAAoB5E,KAAK6E,qBACjC7E,KAAK8E,iBACP,EAEAC,SAAAA,GACEJ,EAAAA,EAAIK,KAAK,mBAAoBhF,KAAK6E,oBACpC,EAEA/E,QAAS,KACJU,EAAAA,EAAAA,IAAa,CAAC,oBACjBiE,IAAAA,GACE,IAAIQ,EAAejF,KAAKkF,OAAOC,MAAMtD,QACjCuD,EACsB,kBAAjBpF,KAAK6B,SAAyC,KAAjB7B,KAAK6B,QACvCwD,EACsB,kBAAjBJ,GAA8C,KAAjBA,EAClCI,GAAuBJ,IAAiBjF,KAAK6B,SAC/C7B,KAAK6B,QAAUoD,EACfjF,KAAKiC,gBACImD,GACTpF,KAAKyC,iBAAkB,EACvBzC,KAAKmC,iBAAkB,GAEvBnC,KAAKsF,cAET,EACAA,YAAAA,GACE,GAAiC,IAA7BtF,KAAKuC,aAAaO,OAGpB,OAFA9C,KAAKmC,iBAAkB,OACvBnC,KAAKyC,iBAAkB,GAGzBzC,KAAKe,8BACLf,KAAKS,eACLuC,IACGuC,KAAK,EAAGpG,WACPa,KAAKU,gBAAgB,CACnBC,MAAO,sBACPxB,KAAMA,EAAKA,KAAK0D,OAElB7C,KAAKO,cACLP,KAAKmC,iBAAkB,EACvBnC,KAAKyC,iBAAkB,IAExB+C,MAAMC,IACLC,MAAMD,IAEZ,EACAxD,YAAAA,GACuB,KAAjBjC,KAAK6B,UAGT7B,KAAK2F,QAAQC,QAAQ,CAAET,MAAO,CAAEtD,QAAS7B,KAAK6B,WAC9C7B,KAAKe,8BACLf,KAAKS,eACL8C,EAAkB,CAAEN,OAAQ,CAAEpB,QAAS7B,KAAK6B,WAAa0D,KAAKM,IAC5D,IAAI1G,EAAO0G,EAAI1G,KAAKA,KACpBa,KAAKU,gBAAgB,CACnBC,MAAO,mBACPxB,SAEFa,KAAKyC,iBAAkB,EACvBzC,KAAKmC,iBAAkB,EACvBnC,KAAKO,gBAET,EACAuE,eAAAA,GACE,IAAIgB,EAAeC,SAASC,uBAAuB,gBAAgB,GACnEC,OAAOH,aAAeA;;AAEtB,IAAII,EAAW,WACTJ,EAAaK,SAGnB,EACAF,OAAOG,iBAAiB,aAAcF,GACtCD,OAAOG,iBAAiB,YAAaF,EACvC,EACArB,mBAAAA,GACM7E,KAAKqG,MAAMC,aAEbtG,KAAKqG,MAAMC,WAAWH,UAAY,EAEtC,K,UElLJ,MAAM/F,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://kugou/./src/components/AppMusicList.vue","webpack://kugou/./src/components/AppMusicList.vue?ea2a","webpack://kugou/./src/mixins/loading.js","webpack://kugou/./src/components/PubModuleTitle.vue","webpack://kugou/./src/components/PubModuleTitle.vue?6e2e","webpack://kugou/./src/views/search/Search.vue","webpack://kugou/./src/requests/search.js","webpack://kugou/./src/views/search/Search.vue?bd63"],"sourcesContent":["<template>\r\n  <ul class=\"music_list\">\r\n    <li class=\"music_list__item main_border_bottom\" v-for=\"(item,index) in musicList\" :key=\"index\">\r\n      <div class=\"music_list__info\" @click=\"wantPlay(item)\">\r\n        <slot :data=\"index\" name=\"index\" class=\"music_list__index\" @click=\"wantPlay(item)\"></slot>\r\n        <div class=\"music_list__name\">{{item.filename}}</div>\r\n      </div>\r\n      <button class=\"music_list__download\">\r\n        <svg class=\"icon\" aria-hidden=\"true\">\r\n          <use xlink:href=\"#icon-download\"></use>\r\n        </svg>\r\n      </button>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n  name: 'AppMusicList',\r\n\r\n  props: {\r\n    musicList: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    wantPlay(music) {\r\n      this.$store.commit('player/wantPlay', {\r\n        music,\r\n        musicList: this.$props.musicList\r\n      })\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import (reference) '~@/styles/constant';\r\n.music_list {\r\n  padding-left: 19px;\r\n}\r\n\r\n.music_list__item {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: auto;\r\n  min-height: 72px;\r\n  padding: 10px 0;\r\n}\r\n\r\n.music_list__info {\r\n  display: flex;\r\n  width: 100%;\r\n  align-items: center;\r\n}\r\n.music_list__index {\r\n  width: 48px;\r\n  flex: 0 0 auto;\r\n}\r\n.music_list__name {\r\n  width: calc(100% - 48px);\r\n  flex: 1 0 auto;\r\n}\r\n\r\n.music_list__download {\r\n  box-sizing: content-box;\r\n  width: 23px;\r\n  height: 100%;\r\n  padding: 0 @padding_width;\r\n}\r\n</style>\r\n","import { render } from \"./AppMusicList.vue?vue&type=template&id=413d897e&scoped=true\"\nimport script from \"./AppMusicList.vue?vue&type=script&lang=js\"\nexport * from \"./AppMusicList.vue?vue&type=script&lang=js\"\n\nimport \"./AppMusicList.vue?vue&type=style&index=0&id=413d897e&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-413d897e\"]])\n\nexport default __exports__","import { mapMutations } from 'vuex'\r\nexport default {\r\n  updated() {\r\n    this.stopLoading()\r\n  },\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    startLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: true\r\n      })\r\n    },\r\n    stopLoading() {\r\n      this.replaceProperty({\r\n        paths: 'loading.isShow',\r\n        data: false\r\n      })\r\n    },\r\n    setLoadingExcludeHeader() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_header'\r\n      })\r\n    },\r\n    setLoadingExcludeNav() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_nav'\r\n      })\r\n    },\r\n    setLoadingExcludeModuleTitle() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_module_title'\r\n      })\r\n    },\r\n    setLoadingExcludeSearchForm() {\r\n      this.replaceProperty({\r\n        paths: 'loading.sizeClassName',\r\n        data: 'loading--exclude_search_form'\r\n      })\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <h4 class=\"module_title main_box_shadow\" @click=\"$emit('click',arguments[0])\">{{title}}</h4>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n  emits: ['click'],\r\n  name: 'PubModuleTitle',\r\n\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      }\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import (reference) '~@/styles/constant';\r\n.module_title {\r\n  width: 100%;\r\n  height: @module_title_height;\r\n  position: relative;\r\n  z-index: 1;\r\n  text-align: center;\r\n\r\n  background-color: @white;\r\n\r\n  line-height: @module_title_height;\r\n}\r\n</style>\r\n","import { render } from \"./PubModuleTitle.vue?vue&type=template&id=ac7e64d2&scoped=true\"\nimport script from \"./PubModuleTitle.vue?vue&type=script&lang=js\"\nexport * from \"./PubModuleTitle.vue?vue&type=script&lang=js\"\n\nimport \"./PubModuleTitle.vue?vue&type=style&index=0&id=ac7e64d2&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ac7e64d2\"]])\n\nexport default __exports__","<template>\r\n  <section class=\"search\">\r\n    <PubModuleTitle :title=\"title\" class=\"search__title\"/>\r\n    <div class=\"search__cont\" ref=\"searchCont\">\r\n      <form class=\"search__form\" @submit.prevent>\r\n        <input\r\n          type=\"text\"\r\n          :placeholder=\"placeholder\"\r\n          class=\"search__input\"\r\n          v-model.trim=\"keyword\"\r\n          @keyup.enter=\"getSearchRes\"\r\n        >\r\n        <button\r\n          :class=\"isSearchResShow?'search__btn search__btn--active':'search__btn'\"\r\n          type=\"button\"\r\n          @click=\"getSearchRes\"\r\n        >{{title}}</button>\r\n      </form>\r\n      <div class=\"search__rec\" v-show=\"isSearchRecShow\">\r\n        <h6 class=\"search__type\">{{searchType}}</h6>\r\n        <ul class=\"search__list\">\r\n          <li\r\n            class=\"search__item main_border_bottom\"\r\n            v-for=\"(item,index) in searchRecArr\"\r\n            :key=\"index\"\r\n            @click=\"keyword=item.keyword;getSearchRes()\"\r\n          >{{item.keyword}}</li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"search__res\" v-show=\"isSearchResShow\">\r\n        <div class=\"search__count\">共有{{searchRes.info.length}}条结果</div>\r\n        <AppMusicList :music-list=\"searchRes.info\" class=\"search__res-list\"/>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\n\r\nimport PubModuleTitle from '@/components/PubModuleTitle'\r\nimport AppMusicList from '@/components/AppMusicList'\r\nimport { fetchHotSearch, fetchSearchResult } from '../../requests/search'\r\nimport bus from '@/eventBus'\r\nimport loading from '../../mixins/loading.js'\r\nimport { mapState, mapMutations } from 'vuex'\r\n\r\nexport default defineComponent({\r\n  name: 'Search',\r\n  mixins: [loading],\r\n\r\n  components: {\r\n    PubModuleTitle,\r\n    AppMusicList\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      title: '搜索',\r\n      searchType: '最近热门',\r\n      placeholder: '歌手/歌名/拼音'\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('search', [\r\n      'searchRecArr',\r\n      'searchRes',\r\n      'isSearchRecShow',\r\n      'isSearchResShow'\r\n    ]),\r\n    keyword: {\r\n      get() {\r\n        return this.$store.state.search.keyword\r\n      },\r\n      set(value) {\r\n        this.replaceProperty({ paths: 'search.keyword', data: value })\r\n      }\r\n    },\r\n    isSearchRecShow: {\r\n      get() {\r\n        return this.$store.state.search.isSearchRecShow\r\n      },\r\n      set(data) {\r\n        this.replaceProperty({ paths: 'search.isSearchRecShow', data })\r\n      }\r\n    },\r\n    isSearchResShow: {\r\n      get() {\r\n        return this.$store.state.search.isSearchResShow\r\n      },\r\n      set(data) {\r\n        this.replaceProperty({ paths: 'search.isSearchResShow', data })\r\n      }\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.init()\r\n  },\r\n\r\n  mounted() {\r\n    bus.$on('searchBtnClicked', this.scrollTopSearchCont)\r\n    this.initQqBugDetect()\r\n  },\r\n\r\n  unmounted() {\r\n    bus.$off('searchBtnClicked', this.scrollTopSearchCont)\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations(['replaceProperty']),\r\n    init() {\r\n      let queryKeyword = this.$route.query.keyword\r\n      let isKeywordValid =\r\n        typeof this.keyword === 'string' && this.keyword !== ''\r\n      let isQueryKeywordValid =\r\n        typeof queryKeyword === 'string' && queryKeyword !== ''\r\n      if (isQueryKeywordValid && queryKeyword !== this.keyword) {\r\n        this.keyword = queryKeyword\r\n        this.getSearchRes()\r\n      } else if (isKeywordValid) {\r\n        this.isSearchRecShow = false\r\n        this.isSearchResShow = true\r\n      } else {\r\n        this.getSearchRec()\r\n      }\r\n    },\r\n    getSearchRec() {\r\n      if (this.searchRecArr.length !== 0) {\r\n        this.isSearchResShow = false\r\n        this.isSearchRecShow = true\r\n        return\r\n      }\r\n      this.setLoadingExcludeSearchForm()\r\n      this.startLoading()\r\n      fetchHotSearch()\r\n        .then(({ data }) => {\r\n          this.replaceProperty({\r\n            paths: 'search.searchRecArr',\r\n            data: data.data.info\r\n          })\r\n          this.stopLoading()\r\n          this.isSearchResShow = false\r\n          this.isSearchRecShow = true\r\n        })\r\n        .catch(err => {\r\n          alert(err)\r\n        })\r\n    },\r\n    getSearchRes() {\r\n      if (this.keyword === '') {\r\n        return\r\n      }\r\n      this.$router.replace({ query: { keyword: this.keyword } })\r\n      this.setLoadingExcludeSearchForm()\r\n      this.startLoading()\r\n      fetchSearchResult({ params: { keyword: this.keyword } }).then(res => {\r\n        let data = res.data.data\r\n        this.replaceProperty({\r\n          paths: 'search.searchRes',\r\n          data\r\n        })\r\n        this.isSearchRecShow = false\r\n        this.isSearchResShow = true\r\n        this.stopLoading()\r\n      })\r\n    },\r\n    initQqBugDetect() {\r\n      let search__cont = document.getElementsByClassName('search__cont')[0]\r\n      window.search__cont = search__cont\r\n      //! bug with qq browser\r\n      let listener = function() {\r\n        if (search__cont.scrollTop) {\r\n          // console.log(event.type, search__cont.scrollTop)\r\n        }\r\n      }\r\n      window.addEventListener('touchstart', listener)\r\n      window.addEventListener('touchmove', listener)\r\n    },\r\n    scrollTopSearchCont() {\r\n      if (this.$refs.searchCont) {\r\n        //todo smooth scroll\r\n        this.$refs.searchCont.scrollTop = 0\r\n      }\r\n    }\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import (reference) '~@/styles/constant';\r\n.search {\r\n  box-sizing: border-box;\r\n}\r\n.search__cont {\r\n  overflow: scroll;\r\n\r\n  box-sizing: border-box;\r\n  height: calc(100% - @module_title_height);\r\n}\r\n.search__form {\r\n  box-sizing: border-box;\r\n  height: @search_form_height;\r\n  padding: @padding_width;\r\n\r\n  background-color: @white-1;\r\n}\r\n.search__input,\r\n.search__btn {\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n\r\n  border-radius: 5px;\r\n}\r\n\r\n.search__input {\r\n  width: 277px;\r\n  margin-right: 10px;\r\n  padding: 7px 1px 7px 31px;\r\n\r\n  border: 1px solid @white-2;\r\n  background-color: @white;\r\n}\r\n.search__btn {\r\n  width: 60px;\r\n\r\n  color: @white-to-black;\r\n  background-color: @white-2;\r\n}\r\n.search__btn--active {\r\n  color: @white;\r\n  background: @theme;\r\n}\r\n.search__type {\r\n  height: 51px;\r\n  padding-left: 16px;\r\n\r\n  color: @theme;\r\n  border-bottom: 1px solid @white-3;\r\n\r\n  font-size: 16px;\r\n  line-height: 51px;\r\n}\r\n.search__item {\r\n  height: 64px;\r\n  margin-left: 16px;\r\n\r\n  font-size: 20px;\r\n  line-height: 64px;\r\n}\r\n.search__count {\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  padding-left: 16px;\r\n\r\n  color: @white-to-black;\r\n  background-color: @white-2;\r\n\r\n  font-size: 14px;\r\n  line-height: 28px;\r\n}\r\n.search__res-list {\r\n  overflow-y: scroll;\r\n}\r\n</style>\r\n","import { getHotSearch, getSearchResult } from '@shared/api/search'\r\nimport http from './http'\r\n\r\nexport const fetchHotSearch = ({ params = {} } = {}) => {\r\n  return http({\r\n    ...getHotSearch,\r\n    params: { format: 'json', plat: 0, count: 30, ...params }\r\n  })\r\n}\r\nexport const fetchSearchResult = ({ params = {} } = {}) => {\r\n  return http({\r\n    ...getSearchResult,\r\n    params: { format: 'json', page: 1, pagesize: 20, showtype: 1, ...params }\r\n  })\r\n}\r\n","import { render } from \"./Search.vue?vue&type=template&id=9a8b3bf6&scoped=true\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=9a8b3bf6&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9a8b3bf6\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_Fragment","_renderList","_ctx","musicList","item","index","key","onClick","$event","wantPlay","_renderSlot","$slots","data","_hoisted_3","_toDisplayString","filename","_hoisted_4","defineComponent","name","props","type","Array","default","methods","music","this","$store","commit","$props","__exports__","render","updated","stopLoading","mapMutations","startLoading","replaceProperty","paths","setLoadingExcludeHeader","setLoadingExcludeNav","setLoadingExcludeModuleTitle","setLoadingExcludeSearchForm","_cache","$emit","arguments","title","emits","String","ref","_createVNode","_component_PubModuleTitle","_hoisted_2","onSubmit","_withModifiers","placeholder","keyword","onKeyup","_withKeys","args","getSearchRes","_normalizeClass","isSearchResShow","_hoisted_5","searchType","_hoisted_6","searchRecArr","_hoisted_7","isSearchRecShow","_hoisted_8","_hoisted_9","searchRes","info","length","_component_AppMusicList","fetchHotSearch","params","http","getHotSearch","format","plat","count","fetchSearchResult","getSearchResult","page","pagesize","showtype","mixins","loading","components","PubModuleTitle","AppMusicList","computed","mapState","get","state","search","set","value","created","init","mounted","bus","$on","scrollTopSearchCont","initQqBugDetect","unmounted","$off","queryKeyword","$route","query","isKeywordValid","isQueryKeywordValid","getSearchRec","then","catch","err","alert","$router","replace","res","search__cont","document","getElementsByClassName","window","listener","scrollTop","addEventListener","$refs","searchCont"],"sourceRoot":""}