import{h as I,C as E,_ as R,r as f,i as L,u as B,w as C,z as N,m as P,c,f as _,j as h,b as g,F as U,e as w,l as D,t as F,s as T,n as V,v as H}from"./index-C2WVff5c.js";import{P as M}from"./PubModuleTitle-BSinRzLr.js";import{u as q}from"./useLoading-B59CCrhl.js";const G=({singerListId:u,params:a={}}={})=>{let{url:i,...r}=E;return i+="/"+u,I({...r,url:i,params:{json:!0,...a}})},J={class:"singer_list"},K=["src","data-src"],O={class:"singer_list__name"},Q={__name:"SingerList",setup(u){const a=B(),i=N(),{startLoading:r,stopLoading:v,setLoadingExcludeHeader:y}=q(),m=f(null),o=f([]),k=L(()=>a.state.images.logo__grey),n=L(()=>a.state.singer.singerList);C(()=>n.value.data,t=>{t.length!==0&&(o.value=t.map(()=>null),V(()=>H(o.value,{root:m.value})))},{immediate:!0});const d=i.path.split("/").pop();Number(d)!==n.value.info.id&&(y(),r(),z(d));const S=(t,e)=>{o.value[t]=e};function z(t){G({params:{singerListId:t}}).then(({data:e})=>{const l={info:{id:e.classid,name:e.classname,count:e.singers.total},data:e.singers.list.info};e.singers.list.info.forEach(s=>{s.id=s.singerid,s.name=s.singername,s.imgUrl=P(s.imgurl),s.path="/singer/info/"+s.id}),a.commit("replaceProperty",{paths:"singer.singerList",data:l}),v()})}return(t,e)=>{const l=T("router-link");return _(),c("section",J,[h(M,{title:n.value.info.name},null,8,["title"]),g("ul",{class:"singer_list__list",ref_key:"lazyLoadRoot",ref:m},[(_(!0),c(U,null,w(n.value.data,(s,p)=>(_(),c("li",{class:"singer_list__item main_border_bottom",key:p},[h(l,{to:s.path,class:"singer_list__link"},{default:D(()=>[g("img",{class:"singer_list__img lazy_image",ref_for:!0,ref:x=>S(p,x),src:k.value,"data-src":s.imgUrl},null,8,K),g("div",O,F(s.name),1)]),_:2},1032,["to"])]))),128))],512)])}}},Z=R(Q,[["__scopeId","data-v-dada344c"]]);export{Z as default};
