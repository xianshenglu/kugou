!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function r(e){for(var r=1;r<arguments.length;r++){var c=null!=arguments[r]?arguments[r]:{};r%2?t(Object(c),!0).forEach(function(t){o(e,t,c[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):t(Object(c)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))})}return e}function o(t,r,o){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var c=o.call(t,r||"default");if("object"!=e(c))return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}System.register(["./index-legacy-DGGkiGYn.js","./PubModuleTitle-legacy-iJ6GUmoJ.js","./AppMusicList-legacy-Dh5gr6Qe.js","./loading-legacy-D7XJznWH.js"],function(e,t){"use strict";var o,c,i,s,a,n,h,l,u,d,f,p,b,w,v,g,y,S,_,m,R,k,x,P,j;return{setters:[function(e){o=e.h,c=e.D,i=e.E,s=e._,a=e.d,n=e.b,h=e.c,l=e.o,u=e.e,d=e.a,f=e.A,p=e.w,b=e.G,w=e.H,v=e.v,g=e.t,y=e.B,S=e.F,_=e.r,m=e.m,R=e.f,k=e.I},function(e){x=e.P},function(e){P=e.A},function(e){j=e.l}],execute:function(){var t=document.createElement("style");t.textContent=".search[data-v-c47f9424]{-webkit-box-sizing:border-box;box-sizing:border-box}.search__cont[data-v-c47f9424]{overflow:scroll;-webkit-box-sizing:border-box;box-sizing:border-box;height:calc(100% - 14.4vw)}.search__form[data-v-c47f9424]{-webkit-box-sizing:border-box;box-sizing:border-box;height:16.8vw;padding:3.46667vw;background-color:#fbfbfb}.search__input[data-v-c47f9424],.search__btn[data-v-c47f9424]{-webkit-box-sizing:border-box;box-sizing:border-box;height:100%;border-radius:1.33333vw}.search__input[data-v-c47f9424]{width:73.86667vw;margin-right:2.66667vw;padding:1.86667vw 1px 1.86667vw 8.26667vw;border:1px solid #e5e5e5;background-color:#fff}.search__btn[data-v-c47f9424]{width:16vw;color:#959595;background-color:#e5e5e5}.search__btn--active[data-v-c47f9424]{color:#fff;background:#2ca2f9}.search__type[data-v-c47f9424]{height:13.6vw;padding-left:4.26667vw;color:#2ca2f9;border-bottom:1px solid #ccc;font-size:4.26667vw;line-height:13.6vw}.search__item[data-v-c47f9424]{height:17.06667vw;margin-left:4.26667vw;font-size:5.33333vw;line-height:17.06667vw}.search__count[data-v-c47f9424]{-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;padding-left:4.26667vw;color:#959595;background-color:#e5e5e5;font-size:3.73333vw;line-height:7.46667vw}.search__res-list[data-v-c47f9424]{overflow-y:scroll}\n/*$vite$:1*/",document.head.appendChild(t);var O=a({name:"Search",mixins:[j],components:{PubModuleTitle:x,AppMusicList:P},data:function(){return{title:"搜索",searchType:"最近热门",placeholder:"歌手/歌名/拼音"}},computed:r(r({},R("search",["searchRecArr","searchRes","isSearchRecShow","isSearchResShow"])),{},{keyword:{get:function(){return this.$store.state.search.keyword},set:function(e){this.replaceProperty({paths:"search.keyword",data:e})}},isSearchRecShow:{get:function(){return this.$store.state.search.isSearchRecShow},set:function(e){this.replaceProperty({paths:"search.isSearchRecShow",data:e})}},isSearchResShow:{get:function(){return this.$store.state.search.isSearchResShow},set:function(e){this.replaceProperty({paths:"search.isSearchResShow",data:e})}}}),created:function(){this.init()},mounted:function(){k.$on("searchBtnClicked",this.scrollTopSearchCont),this.initQqBugDetect()},unmounted:function(){k.$off("searchBtnClicked",this.scrollTopSearchCont)},methods:r(r({},m(["replaceProperty"])),{},{init:function(){var e=this.$route.query.keyword,t="string"==typeof this.keyword&&""!==this.keyword;"string"==typeof e&&""!==e&&e!==this.keyword?(this.keyword=e,this.getSearchRes()):t?(this.isSearchRecShow=!1,this.isSearchResShow=!0):this.getSearchRec()},getSearchRec:function(){var e=this;if(0!==this.searchRecArr.length)return this.isSearchResShow=!1,void(this.isSearchRecShow=!0);this.setLoadingExcludeSearchForm(),this.startLoading(),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params,t=void 0===e?{}:e;return o(r(r({},i),{},{params:r({format:"json",plat:0,count:30},t)}))}().then(function(t){var r=t.data;e.replaceProperty({paths:"search.searchRecArr",data:r.data.info}),e.stopLoading(),e.isSearchResShow=!1,e.isSearchRecShow=!0}).catch(function(e){alert(e)})},getSearchRes:function(){var e=this;""!==this.keyword&&(this.$router.replace({query:{keyword:this.keyword}}),this.setLoadingExcludeSearchForm(),this.startLoading(),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params,t=void 0===e?{}:e;return o(r(r({},c),{},{params:r({format:"json",page:1,pagesize:20,showtype:1},t)}))}({params:{keyword:this.keyword}}).then(function(t){var r=t.data.data;e.replaceProperty({paths:"search.searchRes",data:r}),e.isSearchRecShow=!1,e.isSearchResShow=!0,e.stopLoading()}))},initQqBugDetect:function(){var e=document.getElementsByClassName("search__cont")[0];window.search__cont=e;//! bug with qq browser
var t=function(){e.scrollTop};window.addEventListener("touchstart",t),window.addEventListener("touchmove",t)},scrollTopSearchCont:function(){this.$refs.searchCont&&(this.$refs.searchCont.scrollTop=0)}})}),z={class:"search"},C={class:"search__cont",ref:"searchCont"},L=["placeholder"],T={class:"search__rec"},$={class:"search__type"},E={class:"search__list"},A=["onClick"],D={class:"search__res"},B={class:"search__count"};e("default",s(O,[["render",function(e,t,r,o,c,i){var s=n("PubModuleTitle"),a=n("AppMusicList");return l(),h("section",z,[u(s,{title:e.title,class:"search__title"},null,8,["title"]),d("div",C,[d("form",{class:"search__form",onSubmit:t[3]||(t[3]=p(function(){},["prevent"]))},[f(d("input",{type:"text",placeholder:e.placeholder,class:"search__input","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.keyword=t}),onKeyup:t[1]||(t[1]=w(function(){return e.getSearchRes&&e.getSearchRes.apply(e,arguments)},["enter"]))},null,40,L),[[b,e.keyword,void 0,{trim:!0}]]),d("button",{class:v(e.isSearchResShow?"search__btn search__btn--active":"search__btn"),type:"button",onClick:t[2]||(t[2]=function(){return e.getSearchRes&&e.getSearchRes.apply(e,arguments)})},g(e.title),3)],32),f(d("div",T,[d("h6",$,g(e.searchType),1),d("ul",E,[(l(!0),h(S,null,_(e.searchRecArr,function(t,r){return l(),h("li",{class:"search__item main_border_bottom",key:r,onClick:function(r){e.keyword=t.keyword,e.getSearchRes()}},g(t.keyword),9,A)}),128))])],512),[[y,e.isSearchRecShow]]),f(d("div",D,[d("div",B,"共有"+g(e.searchRes.info.length)+"条结果",1),u(a,{"music-list":e.searchRes.info,class:"search__res-list"},null,8,["music-list"])],512),[[y,e.isSearchResShow]])],512)])}],["__scopeId","data-v-c47f9424"]]))}}})}();
