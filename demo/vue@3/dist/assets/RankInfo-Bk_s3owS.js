import{B as R,g as x,h as S,d as B,r as L,i as n,u as M,s as D,c as N,v as y,x as C,j as E,k as c,f as d,b as u,t as o,y as b,_ as A}from"./index-DyHrXAmZ.js";import{P as H}from"./PubModuleHead-B9GF_Ue-.js";import{A as P}from"./AppMusicList-DwTRsNVa.js";import{u as T}from"./useLoading-GY_dJk3F.js";import{a as V}from"./mapper-Dbp8-Z5E.js";import"./mapper-npPNkTNf.js";const j={method:"GET",url:R+"/rank/info/"},w=x(j,"rankInfo"),G=({params:s={}}={})=>S({...w,params:{json:!0,page:1,...s}}),z={class:"rank_info","test-id":"page-rank-info"},F={class:"rank_info__update_time"},O=B({__name:"RankInfo",setup(s){const r=M(),m=D(),{startLoading:f,stopLoading:p,setLoadingExcludeHeader:l}=T(),_=L("上次更新时间"),t=n(()=>r.state.rank.rankInfo),k=n(()=>({...t.value.info,name:t.value.info.rankname})),g=n(()=>t.value.songs.list),I=n(()=>{const a=new Date(t.value.songs.timestamp*1e3);return a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")}),h=a=>{G({params:{rankid:Number(a)}}).then(i=>{const e=V(i.data);r.commit("replaceProperty",{paths:"rank.rankInfo",data:e}),p()})},v=m.path.split("/").pop();return l(),f(),h(v),(a,i)=>(d(),N("section",z,[t.value.info?(d(),y(H,{key:0,"module-head-info":k.value},{moduleUpdateTime:c(()=>[u("time",F,o(_.value)+" "+o(I.value),1)]),_:1},8,["module-head-info"])):C("",!0),E(P,{"music-list":g.value},{index:c(e=>[u("div",{class:b("rank_info__index rank_info__index"+(e.data+1))},o(e.data+1),3)]),_:1},8,["music-list"])]))}}),Q=A(O,[["__scopeId","data-v-7a063599"]]);export{Q as default};
