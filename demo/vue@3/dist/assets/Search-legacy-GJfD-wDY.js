!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function r(e){for(var r=1;r<arguments.length;r++){var c=null!=arguments[r]?arguments[r]:{};r%2?t(Object(c),!0).forEach(function(t){a(e,t,c[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):t(Object(c)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))})}return e}function a(t,r,a){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var c=a.call(t,r||"default");if("object"!=e(c))return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}System.register(["./index-legacy-xFWWZ2K6.js","./PubModuleTitle-legacy-DbR-DTLT.js","./AppMusicList-legacy-CNfPo8pG.js","./useLoading-legacy-Cjio01GU.js"],function(e,t){"use strict";var a,c,o,n,i,s,l,u,v,d,f,h,b,w,p,m,g,y,_,x,k,S,j,O,P,z,E,C,L,R;return{setters:[function(e){a=e.K,c=e.g,o=e.h,n=e.d,i=e.l,s=e.r,l=e.i,u=e.u,v=e.G,d=e.H,f=e.o,h=e.s,b=e.I,w=e.c,p=e.j,m=e.b,g=e.C,y=e.a,_=e.J,x=e.L,k=e.y,S=e.t,j=e.D,O=e.F,P=e.e,z=e.f,E=e._},function(e){C=e.P},function(e){L=e.A},function(e){R=e.u}],execute:function(){var t=document.createElement("style");t.textContent=".search[data-v-3e813df0]{-webkit-box-sizing:border-box;box-sizing:border-box}.search__cont[data-v-3e813df0]{overflow:scroll;-webkit-box-sizing:border-box;box-sizing:border-box;height:calc(100% - calc(var(--vw, 1vw) * 14.4))}.search__form[data-v-3e813df0]{-webkit-box-sizing:border-box;box-sizing:border-box;height:calc(var(--vw, 1vw) * 16.8);padding:calc(var(--vw, 1vw) * 3.46667);background-color:#fbfbfb}.search__input[data-v-3e813df0],.search__btn[data-v-3e813df0]{-webkit-box-sizing:border-box;box-sizing:border-box;height:100%;border-radius:calc(var(--vw, 1vw) * 1.33333)}.search__input[data-v-3e813df0]{width:calc(var(--vw, 1vw) * 73.86667);margin-right:calc(var(--vw, 1vw) * 2.66667);padding:calc(var(--vw, 1vw) * 1.86667) 1px calc(var(--vw, 1vw) * 1.86667) calc(var(--vw, 1vw) * 8.26667);border:1px solid #e5e5e5;background-color:#fff}.search__btn[data-v-3e813df0]{width:calc(var(--vw, 1vw) * 16);color:#959595;background-color:#e5e5e5}.search__btn--active[data-v-3e813df0]{color:#fff;background:#2ca2f9}.search__type[data-v-3e813df0]{height:calc(var(--vw, 1vw) * 13.6);padding-left:calc(var(--vw, 1vw) * 4.26667);color:#2ca2f9;border-bottom:1px solid #ccc;font-size:calc(var(--vw, 1vw) * 4.26667);line-height:calc(var(--vw, 1vw) * 13.6)}.search__item[data-v-3e813df0]{height:calc(var(--vw, 1vw) * 17.06667);margin-left:calc(var(--vw, 1vw) * 4.26667);font-size:calc(var(--vw, 1vw) * 5.33333);line-height:calc(var(--vw, 1vw) * 17.06667)}.search__count[data-v-3e813df0]{-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;padding-left:calc(var(--vw, 1vw) * 4.26667);color:#959595;background-color:#e5e5e5;font-size:calc(var(--vw, 1vw) * 3.73333);line-height:calc(var(--vw, 1vw) * 7.46667)}.search__res-list[data-v-3e813df0]{overflow-y:scroll}\n/*$vite$:1*/",document.head.appendChild(t);var T={method:"GET",url:a+"/api/v3/search/song"},D=c({method:"GET",url:a+"/api/v3/search/hot"},"hotSearch"),A=c(T,"keywordSearch");function $(e){return e.data.info}var B={class:"search"},G=["placeholder"],q={class:"search__rec"},F={class:"search__type"},I={class:"search__list"},K=["onClick"],M={class:"search__res"},N={class:"search__count"},H=n({__name:"Search",setup:function(e){var t,a,c=u(),n=h(),E=b(),T=R(),H=T.startLoading,J=T.stopLoading,U=T.setLoadingExcludeSearchForm,V=i("searchCont"),Q=s("搜索"),W=s("最近热门"),X=s("歌手/歌名/拼音"),Y=l(function(){return c.state.search.searchRecArr}),Z=l(function(){return c.state.search.searchRes}),ee=l({get:function(){return c.state.search.keyword},set:function(e){c.commit("replaceProperty",{paths:"search.keyword",data:e})}}),te=l({get:function(){return c.state.search.isSearchRecShow},set:function(e){c.commit("replaceProperty",{paths:"search.isSearchRecShow",data:e})}}),re=l({get:function(){return c.state.search.isSearchResShow},set:function(e){c.commit("replaceProperty",{paths:"search.isSearchResShow",data:e})}});function ae(){""!==ee.value&&(E.replace({query:{keyword:ee.value}}),U(),H(),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params,t=void 0===e?{}:e;return o(r(r({},A),{},{params:r({format:"json",page:1,pagesize:20,showtype:1},t)}))}({params:{keyword:ee.value}}).then(function(e){var t;c.commit("replaceProperty",{paths:"search.searchRes",data:(t=e.data,t.data)}),te.value=!1,re.value=!0,J()}))}function ce(){var e=document.getElementsByClassName("search__cont")[0];if(e){window.search__cont=e;//! bug with qq browser
var t=function(){e.scrollTop};window.addEventListener("touchstart",t),window.addEventListener("touchmove",t)}}function oe(){V.value&&(V.value.scrollTop=0)}return t=n.query.keyword,a="string"==typeof ee.value&&""!==ee.value,"string"==typeof t&&""!==t&&t!==ee.value?(ee.value=t,ae()):a?(te.value=!1,re.value=!0):function(){if(0!==Y.value.length)return re.value=!1,void(te.value=!0);U(),H(),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params,t=void 0===e?{}:e;return o(r(r({},D),{},{params:r({format:"json",plat:0,count:30},t)}))}().then(function(e){var t=e.data;c.commit("replaceProperty",{paths:"search.searchRecArr",data:$(t)}),J(),re.value=!1,te.value=!0}).catch(function(e){alert(e)})}(),v(function(){ce(),d.$on("searchBtnClicked",oe)}),f(function(){window.removeEventListener("touchstart",ce),window.removeEventListener("touchmove",ce),d.$off("searchBtnClicked",oe)}),function(e,t){return z(),w("section",B,[p(C,{title:Q.value,class:"search__title"},null,8,["title"]),m("div",{class:"search__cont",ref_key:"searchCont",ref:V},[m("form",{class:"search__form",onSubmit:t[1]||(t[1]=y(function(){},["prevent"]))},[g(m("input",{type:"text",placeholder:X.value,class:"search__input","onUpdate:modelValue":t[0]||(t[0]=function(e){return ee.value=e}),onKeyup:x(ae,["enter"])},null,40,G),[[_,ee.value,void 0,{trim:!0}]]),m("button",{class:k(re.value?"search__btn search__btn--active":"search__btn"),type:"button",onClick:ae},S(Q.value),3)],32),g(m("div",q,[m("h6",F,S(W.value),1),m("ul",I,[(z(!0),w(O,null,P(Y.value,function(e,t){return z(),w("li",{class:"search__item main_border_bottom",key:t,onClick:function(t){ee.value=e.keyword,ae()}},S(e.keyword),9,K)}),128))])],512),[[j,te.value]]),g(m("div",M,[m("div",N,"共有"+S(Z.value.info.length)+"条结果",1),p(L,{"music-list":Z.value.info,class:"search__res-list"},null,8,["music-list"])],512),[[j,re.value]])],512)])}}});e("default",E(H,[["__scopeId","data-v-3e813df0"]]))}}})}();
