import{P as f}from"./PubModuleHead-BRIxvv2j.js";import{A as c}from"./AppMusicList-CyT_TbED.js";import{h as l,u,_,d as g,b as s,c as k,o as h,e as r,j as i,a as d,t as e,v as I,m as M,f as L,k as S}from"./index-DQ-XM1sd.js";import{l as b}from"./loading-BIJBkQMi.js";const H=({params:a={}}={})=>l({...u,params:{json:!0,page:1,...a}}),P=g({name:"RankInfo",mixins:[b],components:{PubModuleHead:f,AppMusicList:c},data(){return{msg:"上次更新时间"}},computed:{...L("rank",["rankInfo"]),getModuleHeadInfo(){return{imgUrl:S(this.rankInfo.info.banner7url),name:this.rankInfo.info.rankname}},getMusicList(){return this.rankInfo.songs.list},formatDate(){let a=new Date(this.rankInfo.songs.timestamp*1e3);return a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")}},created(){let a=this.$route.path.split("/").pop();this.setLoadingExcludeHeader(),this.startLoading(),this.getRankInfo(a)},methods:{...M(["replaceProperty"]),getRankInfo(a){H({params:{rankid:a}}).then(t=>{let n={info:t.data.info,songs:t.data.songs};this.replaceProperty({paths:"rank.rankInfo",data:n}),this.stopLoading()})}}}),R={class:"rank_info"},x={class:"rank_info__update_time"};function D(a,t,n,$,v,A){const p=s("PubModuleHead"),m=s("AppMusicList");return h(),k("section",R,[r(p,{"module-head-info":a.getModuleHeadInfo},{moduleUpdateTime:i(()=>[d("time",x,e(a.msg)+" "+e(a.formatDate),1)]),_:1},8,["module-head-info"]),r(m,{"music-list":a.getMusicList},{index:i(o=>[d("div",{class:I("rank_info__index rank_info__index"+(o.data+1))},e(o.data+1),3)]),_:1},8,["music-list"])])}const j=_(P,[["render",D],["__scopeId","data-v-1ee50fb4"]]);export{j as default};
