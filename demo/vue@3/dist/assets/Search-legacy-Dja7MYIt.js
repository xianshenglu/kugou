!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function r(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?t(Object(a),!0).forEach(function(t){o(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function o(t,r,o){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var a=o.call(t,r||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}System.register(["./index-legacy-rMLjld0M.js","./PubModuleTitle-legacy-BtLHxRf_.js","./AppMusicList-legacy-GRcBSIb_.js","./useLoading-legacy-Dn9g8iON.js"],function(e,t){"use strict";var o,a,n,c,i,s,u,l,d,v,h,f,b,p,m,g,w,_,y,x,k,j,S,O,P,z,E,L,C;return{setters:[function(e){o=e.h,a=e.I,n=e.J,c=e.d,i=e.r,s=e.i,u=e.u,l=e.K,d=e.L,v=e.o,h=e.z,f=e.M,b=e.c,p=e.j,m=e.b,g=e.E,w=e.a,_=e.N,y=e.O,x=e.A,k=e.t,j=e.G,S=e.F,O=e.e,P=e.f,z=e._},function(e){E=e.P},function(e){L=e.A},function(e){C=e.u}],execute:function(){var t=document.createElement("style");t.textContent=".search[data-v-30d54373]{-webkit-box-sizing:border-box;box-sizing:border-box}.search__cont[data-v-30d54373]{overflow:scroll;-webkit-box-sizing:border-box;box-sizing:border-box;height:calc(100% - 14.4vw)}.search__form[data-v-30d54373]{-webkit-box-sizing:border-box;box-sizing:border-box;height:16.8vw;padding:3.46667vw;background-color:#fbfbfb}.search__input[data-v-30d54373],.search__btn[data-v-30d54373]{-webkit-box-sizing:border-box;box-sizing:border-box;height:100%;border-radius:1.33333vw}.search__input[data-v-30d54373]{width:73.86667vw;margin-right:2.66667vw;padding:1.86667vw 1px 1.86667vw 8.26667vw;border:1px solid #e5e5e5;background-color:#fff}.search__btn[data-v-30d54373]{width:16vw;color:#959595;background-color:#e5e5e5}.search__btn--active[data-v-30d54373]{color:#fff;background:#2ca2f9}.search__type[data-v-30d54373]{height:13.6vw;padding-left:4.26667vw;color:#2ca2f9;border-bottom:1px solid #ccc;font-size:4.26667vw;line-height:13.6vw}.search__item[data-v-30d54373]{height:17.06667vw;margin-left:4.26667vw;font-size:5.33333vw;line-height:17.06667vw}.search__count[data-v-30d54373]{-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;padding-left:4.26667vw;color:#959595;background-color:#e5e5e5;font-size:3.73333vw;line-height:7.46667vw}.search__res-list[data-v-30d54373]{overflow-y:scroll}\n/*$vite$:1*/",document.head.appendChild(t);var R={class:"search"},A=["placeholder"],D={class:"search__rec"},T={class:"search__type"},$={class:"search__list"},B=["onClick"],M={class:"search__res"},N={class:"search__count"},q=c({__name:"Search",setup:function(e){var t,c,z=u(),q=h(),F=f(),I=C(),K=I.startLoading,G=I.stopLoading,J=I.setLoadingExcludeSearchForm,U=i(null),V=i("搜索"),H=i("最近热门"),Q=i("歌手/歌名/拼音"),W=s(function(){return z.state.search.searchRecArr}),X=s(function(){return z.state.search.searchRes}),Y=s({get:function(){return z.state.search.keyword},set:function(e){z.commit("replaceProperty",{paths:"search.keyword",data:e})}}),Z=s({get:function(){return z.state.search.isSearchRecShow},set:function(e){z.commit("replaceProperty",{paths:"search.isSearchRecShow",data:e})}}),ee=s({get:function(){return z.state.search.isSearchResShow},set:function(e){z.commit("replaceProperty",{paths:"search.isSearchResShow",data:e})}});function te(){""!==Y.value&&(F.replace({query:{keyword:Y.value}}),J(),K(),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params,t=void 0===e?{}:e;return o(r(r({},n),{},{params:r({format:"json",page:1,pagesize:20,showtype:1},t)}))}({params:{keyword:Y.value}}).then(function(e){var t=e.data.data;z.commit("replaceProperty",{paths:"search.searchRes",data:t}),Z.value=!1,ee.value=!0,G()}))}function re(){var e=document.getElementsByClassName("search__cont")[0];if(e){window.search__cont=e;//! bug with qq browser
var t=function(){e.scrollTop};window.addEventListener("touchstart",t),window.addEventListener("touchmove",t)}}function oe(){U.value&&(U.value.scrollTop=0)}return t=q.query.keyword,c="string"==typeof Y.value&&""!==Y.value,"string"==typeof t&&""!==t&&t!==Y.value?(Y.value=t,te()):c?(Z.value=!1,ee.value=!0):function(){if(0!==W.value.length)return ee.value=!1,void(Z.value=!0);J(),K(),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params,t=void 0===e?{}:e;return o(r(r({},a),{},{params:r({format:"json",plat:0,count:30},t)}))}().then(function(e){var t=e.data;z.commit("replaceProperty",{paths:"search.searchRecArr",data:t.data.info}),G(),ee.value=!1,Z.value=!0}).catch(function(e){alert(e)})}(),l(function(){re(),d.$on("searchBtnClicked",oe)}),v(function(){window.removeEventListener("touchstart",re),window.removeEventListener("touchmove",re),d.$off("searchBtnClicked",oe)}),function(e,t){return P(),b("section",R,[p(E,{title:V.value,class:"search__title"},null,8,["title"]),m("div",{class:"search__cont",ref_key:"searchCont",ref:U},[m("form",{class:"search__form",onSubmit:t[1]||(t[1]=w(function(){},["prevent"]))},[g(m("input",{type:"text",placeholder:Q.value,class:"search__input","onUpdate:modelValue":t[0]||(t[0]=function(e){return Y.value=e}),onKeyup:y(te,["enter"])},null,40,A),[[_,Y.value,void 0,{trim:!0}]]),m("button",{class:x(ee.value?"search__btn search__btn--active":"search__btn"),type:"button",onClick:te},k(V.value),3)],32),g(m("div",D,[m("h6",T,k(H.value),1),m("ul",$,[(P(!0),b(S,null,O(W.value,function(e,t){return P(),b("li",{class:"search__item main_border_bottom",key:t,onClick:function(t){Y.value=e.keyword,te()}},k(e.keyword),9,B)}),128))])],512),[[j,Z.value]]),g(m("div",M,[m("div",N,"共有"+k(X.value.info.length)+"条结果",1),p(L,{"music-list":X.value.info,class:"search__res-list"},null,8,["music-list"])],512),[[j,ee.value]])],512)])}}});e("default",z(q,[["__scopeId","data-v-30d54373"]]))}}})}();
