import{h as x,y as S,d as L,r as R,i as n,u as D,m as M,z as b,c as y,j as c,l as d,f as z,b as u,t as s,A,_ as B}from"./index-C2WVff5c.js";import{P as C}from"./PubModuleHead-BcLZ9zMs.js";import{A as H}from"./AppMusicList-TS7AMvcD.js";import{u as P}from"./useLoading-B59CCrhl.js";const U=({params:r={}}={})=>x({...S,params:{json:!0,page:1,...r}}),j={class:"rank_info"},w={class:"rank_info__update_time"},E=L({__name:"RankInfo",setup(r){const i=D(),l=b(),{startLoading:m,stopLoading:f,setLoadingExcludeHeader:p}=P(),_=R("上次更新时间"),t=n(()=>i.state.rank.rankInfo),g=n(()=>({imgUrl:M(t.value.info.banner7url),name:t.value.info.rankname})),k=n(()=>t.value.songs.list),h=n(()=>{const a=new Date(t.value.songs.timestamp*1e3);return a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")}),I=a=>{U({params:{rankid:a}}).then(o=>{const e={info:o.data.info,songs:o.data.songs};i.commit("replaceProperty",{paths:"rank.rankInfo",data:e}),f()})},v=l.path.split("/").pop();return p(),m(),I(v),(a,o)=>(z(),y("section",j,[c(C,{"module-head-info":g.value},{moduleUpdateTime:d(()=>[u("time",w,s(_.value)+" "+s(h.value),1)]),_:1},8,["module-head-info"]),c(H,{"music-list":k.value},{index:d(e=>[u("div",{class:A("rank_info__index rank_info__index"+(e.data+1))},s(e.data+1),3)]),_:1},8,["music-list"])]))}}),Y=B(E,[["__scopeId","data-v-4221bcde"]]);export{Y as default};
