import{h as I,D as _,d as L,i as t,u as S,z as v,m as M,c as P,j as i,l as x,f as D}from"./index-C2WVff5c.js";import{P as b}from"./PubModuleHead-BcLZ9zMs.js";import{P as E}from"./PubModuleDes-DAJCF_ks.js";import{A as H}from"./AppMusicList-TS7AMvcD.js";import{u as k}from"./useLoading-B59CCrhl.js";const z=({singerId:r,params:n={}}={})=>{let{url:o,...s}=_;return o+="/"+r+"&json=true",I({...s,url:o,params:n})},A={class:"singer_info"},y=L({__name:"SingerInfo",setup(r){const n=S(),o=v(),{startLoading:s,stopLoading:f,setLoadingExcludeHeader:m}=k(),u=t(()=>n.state.singer.singerInfo),g=o.path.split("/").pop()||"";m(),s(),d(g);const a=t(()=>u.value.info),p=t(()=>u.value.data);function d(c){z({singerId:c}).then(({data:e})=>{const h={info:{id:e.info.singerid,name:e.info.singername,count:e.info.songcount,albumcount:e.info.albumcount,imgUrl:M(e.info.imgurl),intro:e.info.intro},data:e.songs.list};e.songs.list.forEach(l=>{l.name=l.filename}),n.commit("replaceProperty",{paths:"singer.singerInfo",data:h}),f()})}return(c,e)=>(D(),P("section",A,[i(b,{"module-head-info":a.value},{moduleDes:x(()=>[i(E,{description:a.value.intro},null,8,["description"])]),_:1},8,["module-head-info"]),i(H,{"music-list":p.value},null,8,["music-list"])]))}});export{y as default};
