System.register(["./index-legacy-CmJ-z1qb.js"],function(e,a){"use strict";var r,t,l,v,c,i,s,n,o,d,u,p,_,y,g,h,w,m,f,b,x,k,E,P,L,z,I,M,$,T;return{setters:[e=>{r=e.d,t=e.r,l=e.i,v=e.u,c=e.w,i=e.G,s=e.n,n=e.o,o=e.c,d=e.F,u=e.e,p=e.N,_=e.z,y=e.O,g=e.t,h=e.f,w=e._,m=e.l,f=e.b,b=e.P,x=e.E,k=e.x,E=e.j,P=e.y,L=e.Q,z=e.R,I=e.S,M=e.T,$=e.U,T=e.I}],execute:function(){var a=document.createElement("style");a.textContent=".player_lyric[data-v-6866e833]{color:#ccc;overflow:scroll;font-size:calc(var(--vw, 1vw) * 4)}.player_lyric[data-v-6866e833]{text-align:center}.player_lyric_text[data-v-6866e833]{line-height:inherit}.player_lyric_text--active[data-v-6866e833]{color:#d1c90e}.player_progress[data-v-2e49df67]{font-size:calc(var(--vw, 1vw) * 3.2);padding:calc(var(--vw, 1vw) * 4.26667) calc(var(--vw, 1vw) * 3.46667);display:flex;justify-content:space-between;align-items:center;color:#e5e5e5}.player_progress__song_cur_time[data-v-2e49df67],.player_progress__song_duration[data-v-2e49df67]{flex:0 0 auto}.player_progress__progress_bar[data-v-2e49df67]{flex:1 0 auto;height:calc(var(--vw, 1vw) * 1.06667);margin:0 calc(var(--vw, 1vw) * 2.66667);background-color:#232228;position:relative}.player_progress__progress_bar_pointer[data-v-2e49df67]{position:absolute;left:0;top:50%;transform:translate(-50%,-50%);background:#2ca2f9;height:calc(var(--vw, 1vw) * 3.46667);width:calc(var(--vw, 1vw) * 3.46667);border-radius:50%}.player[data-v-f54ee02e]{position:relative}.player__mask[data-v-f54ee02e]{position:absolute;left:0;top:0;filter:blur(calc(var(--vw, 1vw) * 4));width:100%;height:100%;display:block;background-repeat:no-repeat,no-repeat;background-size:auto 100%,auto 100%;background-position:center,center;z-index:-1}.player__cont[data-v-f54ee02e]{display:flex;flex-flow:column;align-items:center;height:100%;background-color:rgba(0,0,0,.6);width:100%;box-sizing:border-box;overflow:hidden}.player__song_name[data-v-f54ee02e]{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 54 / 609);line-height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 54 / 609);width:calc(100% - calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 120 / 609));box-sizing:border-box;margin:0 calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 120 / 609);overflow-x:auto;overflow-y:hidden;white-space:nowrap;color:#fff;text-align:center;font-size:inherit}.player__singer_img[data-v-f54ee02e]{margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 26 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 193 / 609);width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 193 / 609);flex:0 0 auto;border-radius:50%;animation:rotate 20s linear infinite reverse;animation-play-state:paused}.player__singer_img--active[data-v-f54ee02e]{animation-play-state:running}.player__lyrics[data-v-f54ee02e]{margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 68 / 609);line-height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 34 / 609);width:102%;box-sizing:border-box;padding:0 calc(var(--vw, 1vw) * 16)}.player__progress[data-v-f54ee02e]{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 48 / 609);width:100%;box-sizing:border-box}.player__buttons[data-v-f54ee02e]{height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);display:flex;align-items:center;justify-content:center}.player__btn_prev[data-v-f54ee02e],.play__btn_next[data-v-f54ee02e],.player__btn_status[data-v-f54ee02e]{border-radius:50%;border:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 2 / 609) solid #fff;margin:0 calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609)}.player__btn_prev[data-v-f54ee02e],.play__btn_next[data-v-f54ee02e]{width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 42 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 42 / 609);font-size:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 16 / 609)}.player__btn_prev[data-v-f54ee02e] .icon{transform:translate(0)}.play__btn_next[data-v-f54ee02e] .icon{transform:translate(1px)}.player__btn_status[data-v-f54ee02e]{width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 58 / 609);font-size:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 20 / 609)}.player__download[data-v-f54ee02e]{margin-top:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 19 / 609) auto 0;height:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 45 / 609);width:calc((var(--vh) * 100 - calc(var(--vw, 1vw) * 100) * 58 / 375) * 211 / 609)}\n/*$vite$:1*/",document.head.appendChild(a);const S=r({__name:"PlayerLyrics",setup(e){const a=v(),r=t(0),w=t(!1),m=t({}),f=l(()=>a.state.player.audioEl),b=l(()=>a.getters["player/lyricItems"]),x=l(()=>b.value.map(e=>e.millisecond));c(b,e=>{0!==e.length&&(m.value={})},{immediate:!0,deep:!0});const k=e=>{if(w.value)return;let a=Math.floor(1e3*e.target.currentTime),t=x.value.findIndex(e=>e>1.005*a),l=t>1?t-2:0;const v=x.value[l];m.value[v]&&m.value[v].scrollIntoView(),r.value=l};return i(()=>{s(()=>{f.value.addEventListener("timeupdate",k)})}),n(()=>{f.value.removeEventListener("timeupdate",k)}),(e,a)=>(h(),o("div",{class:"player_lyric","test-id":"player-max-lyrics",onTouchstart:a[0]||(a[0]=e=>w.value=!0),onTouchend:a[1]||(a[1]=e=>w.value=!1)},[(h(!0),o(d,null,u(b.value,(e,a)=>(h(),o("p",p({ref_for:!0},_(y)("millisecond-"+e.millisecond),{key:e.millisecond,ref_for:!0,ref:a=>m.value[e.millisecond]=a,class:a===r.value+1?"player_lyric_text player_lyric_text--active ":"player_lyric_text"}),g(e.text),17))),128))],32))}}),j=w(S,[["__scopeId","data-v-6866e833"]]),q={class:"player_progress__song_cur_time"},B={class:"player_progress__song_duration"},C=r({__name:"PlayerProgress",setup(e){const a=v(),r=m("progressBar"),c=l(()=>a.state.player.audioEl),d=t(0),u=t(0),p=t(!1),y=t(0),w=t(null),k=l(()=>Math.floor(100*d.value/c.value.duration)),E=l(()=>`background-image:linear-gradient(to right, #2ca2f9 ${k.value}%, transparent ${k.value}%),linear-gradient(to right, #6c6b70 ${u.value}%, transparent ${u.value}%)`),P=()=>{if(c.value.readyState<2)return;const e=c.value.buffered.length;u.value=Math.floor(100*c.value.buffered.end(e-1)/c.value.duration)},L=e=>{p.value||(d.value=e.target.currentTime)},z=e=>{p.value=!0,w.value||(w.value=r.value.getBoundingClientRect());const a=e.touches[0].clientX;d.value=$(a,w.value.left,0),y.value=a,window.addEventListener("touchmove",I),window.addEventListener("touchend",M)},I=e=>{const a=e.touches[0].clientX;d.value=$(a,y.value,1),y.value=a},M=()=>{p.value=!1,c.value.currentTime=d.value,window.removeEventListener("touchmove",I),window.removeEventListener("touchend",M)},$=(e,a,r)=>{const t=(e-a)/w.value.width;let l;switch(r){case 0:l=c.value.duration*t;break;case 1:l=d.value+c.value.duration*t}return l<0?l=0:l>c.value.duration&&(l=c.value.duration),l};return i(()=>{s(()=>{c.value.addEventListener("progress",P),c.value.addEventListener("timeupdate",L)})}),n(()=>{c.value.removeEventListener("progress",P),c.value.removeEventListener("timeupdate",L)}),(e,a)=>(h(),o("div",{class:"player_progress","test-id":"player-max-progress",onTouchstart:z},[f("div",q,g(_(b)(d.value)),1),f("div",{class:"player_progress__progress_bar",ref_key:"progressBar",ref:r,style:x(E.value)},[f("div",{class:"player_progress__progress_bar_pointer",style:x(`left:${k.value}%;`)},null,4)],4),f("div",B,g(_(b)(c.value.duration)),1)],32))}}),R=w(C,[["__scopeId","data-v-2e49df67"]]),H={key:0,class:"player","test-id":"player-max"},N={class:"player__cont"},X={class:"player__song_name","test-id":"player-max-song-name"},F=["src"],G={class:"player__buttons"},O=r({...{beforeRouteEnter(e,a,r){let t=e.query.musicHash;if(!t)return;const{fromPlayerMed:l,...v}=e.query;return l?r({...e,query:v}):M({params:{hash:t}}).then(e=>{let a=e.data.data;a.filename=a.audio_name,$.commit("player/wantPlay",{music:a,musicList:[a]}),$.commit("player/wantPlay",{music:a,musicList:[a]}),r()})}},__name:"PlayerMax",setup(e){const a=v(),r=T(),t=l(()=>a.state.player.music),s=l(()=>a.state.player.isPlaying),d=l(()=>a.getters["player/singerImg"]),u=l(()=>a.getters["player/songName"]),p=l(()=>`background-image:url(${d.value}),linear-gradient(to right, rgb(48, 67, 82), rgb(215, 210, 204));`);return c(()=>t.value?.hash,e=>{r.replace({query:{musicHash:e}})}),i(()=>{a.commit("replaceProperty",{paths:"player.isPlayerMedShow",data:!1})}),n(()=>{a.commit("replaceProperty",{paths:"player.isPlayerMedShow",data:!0}),a.commit("replaceProperty",{paths:"player.isPlayerMedSmall",data:!1})}),(e,a)=>t.value?(h(),o("section",H,[f("div",{class:"player__mask",style:x(p.value)},null,4),f("div",N,[f("h6",X,g(u.value),1),f("img",{src:d.value,class:P(s.value?"player__singer_img player__singer_img--active":"player__singer_img")},null,10,F),E(j,{class:"player__lyrics"}),E(R,{class:"player__progress"}),f("div",G,[E(L,{class:"player__btn_prev"}),E(z,{class:"player__btn_status"}),E(I,{class:"play__btn_next"})]),a[0]||(a[0]=f("button",{class:"player__download"},null,-1))])])):k("",!0)}});e("default",w(O,[["__scopeId","data-v-f54ee02e"]]))}}});
