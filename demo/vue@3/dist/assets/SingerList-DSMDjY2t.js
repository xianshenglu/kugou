import{P as u}from"./PubModuleTitle-bhJPJVQ_.js";import{h,y as f,_ as L,d as y,b as m,c as n,o as r,e as c,a as o,F as S,r as z,j as I,t as k,m as E,f as l,k as P,n as $,q as v}from"./index-DQ-XM1sd.js";import{l as M}from"./loading-BIJBkQMi.js";const R=({singerListId:e,params:t={}}={})=>{let{url:i,...s}=f;return i+="/"+e,h({...s,url:i,params:{json:!0,...t}})},T=y({name:"SingerList",mixins:[M],components:{PubModuleTitle:u},computed:{...l("images",["logo__grey"]),...l("singer",["singerList"]),...l("loading",{isLoadingShow:"isShow"})},data(){return{lazyImageElements:[]}},watch:{"singerList.data":{handler:function(e){e.length!==0&&(this.lazyImageElements=e.map(()=>null),$(()=>v(this.lazyImageElements,{root:this.$refs.lazyLoadRoot})))},immediate:!0,deep:!0}},created(){let e=this.$route.path.split("/").pop();Number(e)!==this.singerList.info.id&&(this.setLoadingExcludeHeader(),this.startLoading(),this.getSingerList(e))},methods:{...E(["replaceProperty"]),saveImageRef(e,t){this.lazyImageElements[e]=t},getSingerList(e){R({params:{singerListId:e}}).then(({data:t})=>{let i={info:{id:t.classid,name:t.classname,count:t.singers.total},data:t.singers.list.info};t.singers.list.info.forEach(s=>{s.id=s.singerid,s.name=s.singername,s.imgUrl=P(s.imgurl),s.path="/singer/info/"+s.id}),this.replaceProperty({paths:"singer.singerList",data:i}),this.stopLoading()})}}}),w={class:"singer_list"},B={class:"singer_list__list",ref:"lazyLoadRoot"},C=["src","data-src"],N={class:"singer_list__name"};function U(e,t,i,s,x,F){const d=m("PubModuleTitle"),_=m("router-link");return r(),n("section",w,[c(d,{title:e.singerList.info.name},null,8,["title"]),o("ul",B,[(r(!0),n(S,null,z(e.singerList.data,(a,g)=>(r(),n("li",{class:"singer_list__item main_border_bottom",key:g},[c(_,{to:a.path,class:"singer_list__link"},{default:I(()=>[o("img",{class:"singer_list__img lazy_image",ref_for:!0,ref:p=>e.saveImageRef(g,p),src:e.logo__grey,"data-src":a.imgUrl},null,8,C),o("div",N,k(a.name),1)]),_:2},1032,["to"])]))),128))],512)])}const H=L(T,[["render",U],["__scopeId","data-v-e3aaf686"]]);export{H as default};
